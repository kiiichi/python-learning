function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.FullGCD;local v24=aura_env.TalentRank;local v25=aura_env.ids;aura_env.OutOfRange=false;local v27=WeakAuras.GetNumSetItemsEquipped(5882 -4010 );local v28=UnitPower("player",Enum.PowerType.ArcaneCharges);local v29=UnitPowerMax("player",Enum.PowerType.ArcaneCharges);local v30=UnitPower("player",Enum.PowerType.Mana);local v31=UnitPowerMax("player",Enum.PowerType.Mana);local v32=v9(v25.NetherPrecisionBuff);local v33=select(9,UnitCastingInfo("player"));if (v33~=nil) then if (v33==v25.ArcaneBlast) then v28=min(22 -(10 + 8) ,v28 + (3 -2) );v32=max(442 -(416 + 26) ,v32-(3 -2) );end end local v34=0;local v35=18 + 22 ;for v44=1 -0 ,40 do local v45="nameplate"   .. v44 ;if (UnitExists(v45) and  not UnitIsFriend("player",v45) and WeakAuras.CheckRange(v45,v35,"<=") and (UnitAffectingCombat(v45) or aura_env.config['BypassCombatRequirement'])) then v34=v34 + (439 -(145 + 293)) ;end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v34);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then local v72=430 -(44 + 386) ;while true do if (v72==(1487 -(998 + 488))) then v21("Clear",nil);return;end if (v72==0) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",ExtraGlows);v20("Clear",nil);v72=1 + 0 ;end end end end local v36={};WeakAuras.ScanEvents("K_TRIGED_EXTRA",v36,nil);local v37={};v37.AoeTargetCount=2 + 0 ;if  not IsPlayerSpell(v25.ArcingCleaveTalent) then v37.AoeTargetCount=9;end if ( not v12(v25.TouchOfTheMagiDebuff) and (v7(v25.TouchOfTheMagi)==0)) then v37.Opener=true;else local v49=772 -(201 + 571) ;while true do if (v49==(1138 -(116 + 1022))) then aura_env.UsedOrb=false;aura_env.UsedMissiles=false;v49=4 -3 ;end if (v49==1) then aura_env.UsedBarrage=false;v37.Opener=false;break;end end end v37.AoeList=aura_env.config['AoeList'];local v41=function() local v46=0 + 0 ;while true do if (v46==(7 -5)) then if (v3(v25.Evocation) and (v7(v25.ArcaneSurge)<(max((3.5 -2)/(1 + ((859.01 -(814 + 45)) * UnitSpellHaste("player"))) ,0.75 -0 ) * (1 + 2))) and (v7(v25.TouchOfTheMagi)<(max(1.5/(1 + ((0.01 + 0) * UnitSpellHaste("player"))) ,885.75 -(261 + 624) ) * 5))) then if ((aura_env.config[tostring(v25.Evocation)]==true) and aura_env.FlagKTrigCD) then v21("Evocation");elseif (aura_env.config[tostring(v25.Evocation)]~=true) then v20("Evocation");return true;end end if (v3(v25.ArcaneMissiles) and  not aura_env.UsedMissiles and ((aura_env.PrevCast==v25.Evocation) or v8(v25.Evocation) or (aura_env.PrevCast==v25.ArcaneSurge) or v8(v25.ArcaneSurge) or v37.Opener) and (v32==(0 -0)) and ( not v11(v25.AetherAttunementBuff) or (v27>=4))) then v20("Arcane Missiles");return true;end v46=1083 -(1020 + 60) ;end if (v46==0) then if (v3(v25.TouchOfTheMagi) and ((true and ((v5("player",v25.ArcaneSurgeBuff)>(1428 -(630 + 793))) or v8(v25.ArcaneSurge) or (v7(v25.ArcaneSurge)>30))) or (((aura_env.PrevCast==v25.ArcaneSurge) or v8(v25.ArcaneSurge)) and ((v28<(13 -9)) or (v32==(0 -0)))) or ((v7(v25.ArcaneSurge)>(12 + 18)) and v3(v25.TouchOfTheMagi) and (v28<(13 -9)) and  not ((aura_env.PrevCast==v25.ArcaneBarrage) or v8(v25.ArcaneBarrage))))) then if ((aura_env.config[tostring(v25.TouchOfTheMagi)]==true) and aura_env.FlagKTrigCD) then v21("Touch Of The Magi");elseif (aura_env.config[tostring(v25.TouchOfTheMagi)]~=true) then v20("Touch Of The Magi");return true;end end if (v3(v25.ArcaneBlast) and (v11(v25.PresenceOfMind))) then local v77=0;while true do if (v77==(1747 -(760 + 987))) then v20("Arcane Blast");return true;end end end v46=1914 -(1789 + 124) ;end if (v46==(769 -(745 + 21))) then if (v4(v25.ArcaneSurge) and ((v7(v25.TouchOfTheMagi)<(max(C_Spell.GetSpellInfo(v25.ArcaneSurge).castTime/1000 ,WeakAuras.gcdDuration()) + (max(1.5/(1 + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75) * (((v28==(10 -6)) and (3 -2)) or 0)))) or v12(v25.TouchOfTheMagiDebuff))) then if ((aura_env.config[tostring(v25.ArcaneSurge)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Surge");elseif (aura_env.config[tostring(v25.ArcaneSurge)]~=true) then local v81=0;while true do if (v81==(0 + 0)) then v20("Arcane Surge");return true;end end end end break;end if (1==v46) then if (v3(v25.ArcaneOrb) and IsPlayerSpell(v25.HighVoltageTalent) and v37.Opener and  not aura_env.UsedOrb) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then local v82=0 + 0 ;while true do if (v82==(1055 -(87 + 968))) then v20("Arcane Orb");return true;end end end end if (v3(v25.ArcaneBarrage) and v37.Opener and  not aura_env.UsedBarrage and v11(v25.ArcaneTempoBuff) and v3(v25.Evocation) and (v5("player",v25.ArcaneTempoBuff)<(max((4.5 -3)/(1 + 0 + ((0.01 -0) * UnitSpellHaste("player"))) ,1413.75 -(447 + 966) ) * (13 -8)))) then v20("Arcane Barrage");return true;end v46=1819 -(1703 + 114) ;end end end;local v42=function() if (v3(v25.ShiftingPower) and (((((C_Spell.GetSpellCharges(v25.ArcaneOrb).currentCharges==((IsPlayerSpell(v25.ChargedOrbTalent) and (702 -(376 + 325))) or (0 -0))) and v7(v25.ArcaneOrb)) or (v7(v25.TouchOfTheMagi)<23)) and (v11(v25.ArcaneSurgeBuff)==false) and (v11(v25.SiphonStormBuff)==false) and (v12(v25.TouchOfTheMagiDebuff)==false) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>3.5))) and (v7(v25.TouchOfTheMagi)>((36 -24) + ((2 + 4) * max((2.5 -1)/((15 -(9 + 5)) + ((376.01 -(85 + 291)) * UnitSpellHaste("player"))) ,1265.75 -(243 + 1022) ))))) or (((aura_env.PrevCast==v25.ArcaneBarrage) or v8(v25.ArcaneBarrage)) and IsPlayerSpell(v25.ShiftingShardsTalent) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>(11.5 -8)))) and (v11(v25.ArcaneSurgeBuff) or v12(v25.TouchOfTheMagiDebuff) or (v7(v25.Evocation)<(17 + 3))))) and (v18(1240 -(1123 + 57) ,v35)>(9 + 1)) and ((v5("player",v25.ArcaneTempoBuff)>(max((255.5 -(163 + 91))/((1931 -(1869 + 61)) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 -0 ) * 2.5)) or (v11(v25.ArcaneTempoBuff)==false))) then if ((aura_env.config[tostring(v25.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v21("Shifting Power");elseif (aura_env.config[tostring(v25.ShiftingPower)]~=true) then v20("Shifting Power");return true;end end if (v3(v25.Supernova) and (v6("target",v25.TouchOfTheMagiDebuff)<=max((1.5 -0)/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,0.75 -0 )) and (v9(v25.UnerringProficiencyBuff)==30)) then if ((aura_env.config[tostring(v25.Supernova)]==true) and aura_env.FlagKTrigCD) then v21("Supernova");elseif (aura_env.config[tostring(v25.Supernova)]~=true) then local v78=0 + 0 ;while true do if (0==v78) then v20("Supernova");return true;end end end end if (v3(v25.ArcaneBarrage) and ((v11(v25.ArcaneTempoBuff) and (v5("player",v25.ArcaneTempoBuff)<(max((1475.5 -(1329 + 145))/((972 -(140 + 831)) + ((1850.01 -(1409 + 441)) * UnitSpellHaste("player"))) ,718.75 -(15 + 703) ) + (max((1.5 + 0)/((439 -(262 + 176)) + (0.01 * UnitSpellHaste("player"))) ,0.75) * 2 * (((v32==(1722 -(345 + 1376))) and (689 -(198 + 490))) or (0 -0)))))) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)<max(1.5/((2 -1) + ((1206.01 -(696 + 510)) * UnitSpellHaste("player"))) ,0.75 -0 ))))) then local v52=0;while true do if (v52==(1262 -(1091 + 171))) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v9(v25.ArcaneHarmonyBuff)>=(18 -(6 * ((IsPlayerSpell(v25.HighVoltageTalent) and (1 + 0)) or 0)))) and ((v32==(0 -0)) or (v32==(3 -2)) or ((v34>(377 -(123 + 251))) and v11(v25.ClearcastingBuff) and IsPlayerSpell(v25.HighVoltageTalent)))) then local v53=0;while true do if (v53==(0 -0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and v11(v25.AetherAttunementBuff) and (v7(v25.TouchOfTheMagi)<(max((699.5 -(208 + 490))/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,0.75) * (2 + 1))) and v11(v25.ClearcastingBuff) and (v27>=4)) then v20("Arcane Missiles");return true;end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.HighVoltageTalent) and IsPlayerSpell(v25.OrbBarrageTalent) and (v28>(837 -(660 + 176))) and v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff) and ((v32==1) or ((v32>(0 + 0)) and (v34>(203 -(14 + 188)))) or (((v32>0) or ((v9(v25.ClearcastingBuff)<3) and  not v11(v25.IntuitionBuff))) and (v34>(678 -(534 + 141)))))) then local v54=0 + 0 ;while true do if (v54==(0 + 0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and ((v11(v25.ClearcastingBuff) and (v32==0) and (((v7(v25.TouchOfTheMagi)>(max((1.5 + 0)/((1 -0) + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 -0 ) * (4 + 3))) and (v7(v25.ArcaneSurge)>(max((1.5 + 0)/(1 + (0.01 * UnitSpellHaste("player"))) ,396.75 -(115 + 281) ) * (15 -8)))) or (v9(v25.ClearcastingBuff)>(1 + 0)) or  not IsPlayerSpell(v25.MagisSparkTalent) or ((v7(v25.TouchOfTheMagi)<(max((2.5 -1)/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75) * 4)) and (v9(v25.AetherAttunementBuff)==(0 -0))) or (v27>=(871 -(550 + 317))))) or ((v18(86 -26 ,v35)<(7 -2)) and v11(v25.ClearcastingBuff)))) then v20("Arcane Missiles");return true;end if (v3(v25.ArcaneBlast) and ((aura_env.NeedArcaneBlastSpark and ((v6("target",v25.TouchOfTheMagiDebuff)<((C_Spell.GetSpellInfo(v25.ArcaneBlast).castTime/(2794 -1794)) + max((286.5 -(134 + 151))/((1666 -(970 + 695)) + (0.01 * UnitSpellHaste("player"))) ,0.75))) or (v34<=1) or IsPlayerSpell(v25.LeydrinkerTalent))) or v11(v25.LeydrinkerBuff)) and (v28==(7 -3)) and  not IsPlayerSpell(v25.ChargedOrbTalent) and (v34<(1993 -(582 + 1408)))) then local v55=0;while true do if (v55==(0 -0)) then v20("Arcane Blast");return true;end end end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.OrbBarrageTalent) and (v34>(1 -0)) and ((aura_env.NeedArcaneBlastSpark==false) or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v28==(15 -11)) and ((IsPlayerSpell(v25.HighVoltageTalent) and (v34>2)) or (v7(v25.TouchOfTheMagi)>(max((1825.5 -(1195 + 629))/((1 -0) + ((241.01 -(187 + 54)) * UnitSpellHaste("player"))) ,0.75) * (786 -(162 + 618)))) or  not IsPlayerSpell(v25.MagisSparkTalent) or (IsPlayerSpell(v25.ChargedOrbTalent) and (v14(v25.ArcaneOrb)>(1.8 + 0))))) then local v56=0 + 0 ;while true do if (v56==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34>(1 -0)) and ((aura_env.NeedArcaneBlastSpark==false) or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v28==4) and ((v7(v25.ArcaneOrb)<max((1.5 -0)/(1 + 0 + ((1636.01 -(1373 + 263)) * UnitSpellHaste("player"))) ,1000.75 -(451 + 549) )) or ((((UnitHealth("target")/UnitHealthMax("target")) * 100)<35) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and ((v32==1) or ((v32==(0 + 0)) and IsPlayerSpell(v25.HighVoltageTalent)) or ((v32==2) and (((UnitHealth("target")/UnitHealthMax("target")) * 100)<35) and IsPlayerSpell(v25.ArcaneBombardmentTalent) and IsPlayerSpell(v25.HighVoltageTalent))) and ((v7(v25.TouchOfTheMagi)>(max(1.5/((1 -0) + ((0.01 -0) * UnitSpellHaste("player"))) ,1384.75 -(746 + 638) ) * (3 + 3))) or (IsPlayerSpell(v25.ChargedOrbTalent) and (v14(v25.ArcaneOrb)>(1.8 -0))))) then local v57=341 -(218 + 123) ;while true do if (v57==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and IsPlayerSpell(v25.HighVoltageTalent) and ((v9(v25.ClearcastingBuff)>1) or (v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff))) and (v28<3)) then v20("Arcane Missiles");return true;end if (v3(v25.ArcaneOrb) and (((v34<=(1582 -(1535 + 46))) and (v28<(3 + 0))) or (v28<1) or ((v28<2) and IsPlayerSpell(v25.HighVoltageTalent)))) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then local v79=0 + 0 ;while true do if (v79==(560 -(306 + 254))) then v20("Arcane Orb");return true;end end end end if (v3(v25.ArcaneBarrage) and (v11(v25.IntuitionBuff))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v34<=(1 + 0)) and IsPlayerSpell(v25.HighVoltageTalent) and (v28==(7 -3)) and v11(v25.ClearcastingBuff) and (v32==1) and (v11(v25.AetherAttunementBuff) or ((((UnitHealth("target")/UnitHealthMax("target")) * 100)<35) and IsPlayerSpell(v25.ArcaneBombardmentTalent)))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v7(v25.ArcaneOrb)<max(1.5/(1 + ((1467.01 -(899 + 568)) * UnitSpellHaste("player"))) ,0.75)) and (v28==(3 + 1)) and (v32==(0 -0)) and IsPlayerSpell(v25.OrbBarrageTalent) and ((v7(v25.TouchOfTheMagi)>(max(1.5/((604 -(268 + 335)) + ((290.01 -(60 + 230)) * UnitSpellHaste("player"))) ,0.75) * (578 -(426 + 146)))) or  not IsPlayerSpell(v25.MagisSparkTalent))) then local v58=0 + 0 ;while true do if (v58==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34<=1) and (IsPlayerSpell(v25.OrbBarrageTalent) or ((((UnitHealth("target")/UnitHealthMax("target")) * 100)<(1491 -(282 + 1174))) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and (v7(v25.ArcaneOrb)<max((812.5 -(569 + 242))/(1 + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75)) and (v28==(1 + 3)) and ((v7(v25.TouchOfTheMagi)>(max((1025.5 -(706 + 318))/(1 + (0.01 * UnitSpellHaste("player"))) ,1251.75 -(721 + 530) ) * (1277 -(945 + 326)))) or  not IsPlayerSpell(v25.MagisSparkTalent)) and ((v32==0) or ((v32==(2 -1)) and (v9(v25.ClearcastingBuff)==(0 + 0))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneExplosion) and WeakAuras.CheckRange("target",710 -(271 + 429) ,"<=") and (v34>1) and (((v28<(1 + 0)) and  not IsPlayerSpell(v25.HighVoltageTalent)) or ((v28<(1503 -(1408 + 92))) and ((v9(v25.ClearcastingBuff)==(1086 -(461 + 625))) or IsPlayerSpell(v25.ReverberateTalent))))) then local v59=0;while true do if (v59==(1288 -(993 + 295))) then v20("Arcane Explosion");return true;end end end if (v3(v25.ArcaneExplosion) and WeakAuras.CheckRange("target",10,"<=") and (v34==(1 + 0)) and (v28<(1173 -(418 + 753))) and  not v11(v25.ClearcastingBuff) and (((v30/v31) * (39 + 61))>(2 + 8))) then v20("Arcane Explosion");return true;end if (v3(v25.ArcaneBarrage) and (((((UnitHealth("target")/UnitHealthMax("target")) * (30 + 70))<(9 + 26)) and (v6("target",v25.TouchOfTheMagiDebuff)<(max(1.5/(1 + ((529.01 -(406 + 123)) * UnitSpellHaste("player"))) ,1769.75 -(1749 + 20) ) * 1.25)) and (v6("target",v25.TouchOfTheMagiDebuff)>(0.75 + 0))) or ((v5("player",v25.ArcaneSurgeBuff)<max(1.5/((1323 -(1249 + 73)) + (0.01 * UnitSpellHaste("player"))) ,0.75 + 0 )) and v11(v25.ArcaneSurgeBuff))) and (v28==4)) then local v60=1145 -(466 + 679) ;while true do if (v60==(0 -0)) then v20("Arcane Barrage");return true;end end end if v3(v25.ArcaneBlast) then local v61=0 -0 ;while true do if (v61==0) then v20("Arcane Blast");return true;end end end if v3(v25.ArcaneBarrage) then v20("Arcane Barrage");return true;end end;local v43=function() if (v3(v25.ShiftingPower) and (v11(v25.ArcaneSurgeBuff)==false) and (v11(v25.SiphonStormBuff)==false) and (v12(v25.TouchOfTheMagiDebuff)==false) and (v7(v25.Evocation)>(1915 -(106 + 1794))) and (v7(v25.TouchOfTheMagi)>10) and (v18(60,v35)>10) and (v11(v25.ArcaneSoulBuff)==false) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>(1.5 + 2))))) then if ((aura_env.config[tostring(v25.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v21("Shifting Power");elseif (aura_env.config[tostring(v25.ShiftingPower)]~=true) then v20("Shifting Power");return true;end end if (v3(v25.ArcaneMissiles) and (v32==(0 + 0)) and v11(v25.ClearcastingBuff) and v11(v25.ArcaneSoulBuff) and (v5("player",v25.ArcaneSoulBuff)>(max(1.5/((2 -1) + ((0.01 -0) * UnitSpellHaste("player"))) ,114.75 -(4 + 110) ) * ((588 -(57 + 527)) -((v11(v25.ClearcastingBuff) and (1428 -(41 + 1386))) or (103 -(17 + 86))))))) then local v62=0 + 0 ;while true do if ((0 -0)==v62) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBarrage) and (v11(v25.ArcaneSoulBuff))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and ((v11(v25.ArcaneTempoBuff) and (v5("player",v25.ArcaneTempoBuff)<max(1.5/((2 -1) + ((166.01 -(122 + 44)) * UnitSpellHaste("player"))) ,0.75 -0 ))) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)<max((3.5 -2)/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,0.75))))) then local v63=0;while true do if ((0 + 0)==v63) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.OrbBarrageTalent) and (v34>1) and (v9(v25.ArcaneHarmonyBuff)>=18) and (((v34>(5 -2)) and (IsPlayerSpell(v25.ResonanceTalent) or IsPlayerSpell(v25.HighVoltageTalent))) or (v32==(65 -(30 + 35))) or (v32==(1 + 0)) or ((v32==2) and (v9(v25.ClearcastingBuff)==3)))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneMissiles) and v11(v25.ClearcastingBuff) and (v27>=(1261 -(1043 + 214))) and v11(v25.AetherAttunementBuff) and (v7(v25.TouchOfTheMagi)<(max((3.5 -2)/((1213 -(323 + 889)) + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75) * ((583 -(361 + 219)) -((321.5 -(53 + 267)) * (((v34>3) and ( not IsPlayerSpell(v25.TimeLoopTalent) or IsPlayerSpell(v25.ResonanceTalent)) and (1 + 0)) or (413 -(15 + 398)))))))) then local v64=982 -(18 + 964) ;while true do if (v64==(0 -0)) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBlast) and ((aura_env.NeedArcaneBlastSpark and ((v6("target",v25.TouchOfTheMagiDebuff)<((C_Spell.GetSpellInfo(v25.ArcaneBlast).castTime/(579 + 421)) + max((1.5 + 0)/((851 -(20 + 830)) + ((0.01 + 0) * UnitSpellHaste("player"))) ,126.75 -(116 + 10) ))) or (v34<=1) or IsPlayerSpell(v25.LeydrinkerTalent))) or v11(v25.LeydrinkerBuff)) and (v28==(1 + 3)) and ((v32>0) or (v9(v25.ClearcastingBuff)==(738 -(542 + 196))))) then local v65=0;while true do if (v65==0) then v20("Arcane Blast");return true;end end end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.HighVoltageTalent) and (v34>1) and (v28==(8 -4)) and v11(v25.ClearcastingBuff) and (v32==(1 + 0))) then local v66=0;while true do if (v66==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34>(1 + 0)) and IsPlayerSpell(v25.HighVoltageTalent) and (v28==4) and v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff) and (v11(v25.GloriousIncandescenceBuff)==false) and (v11(v25.IntuitionBuff)==false)) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v34>(1 + 1)) and IsPlayerSpell(v25.OrbBarrageTalent) and IsPlayerSpell(v25.HighVoltageTalent) and  not aura_env.NeedArcaneBlastSpark and (v28==(10 -6)) and (((UnitHealth("target")/UnitHealthMax("target")) * 100)<35) and IsPlayerSpell(v25.ArcaneBombardmentTalent) and ((v32>(0 -0)) or ((v32==0) and (v9(v25.ClearcastingBuff)==0)))) then local v67=1551 -(1126 + 425) ;while true do if (v67==(405 -(118 + 287))) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and ((v34>(7 -5)) or ((v34>(1122 -(118 + 1003))) and (((UnitHealth("target")/UnitHealthMax("target")) * (292 -192))<35) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and (v7(v25.ArcaneOrb)<max((378.5 -(142 + 235))/((4 -3) + ((0.01 + 0) * UnitSpellHaste("player"))) ,977.75 -(553 + 424) )) and (v28==(7 -3)) and (v7(v25.TouchOfTheMagi)>(max(1.5/(1 + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75) * (6 + 0))) and ( not aura_env.NeedArcaneBlastSpark or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v32>(0 + 0)) and (IsPlayerSpell(v25.HighVoltageTalent) or (v32==2) or ((v32==(1 + 0)) and  not v11(v25.ClearcastingBuff)))) then local v68=0 + 0 ;while true do if (v68==(0 -0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and v11(v25.ClearcastingBuff) and ((IsPlayerSpell(v25.HighVoltageTalent) and (v28<4)) or (v32==(0 -0)) or ((v9(v25.ClearcastingBuff)==(6 -3)) and ( not IsPlayerSpell(v25.HighVoltageTalent) or (v34<=(1 + 0)))))) then v20("Arcane Missiles");return true;end if (v3(v25.ArcaneBarrage) and (v28==4) and (v34>(4 -3)) and (v34<(758 -(239 + 514))) and v11(v25.BurdenOfPowerBuff) and ((IsPlayerSpell(v25.HighVoltageTalent) and v11(v25.ClearcastingBuff)) or v11(v25.GloriousIncandescenceBuff) or v11(v25.IntuitionBuff) or (v7(v25.ArcaneOrb)<max((1.5 + 0)/((1330 -(797 + 532)) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 + 0 )) or (C_Spell.GetSpellCharges(v25.ArcaneOrb).currentCharges>(0 -0))) and ( not IsPlayerSpell(v25.ConsortiumsBaubleTalent) or IsPlayerSpell(v25.HighVoltageTalent))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneOrb) and (v28<(1205 -(373 + 829)))) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then local v80=0;while true do if ((731 -(476 + 255))==v80) then v20("Arcane Orb");return true;end end end end if (v3(v25.ArcaneBarrage) and ((v11(v25.GloriousIncandescenceBuff) and ((v7(v25.TouchOfTheMagi)>6) or  not IsPlayerSpell(v25.MagisSparkTalent))) or v11(v25.IntuitionBuff))) then local v69=0;while true do if (0==v69) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneExplosion) and WeakAuras.CheckRange("target",1140 -(369 + 761) ,"<=") and (v28<(2 + 0)) and (v34>(1 -0))) then v20("Arcane Explosion");return true;end if v3(v25.ArcaneBlast) then local v70=0 -0 ;while true do if (v70==0) then v20("Arcane Blast");return true;end end end if v3(v25.ArcaneBarrage) then local v71=0;while true do if (v71==0) then v20("Arcane Barrage");return true;end end end end;if (v3(v25.ArcaneBarrage) and (v18(298 -(64 + 174) ,v35)<(1 + 1))) then local v50=0 -0 ;while true do if (v50==(336 -(144 + 192))) then v20("Arcane Barrage");return true;end end end if v41() then return true;end if IsPlayerSpell(v25.SpellfireSpheresTalent) then if v43() then return true;end end if  not IsPlayerSpell(v25.SpellfireSpheresTalent) then if v42() then return true;end end if v3(v25.ArcaneBarrage) then local v51=0;while true do if (v51==(216 -(42 + 174))) then v20("Arcane Barrage");return true;end end end v20("Clear");end;