function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.FullGCD;local v24=aura_env.TalentRank;local v25=aura_env.ids;aura_env.OutOfRange=false;local v27=WeakAuras.GetNumSetItemsEquipped(816 + 1056 );local v28=UnitPower("player",Enum.PowerType.ArcaneCharges);local v29=UnitPowerMax("player",Enum.PowerType.ArcaneCharges);local v30=UnitPower("player",Enum.PowerType.Mana);local v31=UnitPowerMax("player",Enum.PowerType.Mana);local v32=v9(v25.NetherPrecisionBuff);local v33=select(9,UnitCastingInfo("player"));if (v33~=nil) then if (v33==v25.ArcaneBlast) then v28=min(18 -14 ,v28 + 1 + 0 );v32=max(0 -0 ,v32-(1748 -(760 + 987)) );end end local v34=1913 -(1789 + 124) ;local v35=806 -(745 + 21) ;for v44=1 + 0 ,110 -70  do local v45=0;local v46;while true do if (v45==0) then v46="nameplate"   .. v44 ;if (UnitExists(v46) and  not UnitIsFriend("player",v46) and WeakAuras.CheckRange(v46,v35,"<=") and (UnitAffectingCombat(v46) or aura_env.config['BypassCombatRequirement'])) then v34=v34 + 1 ;end break;end end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v34);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then local v77=0 -0 ;while true do if (v77==1) then v21("Clear",nil);return;end if (v77==(0 + 0)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",ExtraGlows);v20("Clear",nil);v77=1;end end end end local v36={};WeakAuras.ScanEvents("K_TRIGED_EXTRA",v36,nil);local v37={};v37.AoeTargetCount=2 + 0 ;if  not IsPlayerSpell(v25.ArcingCleaveTalent) then v37.AoeTargetCount=1064 -(87 + 968) ;end if ( not v12(v25.TouchOfTheMagiDebuff) and (v7(v25.TouchOfTheMagi)==(0 -0))) then v37.Opener=true;else aura_env.UsedOrb=false;aura_env.UsedMissiles=false;aura_env.UsedBarrage=false;v37.Opener=false;end v37.AoeList=aura_env.config['AoeList'];local v41=function() local v47=0 + 0 ;while true do if (v47==(6 -3)) then if (v4(v25.ArcaneSurge) and (v7(v25.TouchOfTheMagi)<(max(C_Spell.GetSpellInfo(v25.ArcaneSurge).castTime/(2413 -(447 + 966)) ,WeakAuras.gcdDuration()) + (max((2.5 -1)/((1818 -(1703 + 114)) + (0.01 * UnitSpellHaste("player"))) ,701.75 -(376 + 325) ) * (((v28==(5 -1)) and (2 -1)) or (0 + 0)))))) then if ((aura_env.config[tostring(v25.ArcaneSurge)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Surge");elseif (aura_env.config[tostring(v25.ArcaneSurge)]~=true) then v20("Arcane Surge");return true;end end break;end if (v47==(0 -0)) then if (v3(v25.TouchOfTheMagi) and ((((aura_env.PrevCast==v25.ArcaneBarrage) or v8(v25.ArcaneBarrage)) and (v11(v25.ArcaneSurgeBuff) or (v7(v25.ArcaneSurge)>30))) or (((aura_env.PrevCast==v25.ArcaneSurge) or v8(v25.ArcaneSurge)) and ((v28<(18 -(9 + 5))) or (v32==(376 -(85 + 291))))) or ((v7(v25.ArcaneSurge)>(1295 -(243 + 1022))) and v3(v25.TouchOfTheMagi) and (v28<4) and  not ((aura_env.PrevCast==v25.ArcaneBarrage) or v8(v25.ArcaneBarrage))))) then if ((aura_env.config[tostring(v25.TouchOfTheMagi)]==true) and aura_env.FlagKTrigCD) then v21("Touch Of The Magi");elseif (aura_env.config[tostring(v25.TouchOfTheMagi)]~=true) then local v84=0 -0 ;while true do if (v84==0) then v20("Touch Of The Magi");return true;end end end end if (v3(v25.ArcaneBlast) and (v11(v25.PresenceOfMind))) then v20("Arcane Blast");return true;end v47=1 + 0 ;end if (v47==(1182 -(1123 + 57))) then if (v3(v25.Evocation) and (v7(v25.ArcaneSurge)<(max((1.5 + 0)/(1 + (0.01 * UnitSpellHaste("player"))) ,254.75 -(163 + 91) ) * (1933 -(1869 + 61)))) and (v7(v25.TouchOfTheMagi)<(max((1.5 + 0)/((3 -2) + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 + 0 ) * (6 -1)))) then if ((aura_env.config[tostring(v25.Evocation)]==true) and aura_env.FlagKTrigCD) then v21("Evocation");elseif (aura_env.config[tostring(v25.Evocation)]~=true) then local v85=0 + 0 ;while true do if (v85==(1474 -(1329 + 145))) then v20("Evocation");return true;end end end end if (v3(v25.ArcaneMissiles) and  not aura_env.UsedMissiles and ((aura_env.PrevCast==v25.Evocation) or v8(v25.Evocation) or (aura_env.PrevCast==v25.ArcaneSurge) or v8(v25.ArcaneSurge) or v37.Opener) and (v32==0) and ( not v11(v25.AetherAttunementBuff) or (v27>=(975 -(140 + 831))))) then v20("Arcane Missiles");return true;end v47=1853 -(1409 + 441) ;end if (v47==(719 -(15 + 703))) then if (v3(v25.ArcaneOrb) and IsPlayerSpell(v25.HighVoltageTalent) and v37.Opener and  not aura_env.UsedOrb) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then local v86=0 + 0 ;while true do if (v86==0) then v20("Arcane Orb");return true;end end end end if (v3(v25.ArcaneBarrage) and v37.Opener and  not aura_env.UsedBarrage and v11(v25.ArcaneTempoBuff) and v3(v25.Evocation) and (v5("player",v25.ArcaneTempoBuff)<(max((439.5 -(262 + 176))/((1722 -(345 + 1376)) + (0.01 * UnitSpellHaste("player"))) ,0.75) * 5))) then local v78=688 -(198 + 490) ;while true do if (v78==(0 -0)) then v20("Arcane Barrage");return true;end end end v47=4 -2 ;end end end;local v42=function() if (v3(v25.ShiftingPower) and (((((C_Spell.GetSpellCharges(v25.ArcaneOrb).currentCharges==((IsPlayerSpell(v25.ChargedOrbTalent) and (1207 -(696 + 510))) or (0 -0))) and v7(v25.ArcaneOrb)) or (v7(v25.TouchOfTheMagi)<23)) and (v11(v25.ArcaneSurgeBuff)==false) and (v11(v25.SiphonStormBuff)==false) and (v12(v25.TouchOfTheMagiDebuff)==false) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>3.5))) and (v7(v25.TouchOfTheMagi)>((1274 -(1091 + 171)) + (6 * max(1.5/(1 + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75))))) or (((aura_env.PrevCast==v25.ArcaneBarrage) or v8(v25.ArcaneBarrage)) and IsPlayerSpell(v25.ShiftingShardsTalent) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>(9.5 -6)))) and (v11(v25.ArcaneSurgeBuff) or v12(v25.TouchOfTheMagiDebuff) or (v7(v25.Evocation)<20)))) and (v18(198 -138 ,v35)>(384 -(123 + 251))) and ((v5("player",v25.ArcaneTempoBuff)>(max(1.5/((4 -3) + (0.01 * UnitSpellHaste("player"))) ,0.75) * 2.5)) or (v11(v25.ArcaneTempoBuff)==false))) then if ((aura_env.config[tostring(v25.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v21("Shifting Power");elseif (aura_env.config[tostring(v25.ShiftingPower)]~=true) then local v79=698 -(208 + 490) ;while true do if (v79==0) then v20("Shifting Power");return true;end end end end if (v3(v25.Supernova) and (v6("target",v25.TouchOfTheMagiDebuff)<=max((1.5 + 0)/(1 + 0 + ((836.01 -(660 + 176)) * UnitSpellHaste("player"))) ,0.75 + 0 )) and (v9(v25.UnerringProficiencyBuff)==(232 -(14 + 188)))) then if ((aura_env.config[tostring(v25.Supernova)]==true) and aura_env.FlagKTrigCD) then v21("Supernova");elseif (aura_env.config[tostring(v25.Supernova)]~=true) then local v80=0;while true do if (v80==0) then v20("Supernova");return true;end end end end if (v3(v25.ArcaneBarrage) and ((v11(v25.ArcaneTempoBuff) and (v5("player",v25.ArcaneTempoBuff)<(max((676.5 -(534 + 141))/(1 + 0 + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 + 0 ) + (max((1.5 -0)/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75) * (2 -0) * (((v32==(2 -1)) and (1 + 0)) or (0 + 0)))))) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)<max((397.5 -(115 + 281))/((2 -1) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 -0 ))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v9(v25.ArcaneHarmonyBuff)>=(18 -((21 -15) * ((IsPlayerSpell(v25.HighVoltageTalent) and 1) or 0)))) and ((v32==0) or (v32==1) or ((v34>3) and v11(v25.ClearcastingBuff) and IsPlayerSpell(v25.HighVoltageTalent)))) then local v56=867 -(550 + 317) ;while true do if (v56==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and v11(v25.AetherAttunementBuff) and (v7(v25.TouchOfTheMagi)<(max((1.5 -0)/((1 -0) + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75) * 3)) and v11(v25.ClearcastingBuff) and (v27>=(289 -(134 + 151)))) then local v57=1665 -(970 + 695) ;while true do if (v57==0) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.HighVoltageTalent) and IsPlayerSpell(v25.OrbBarrageTalent) and (v28>(1 -0)) and v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff) and ((v32==1) or ((v32>0) and (v34>(1991 -(582 + 1408)))) or (((v32>(0 -0)) or ((v9(v25.ClearcastingBuff)<(3 -0)) and  not v11(v25.IntuitionBuff))) and (v34>(11 -8))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneMissiles) and ((v11(v25.ClearcastingBuff) and (v32==(1824 -(1195 + 629))) and (((v7(v25.TouchOfTheMagi)>(max(1.5/((1 -0) + (0.01 * UnitSpellHaste("player"))) ,241.75 -(187 + 54) ) * 7)) and (v7(v25.ArcaneSurge)>(max((781.5 -(162 + 618))/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,0.75 + 0 ) * 7))) or (v9(v25.ClearcastingBuff)>(1 -0)) or  not IsPlayerSpell(v25.MagisSparkTalent) or ((v7(v25.TouchOfTheMagi)<(max((1.5 -0)/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,1636.75 -(1373 + 263) ) * 4)) and (v9(v25.AetherAttunementBuff)==0)) or (v27>=(1004 -(451 + 549))))) or ((v18(60,v35)<5) and v11(v25.ClearcastingBuff)))) then local v58=0 + 0 ;while true do if ((0 -0)==v58) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBlast) and ((aura_env.NeedArcaneBlastSpark and ((v6("target",v25.TouchOfTheMagiDebuff)<((C_Spell.GetSpellInfo(v25.ArcaneBlast).castTime/(1680 -680)) + max(1.5/((1385 -(746 + 638)) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75))) or (v34<=(1 -0)) or IsPlayerSpell(v25.LeydrinkerTalent))) or v11(v25.LeydrinkerBuff)) and (v28==(345 -(218 + 123))) and  not IsPlayerSpell(v25.ChargedOrbTalent) and (v34<(1584 -(1535 + 46)))) then v20("Arcane Blast");return true;end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.OrbBarrageTalent) and (v34>1) and ((aura_env.NeedArcaneBlastSpark==false) or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v28==(4 + 0)) and ((IsPlayerSpell(v25.HighVoltageTalent) and (v34>(1 + 1))) or (v7(v25.TouchOfTheMagi)>(max(1.5/((561 -(306 + 254)) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 -0 ) * (1473 -(899 + 568)))) or  not IsPlayerSpell(v25.MagisSparkTalent) or (IsPlayerSpell(v25.ChargedOrbTalent) and (v14(v25.ArcaneOrb)>(1.8 + 0))))) then local v59=0 -0 ;while true do if (v59==(603 -(268 + 335))) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34>1) and ((aura_env.NeedArcaneBlastSpark==false) or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v28==(294 -(60 + 230))) and ((v7(v25.ArcaneOrb)<max(1.5/((573 -(426 + 146)) + ((0.01 + 0) * UnitSpellHaste("player"))) ,1456.75 -(282 + 1174) )) or ((((UnitHealth("target")/UnitHealthMax("target")) * (911 -(569 + 242)))<(100 -65)) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and ((v32==(1 + 0)) or ((v32==(1024 -(706 + 318))) and IsPlayerSpell(v25.HighVoltageTalent)) or ((v32==(1253 -(721 + 530))) and (((UnitHealth("target")/UnitHealthMax("target")) * (1371 -(945 + 326)))<(87 -52)) and IsPlayerSpell(v25.ArcaneBombardmentTalent) and IsPlayerSpell(v25.HighVoltageTalent))) and ((v7(v25.TouchOfTheMagi)>(max((1.5 + 0)/((701 -(271 + 429)) + ((0.01 + 0) * UnitSpellHaste("player"))) ,1500.75 -(1408 + 92) ) * (1092 -(461 + 625)))) or (IsPlayerSpell(v25.ChargedOrbTalent) and (v14(v25.ArcaneOrb)>1.8)))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneMissiles) and IsPlayerSpell(v25.HighVoltageTalent) and ((v9(v25.ClearcastingBuff)>(1289 -(993 + 295))) or (v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff))) and (v28<(1 + 2))) then local v60=1171 -(418 + 753) ;while true do if (v60==(0 + 0)) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneOrb) and (((v34<=1) and (v28<(1 + 2))) or (v28<(1 + 0)) or ((v28<(1 + 1)) and IsPlayerSpell(v25.HighVoltageTalent)))) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then local v81=529 -(406 + 123) ;while true do if (v81==(1769 -(1749 + 20))) then v20("Arcane Orb");return true;end end end end if (v3(v25.ArcaneBarrage) and (v11(v25.IntuitionBuff))) then local v61=0;while true do if (v61==(0 + 0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34<=1) and IsPlayerSpell(v25.HighVoltageTalent) and (v28==(1326 -(1249 + 73))) and v11(v25.ClearcastingBuff) and (v32==(1 + 0)) and (v11(v25.AetherAttunementBuff) or ((((UnitHealth("target")/UnitHealthMax("target")) * 100)<35) and IsPlayerSpell(v25.ArcaneBombardmentTalent)))) then local v62=1145 -(466 + 679) ;while true do if ((0 -0)==v62) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v7(v25.ArcaneOrb)<max((2.5 -1)/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75)) and (v28==(1904 -(106 + 1794))) and (v32==(0 + 0)) and IsPlayerSpell(v25.OrbBarrageTalent) and ((v7(v25.TouchOfTheMagi)>(max(1.5/(1 + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75) * (17 -11))) or  not IsPlayerSpell(v25.MagisSparkTalent))) then local v63=0;while true do if ((0 -0)==v63) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34<=1) and (IsPlayerSpell(v25.OrbBarrageTalent) or ((((UnitHealth("target")/UnitHealthMax("target")) * 100)<35) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and (v7(v25.ArcaneOrb)<max((115.5 -(4 + 110))/((585 -(57 + 527)) + (0.01 * UnitSpellHaste("player"))) ,0.75)) and (v28==(1431 -(41 + 1386))) and ((v7(v25.TouchOfTheMagi)>(max((104.5 -(17 + 86))/(1 + 0 + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 -0 ) * (172 -(122 + 44)))) or  not IsPlayerSpell(v25.MagisSparkTalent)) and ((v32==0) or ((v32==(1 -0)) and (v9(v25.ClearcastingBuff)==(0 -0))))) then local v64=0 + 0 ;while true do if (v64==(0 + 0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneExplosion) and WeakAuras.CheckRange("target",20 -10 ,"<=") and (v34>1) and (((v28<(66 -(30 + 35))) and  not IsPlayerSpell(v25.HighVoltageTalent)) or ((v28<(3 + 0)) and ((v9(v25.ClearcastingBuff)==(1257 -(1043 + 214))) or IsPlayerSpell(v25.ReverberateTalent))))) then local v65=0;while true do if (v65==(0 -0)) then v20("Arcane Explosion");return true;end end end if (v3(v25.ArcaneExplosion) and WeakAuras.CheckRange("target",1222 -(323 + 889) ,"<=") and (v34==1) and (v28<(5 -3)) and  not v11(v25.ClearcastingBuff) and (((v30/v31) * 100)>(590 -(361 + 219)))) then v20("Arcane Explosion");return true;end if (v3(v25.ArcaneBarrage) and (((((UnitHealth("target")/UnitHealthMax("target")) * (420 -(53 + 267)))<(8 + 27)) and (v6("target",v25.TouchOfTheMagiDebuff)<(max((414.5 -(15 + 398))/(1 + ((982.01 -(18 + 964)) * UnitSpellHaste("player"))) ,0.75 -0 ) * 1.25)) and (v6("target",v25.TouchOfTheMagiDebuff)>(0.75 + 0))) or ((v5("player",v25.ArcaneSurgeBuff)<max((1.5 + 0)/((851 -(20 + 830)) + (0.01 * UnitSpellHaste("player"))) ,0.75)) and v11(v25.ArcaneSurgeBuff))) and (v28==(4 + 0))) then v20("Arcane Barrage");return true;end if v3(v25.ArcaneBlast) then v20("Arcane Blast");return true;end if v3(v25.ArcaneBarrage) then local v66=126 -(116 + 10) ;while true do if (v66==(0 + 0)) then v20("Arcane Barrage");return true;end end end end;local v43=function() if (v3(v25.ShiftingPower) and (v11(v25.ArcaneSurgeBuff)==false) and (v11(v25.SiphonStormBuff)==false) and (v12(v25.TouchOfTheMagiDebuff)==false) and (v7(v25.Evocation)>(753 -(542 + 196))) and (v7(v25.TouchOfTheMagi)>10) and (v18(128 -68 ,v35)>(3 + 7)) and (v11(v25.ArcaneSoulBuff)==false) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>(2.5 + 1))))) then if ((aura_env.config[tostring(v25.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v21("Shifting Power");elseif (aura_env.config[tostring(v25.ShiftingPower)]~=true) then local v82=0 + 0 ;while true do if (v82==(0 -0)) then v20("Shifting Power");return true;end end end end if (v3(v25.ArcaneMissiles) and (v32==0) and v11(v25.ClearcastingBuff) and v11(v25.ArcaneSoulBuff) and (v5("player",v25.ArcaneSoulBuff)>(max(1.5/((2 -1) + (0.01 * UnitSpellHaste("player"))) ,1551.75 -(1126 + 425) ) * (4 -((v11(v25.ClearcastingBuff) and (406 -(118 + 287))) or (0 -0)))))) then local v67=1121 -(118 + 1003) ;while true do if (v67==(0 -0)) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBarrage) and (v11(v25.ArcaneSoulBuff))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and ((v11(v25.ArcaneTempoBuff) and (v5("player",v25.ArcaneTempoBuff)<max((378.5 -(142 + 235))/((4 -3) + ((0.01 + 0) * UnitSpellHaste("player"))) ,977.75 -(553 + 424) ))) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)<max((1.5 -0)/(1 + 0 + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 + 0 ))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.OrbBarrageTalent) and (v34>1) and (v9(v25.ArcaneHarmonyBuff)>=(8 + 10)) and (((v34>3) and (IsPlayerSpell(v25.ResonanceTalent) or IsPlayerSpell(v25.HighVoltageTalent))) or (v32==0) or (v32==(1 + 0)) or ((v32==(4 -2)) and (v9(v25.ClearcastingBuff)==(7 -4))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneMissiles) and v11(v25.ClearcastingBuff) and (v27>=(8 -4)) and v11(v25.AetherAttunementBuff) and (v7(v25.TouchOfTheMagi)<(max((1.5 + 0)/((4 -3) + ((753.01 -(239 + 514)) * UnitSpellHaste("player"))) ,0.75 + 0 ) * (3 -((1330.5 -(797 + 532)) * ((v34>3) and ( not IsPlayerSpell(v25.TimeLoopTalent) or IsPlayerSpell(v25.ResonanceTalent)))))))) then local v68=0 + 0 ;while true do if (v68==(0 + 0)) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBlast) and ((aura_env.NeedArcaneBlastSpark and ((v6("target",v25.TouchOfTheMagiDebuff)<((C_Spell.GetSpellInfo(v25.ArcaneBlast).castTime/(2351 -1351)) + max(1.5/((1203 -(373 + 829)) + ((731.01 -(476 + 255)) * UnitSpellHaste("player"))) ,1130.75 -(369 + 761) ))) or (v34<=(1 + 0)) or IsPlayerSpell(v25.LeydrinkerTalent))) or v11(v25.LeydrinkerBuff)) and (v28==(6 -2)) and ((v32>0) or (v9(v25.ClearcastingBuff)==0))) then local v69=0 -0 ;while true do if (v69==(238 -(64 + 174))) then v20("Arcane Blast");return true;end end end if (v3(v25.ArcaneBarrage) and (v28==(1 + 3)) and (v3(v25.TouchOfTheMagi) or (v7(v25.TouchOfTheMagi)<min((0.75 -0) + 50 ,max(1.5/((337 -(144 + 192)) + ((216.01 -(42 + 174)) * UnitSpellHaste("player"))) ,0.75 + 0 ))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.HighVoltageTalent) and (v34>(1 + 0)) and (v28==(2 + 2)) and v11(v25.ClearcastingBuff) and (v32==(1505 -(363 + 1141)))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v34>(1581 -(1183 + 397))) and IsPlayerSpell(v25.HighVoltageTalent) and (v28==4) and v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff) and (v11(v25.GloriousIncandescenceBuff)==false) and (v11(v25.IntuitionBuff)==false)) then local v70=0;while true do if (v70==(0 -0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34>(2 + 0)) and IsPlayerSpell(v25.OrbBarrageTalent) and IsPlayerSpell(v25.HighVoltageTalent) and  not aura_env.NeedArcaneBlastSpark and (v28==(3 + 1)) and (((UnitHealth("target")/UnitHealthMax("target")) * 100)<(2010 -(1913 + 62))) and IsPlayerSpell(v25.ArcaneBombardmentTalent) and ((v32>0) or ((v32==0) and (v9(v25.ClearcastingBuff)==0)))) then local v71=0 + 0 ;while true do if (v71==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and ((v34>2) or ((v34>(2 -1)) and (((UnitHealth("target")/UnitHealthMax("target")) * 100)<(1968 -(565 + 1368))) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and (v7(v25.ArcaneOrb)<max((3.5 -2)/((1662 -(1477 + 184)) + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 + 0 )) and (v28==4) and (v7(v25.TouchOfTheMagi)>(max(1.5/((857 -(564 + 292)) + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 -0 ) * (310 -(244 + 60)))) and ( not aura_env.NeedArcaneBlastSpark or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v32>0) and (IsPlayerSpell(v25.HighVoltageTalent) or (v32==2) or ((v32==1) and  not v11(v25.ClearcastingBuff)))) then local v72=0 + 0 ;while true do if (v72==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and v11(v25.ClearcastingBuff) and ((IsPlayerSpell(v25.HighVoltageTalent) and (v28<(480 -(41 + 435)))) or (v32==(1001 -(938 + 63))) or ((v9(v25.ClearcastingBuff)==3) and ( not IsPlayerSpell(v25.HighVoltageTalent) or (v34<=1))))) then local v73=0 + 0 ;while true do if (v73==(1125 -(936 + 189))) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBarrage) and (v28==4) and (v34>(1 + 0)) and (v34<5) and v11(v25.BurdenOfPowerBuff) and ((IsPlayerSpell(v25.HighVoltageTalent) and v11(v25.ClearcastingBuff)) or v11(v25.GloriousIncandescenceBuff) or v11(v25.IntuitionBuff) or (v7(v25.ArcaneOrb)<max((1614.5 -(1565 + 48))/(1 + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75)) or (C_Spell.GetSpellCharges(v25.ArcaneOrb).currentCharges>(1138 -(782 + 356)))) and ( not IsPlayerSpell(v25.ConsortiumsBaubleTalent) or IsPlayerSpell(v25.HighVoltageTalent))) then local v74=0;while true do if (v74==(267 -(176 + 91))) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneOrb) and (v28<3)) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then local v83=0;while true do if (v83==(0 -0)) then v20("Arcane Orb");return true;end end end end if (v3(v25.ArcaneBarrage) and ((v11(v25.GloriousIncandescenceBuff) and ((v7(v25.TouchOfTheMagi)>(8 -2)) or  not IsPlayerSpell(v25.MagisSparkTalent))) or v11(v25.IntuitionBuff))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneExplosion) and (v28<(1094 -(975 + 117))) and (v34>(1876 -(157 + 1718)))) then local v75=0 + 0 ;while true do if (v75==(0 -0)) then v20("Arcane Explosion");return true;end end end if v3(v25.ArcaneBlast) then v20("Arcane Blast");return true;end if v3(v25.ArcaneBarrage) then local v76=0;while true do if (v76==(0 -0)) then v20("Arcane Barrage");return true;end end end end;if (v3(v25.ArcaneBarrage) and (v18(1078 -(697 + 321) ,v35)<2)) then local v54=0;while true do if (v54==0) then v20("Arcane Barrage");return true;end end end if v41() then return true;end if IsPlayerSpell(v25.SpellfireSpheresTalent) then if v43() then return true;end end if  not IsPlayerSpell(v25.SpellfireSpheresTalent) then if v42() then return true;end end if v3(v25.ArcaneBarrage) then local v55=0 -0 ;while true do if (v55==(0 -0)) then v20("Arcane Barrage");return true;end end end v20("Clear");end;