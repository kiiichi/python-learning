function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.FullGCD;local v24=aura_env.TalentRank;local v25=aura_env.ids;aura_env.OutOfRange=false;local v27=WeakAuras.GetNumSetItemsEquipped(2663 -(368 + 423) );local v28=UnitPower("player",Enum.PowerType.ArcaneCharges);local v29=UnitPowerMax("player",Enum.PowerType.ArcaneCharges);local v30=UnitPower("player",Enum.PowerType.Mana);local v31=UnitPowerMax("player",Enum.PowerType.Mana);local v32=v9(v25.NetherPrecisionBuff);local v33=select(28 -19 ,UnitCastingInfo("player"));if (v33~=nil) then if (v33==v25.ArcaneBlast) then local v69=18 -(10 + 8) ;while true do if (v69==0) then v28=min(4,v28 + (3 -2) );v32=max(0,v32-(443 -(416 + 26)) );break;end end end end local v34=0 -0 ;local v35=18 + 22 ;for v44=1,70 -30  do local v45="nameplate"   .. v44 ;if (UnitExists(v45) and  not UnitIsFriend("player",v45) and WeakAuras.CheckRange(v45,v35,"<=") and (UnitAffectingCombat(v45) or aura_env.config['BypassCombatRequirement'])) then v34=v34 + (439 -(145 + 293)) ;end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v34);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",ExtraGlows);v20("Clear",nil);v21("Clear",nil);return;end end local v36={};WeakAuras.ScanEvents("K_TRIGED_EXTRA",v36,nil);local v37={};v37.AoeTargetCount=432 -(44 + 386) ;if  not IsPlayerSpell(v25.ArcingCleaveTalent) then v37.AoeTargetCount=1495 -(998 + 488) ;end if ( not v12(v25.TouchOfTheMagiDebuff) and (v7(v25.TouchOfTheMagi)==0)) then v37.Opener=true;else local v49=0 + 0 ;while true do if (v49==(1 + 0)) then aura_env.UsedBarrage=false;v37.Opener=false;break;end if (v49==(772 -(201 + 571))) then aura_env.UsedOrb=false;aura_env.UsedMissiles=false;v49=1139 -(116 + 1022) ;end end end v37.AoeList=aura_env.config['AoeList'];local v41=function() local v46=0 -0 ;while true do if (v46==(1 + 0)) then if (v3(v25.ArcaneOrb) and IsPlayerSpell(v25.HighVoltageTalent) and v37.Opener and  not aura_env.UsedOrb) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then local v80=0 -0 ;while true do if (v80==(0 -0)) then v20("Arcane Orb");return true;end end end end if (v3(v25.ArcaneBarrage) and v37.Opener and  not aura_env.UsedBarrage and v11(v25.ArcaneTempoBuff) and v3(v25.Evocation) and (v5("player",v25.ArcaneTempoBuff)<(max((860.5 -(814 + 45))/((2 -1) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 + 0 ) * (890 -(261 + 624))))) then local v74=0;while true do if (v74==0) then v20("Arcane Barrage");return true;end end end v46=3 -1 ;end if (v46==3) then if (v4(v25.ArcaneSurge) and (v7(v25.TouchOfTheMagi)<(max(C_Spell.GetSpellInfo(v25.ArcaneSurge).castTime/(2080 -(1020 + 60)) ,WeakAuras.gcdDuration()) + (max((1424.5 -(630 + 793))/((3 -2) + (0.01 * UnitSpellHaste("player"))) ,0.75) * (((v28==(18 -14)) and (1 + 0)) or 0))))) then if ((aura_env.config[tostring(v25.ArcaneSurge)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Surge");elseif (aura_env.config[tostring(v25.ArcaneSurge)]~=true) then v20("Arcane Surge");return true;end end break;end if (v46==(0 -0)) then if (v3(v25.TouchOfTheMagi) and ((((aura_env.PrevCast==v25.ArcaneBarrage) or v8(v25.ArcaneBarrage)) and (v11(v25.ArcaneSurgeBuff) or (v7(v25.ArcaneSurge)>(1777 -(760 + 987))))) or (((aura_env.PrevCast==v25.ArcaneSurge) or v8(v25.ArcaneSurge)) and ((v28<(1917 -(1789 + 124))) or (v32==0))) or ((v7(v25.ArcaneSurge)>(796 -(745 + 21))) and v3(v25.TouchOfTheMagi) and (v28<4) and  not ((aura_env.PrevCast==v25.ArcaneBarrage) or v8(v25.ArcaneBarrage))))) then if ((aura_env.config[tostring(v25.TouchOfTheMagi)]==true) and aura_env.FlagKTrigCD) then v21("Touch Of The Magi");elseif (aura_env.config[tostring(v25.TouchOfTheMagi)]~=true) then v20("Touch Of The Magi");return true;end end if (v3(v25.ArcaneBlast) and (v11(v25.PresenceOfMind))) then local v75=0 + 0 ;while true do if (v75==(0 -0)) then v20("Arcane Blast");return true;end end end v46=3 -2 ;end if (v46==2) then if (v3(v25.Evocation) and (v7(v25.ArcaneSurge)<(max((1.5 + 0)/(1 + 0 + ((1055.01 -(87 + 968)) * UnitSpellHaste("player"))) ,0.75 -0 ) * (3 + 0))) and (v7(v25.TouchOfTheMagi)<(max((2.5 -1)/((1414 -(447 + 966)) + (0.01 * UnitSpellHaste("player"))) ,0.75 -0 ) * (1822 -(1703 + 114))))) then if ((aura_env.config[tostring(v25.Evocation)]==true) and aura_env.FlagKTrigCD) then v21("Evocation");elseif (aura_env.config[tostring(v25.Evocation)]~=true) then local v81=0;while true do if (v81==0) then v20("Evocation");return true;end end end end if (v3(v25.ArcaneMissiles) and  not aura_env.UsedMissiles and ((aura_env.PrevCast==v25.Evocation) or v8(v25.Evocation) or (aura_env.PrevCast==v25.ArcaneSurge) or v8(v25.ArcaneSurge) or v37.Opener) and (v32==0) and ( not v11(v25.AetherAttunementBuff) or (v27>=4))) then local v76=0;while true do if ((701 -(376 + 325))==v76) then v20("Arcane Missiles");return true;end end end v46=4 -1 ;end end end;local v42=function() if (v3(v25.ShiftingPower) and (((((C_Spell.GetSpellCharges(v25.ArcaneOrb).currentCharges==((IsPlayerSpell(v25.ChargedOrbTalent) and 1) or (0 -0))) and v7(v25.ArcaneOrb)) or (v7(v25.TouchOfTheMagi)<23)) and (v11(v25.ArcaneSurgeBuff)==false) and (v11(v25.SiphonStormBuff)==false) and (v12(v25.TouchOfTheMagiDebuff)==false) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>(1.5 + 2)))) and (v7(v25.TouchOfTheMagi)>(12 + ((12 -6) * max(1.5/((15 -(9 + 5)) + ((376.01 -(85 + 291)) * UnitSpellHaste("player"))) ,0.75))))) or (((aura_env.PrevCast==v25.ArcaneBarrage) or v8(v25.ArcaneBarrage)) and IsPlayerSpell(v25.ShiftingShardsTalent) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>(1268.5 -(243 + 1022))))) and (v11(v25.ArcaneSurgeBuff) or v12(v25.TouchOfTheMagiDebuff) or (v7(v25.Evocation)<(76 -56))))) and (v18(50 + 10 ,v35)>(1190 -(1123 + 57))) and ((v5("player",v25.ArcaneTempoBuff)>(max(1.5/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,254.75 -(163 + 91) ) * 2.5)) or (v11(v25.ArcaneTempoBuff)==false))) then if ((aura_env.config[tostring(v25.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v21("Shifting Power");elseif (aura_env.config[tostring(v25.ShiftingPower)]~=true) then v20("Shifting Power");return true;end end if (v3(v25.Supernova) and (v6("target",v25.TouchOfTheMagiDebuff)<=max(1.5/((1931 -(1869 + 61)) + (0.01 * UnitSpellHaste("player"))) ,0.75 + 0 )) and (v9(v25.UnerringProficiencyBuff)==30)) then if ((aura_env.config[tostring(v25.Supernova)]==true) and aura_env.FlagKTrigCD) then v21("Supernova");elseif (aura_env.config[tostring(v25.Supernova)]~=true) then local v77=0 -0 ;while true do if (v77==(0 -0)) then v20("Supernova");return true;end end end end if (v3(v25.ArcaneBarrage) and ((v11(v25.ArcaneTempoBuff) and (v5("player",v25.ArcaneTempoBuff)<(max((1.5 + 0)/(1 + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 + 0 ) + (max((1475.5 -(1329 + 145))/(1 + (0.01 * UnitSpellHaste("player"))) ,971.75 -(140 + 831) ) * (1852 -(1409 + 441)) * (((v32==(719 -(15 + 703))) and 1) or (0 + 0)))))) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)<max((439.5 -(262 + 176))/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75))))) then local v51=0;while true do if (v51==(1721 -(345 + 1376))) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v9(v25.ArcaneHarmonyBuff)>=((706 -(198 + 490)) -((26 -20) * ((IsPlayerSpell(v25.HighVoltageTalent) and 1) or (0 -0))))) and ((v32==(1206 -(696 + 510))) or (v32==1) or ((v34>(5 -2)) and v11(v25.ClearcastingBuff) and IsPlayerSpell(v25.HighVoltageTalent)))) then local v52=1262 -(1091 + 171) ;while true do if (v52==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and v11(v25.AetherAttunementBuff) and (v7(v25.TouchOfTheMagi)<(max((1.5 + 0)/((3 -2) + (0.01 * UnitSpellHaste("player"))) ,0.75 -0 ) * (377 -(123 + 251)))) and v11(v25.ClearcastingBuff) and (v27>=(19 -15))) then local v53=698 -(208 + 490) ;while true do if (v53==0) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBarrage) and (v3(v25.TouchOfTheMagi) or (v7(v25.TouchOfTheMagi)<min(0.75 + 0 + 23 + 27 ,max(1.5/((837 -(660 + 176)) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75))))) then local v54=202 -(14 + 188) ;while true do if (v54==(675 -(534 + 141))) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.HighVoltageTalent) and IsPlayerSpell(v25.OrbBarrageTalent) and (v28>(1 + 0)) and v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff) and ((v32==(1 + 0)) or ((v32>0) and (v34>1)) or (((v32>(0 + 0)) or ((v9(v25.ClearcastingBuff)<(6 -3)) and  not v11(v25.IntuitionBuff))) and (v34>(4 -1))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneMissiles) and ((v11(v25.ClearcastingBuff) and (v32==(0 -0)) and (((v7(v25.TouchOfTheMagi)>(max(1.5/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75) * 7)) and (v7(v25.ArcaneSurge)>(max((1.5 + 0)/(1 + 0 + ((396.01 -(115 + 281)) * UnitSpellHaste("player"))) ,0.75) * (15 -8)))) or (v9(v25.ClearcastingBuff)>(1 + 0)) or  not IsPlayerSpell(v25.MagisSparkTalent) or ((v7(v25.TouchOfTheMagi)<(max((2.5 -1)/((3 -2) + (0.01 * UnitSpellHaste("player"))) ,0.75) * 4)) and (v9(v25.AetherAttunementBuff)==(867 -(550 + 317)))) or (v27>=(5 -1)))) or ((v18(60,v35)<(7 -2)) and v11(v25.ClearcastingBuff)))) then v20("Arcane Missiles");return true;end if (v3(v25.ArcaneBlast) and ((aura_env.NeedArcaneBlastSpark and ((v6("target",v25.TouchOfTheMagiDebuff)<((C_Spell.GetSpellInfo(v25.ArcaneBlast).castTime/(2794 -1794)) + max((286.5 -(134 + 151))/((1666 -(970 + 695)) + ((0.01 -0) * UnitSpellHaste("player"))) ,1990.75 -(582 + 1408) ))) or (v34<=(3 -2)) or IsPlayerSpell(v25.LeydrinkerTalent))) or v11(v25.LeydrinkerBuff)) and (v28==4) and  not IsPlayerSpell(v25.ChargedOrbTalent) and (v34<(3 -0))) then local v55=0 -0 ;while true do if (v55==0) then v20("Arcane Blast");return true;end end end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.OrbBarrageTalent) and (v34>(1825 -(1195 + 629))) and ((aura_env.NeedArcaneBlastSpark==false) or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v28==4) and ((IsPlayerSpell(v25.HighVoltageTalent) and (v34>(2 -0))) or (v7(v25.TouchOfTheMagi)>(max(1.5/((242 -(187 + 54)) + ((780.01 -(162 + 618)) * UnitSpellHaste("player"))) ,0.75 + 0 ) * (4 + 2))) or  not IsPlayerSpell(v25.MagisSparkTalent) or (IsPlayerSpell(v25.ChargedOrbTalent) and (v14(v25.ArcaneOrb)>(1.8 -0))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v34>(1 -0)) and ((aura_env.NeedArcaneBlastSpark==false) or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v28==4) and ((v7(v25.ArcaneOrb)<max((1.5 + 0)/((1637 -(1373 + 263)) + ((1000.01 -(451 + 549)) * UnitSpellHaste("player"))) ,0.75 + 0 )) or ((((UnitHealth("target")/UnitHealthMax("target")) * 100)<35) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and ((v32==1) or ((v32==(0 -0)) and IsPlayerSpell(v25.HighVoltageTalent)) or ((v32==2) and (((UnitHealth("target")/UnitHealthMax("target")) * (168 -68))<(1419 -(746 + 638))) and IsPlayerSpell(v25.ArcaneBombardmentTalent) and IsPlayerSpell(v25.HighVoltageTalent))) and ((v7(v25.TouchOfTheMagi)>(max((1.5 + 0)/(1 + ((0.01 -0) * UnitSpellHaste("player"))) ,341.75 -(218 + 123) ) * 6)) or (IsPlayerSpell(v25.ChargedOrbTalent) and (v14(v25.ArcaneOrb)>1.8)))) then local v56=0;while true do if (v56==(1581 -(1535 + 46))) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and IsPlayerSpell(v25.HighVoltageTalent) and ((v9(v25.ClearcastingBuff)>(1 + 0)) or (v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff))) and (v28<(1 + 2))) then local v57=560 -(306 + 254) ;while true do if (v57==(0 + 0)) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneOrb) and (((v34<=(1 -0)) and (v28<(1470 -(899 + 568)))) or (v28<(1 + 0)) or ((v28<2) and IsPlayerSpell(v25.HighVoltageTalent)))) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then local v78=0 -0 ;while true do if (v78==(603 -(268 + 335))) then v20("Arcane Orb");return true;end end end end if (v3(v25.ArcaneBarrage) and (v11(v25.IntuitionBuff))) then local v58=290 -(60 + 230) ;while true do if (v58==(572 -(426 + 146))) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34<=(1 + 0)) and IsPlayerSpell(v25.HighVoltageTalent) and (v28==(1460 -(282 + 1174))) and v11(v25.ClearcastingBuff) and (v32==(812 -(569 + 242))) and (v11(v25.AetherAttunementBuff) or ((((UnitHealth("target")/UnitHealthMax("target")) * (288 -188))<(3 + 32)) and IsPlayerSpell(v25.ArcaneBombardmentTalent)))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v7(v25.ArcaneOrb)<max(1.5/((1025 -(706 + 318)) + (0.01 * UnitSpellHaste("player"))) ,1251.75 -(721 + 530) )) and (v28==4) and (v32==(1271 -(945 + 326))) and IsPlayerSpell(v25.OrbBarrageTalent) and ((v7(v25.TouchOfTheMagi)>(max((2.5 -1)/(1 + ((0.01 + 0) * UnitSpellHaste("player"))) ,700.75 -(271 + 429) ) * (6 + 0))) or  not IsPlayerSpell(v25.MagisSparkTalent))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v34<=(1501 -(1408 + 92))) and (IsPlayerSpell(v25.OrbBarrageTalent) or ((((UnitHealth("target")/UnitHealthMax("target")) * (1186 -(461 + 625)))<(1323 -(993 + 295))) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and (v7(v25.ArcaneOrb)<max((1.5 + 0)/(1 + (0.01 * UnitSpellHaste("player"))) ,1171.75 -(418 + 753) )) and (v28==(2 + 2)) and ((v7(v25.TouchOfTheMagi)>(max(1.5/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,0.75 + 0 ) * (2 + 4))) or  not IsPlayerSpell(v25.MagisSparkTalent)) and ((v32==(529 -(406 + 123))) or ((v32==(1770 -(1749 + 20))) and (v9(v25.ClearcastingBuff)==(0 + 0))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneExplosion) and (v34>1) and (((v28<1) and  not IsPlayerSpell(v25.HighVoltageTalent)) or ((v28<(1325 -(1249 + 73))) and ((v9(v25.ClearcastingBuff)==(0 + 0)) or IsPlayerSpell(v25.ReverberateTalent))))) then v20("Arcane Explosion");return true;end if (v3(v25.ArcaneExplosion) and (v34==1) and (v28<(1147 -(466 + 679))) and  not v11(v25.ClearcastingBuff) and (((v30/v31) * (240 -140))>(28 -18))) then v20("Arcane Explosion");return true;end if (v3(v25.ArcaneBarrage) and (((((UnitHealth("target")/UnitHealthMax("target")) * (2000 -(106 + 1794)))<35) and (v6("target",v25.TouchOfTheMagiDebuff)<(max(1.5/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,0.75 + 0 ) * 1.25)) and (v6("target",v25.TouchOfTheMagiDebuff)>(0.75 -0))) or ((v5("player",v25.ArcaneSurgeBuff)<max((2.5 -1)/((115 -(4 + 110)) + (0.01 * UnitSpellHaste("player"))) ,0.75)) and v11(v25.ArcaneSurgeBuff))) and (v28==(588 -(57 + 527)))) then local v59=1427 -(41 + 1386) ;while true do if (v59==(103 -(17 + 86))) then v20("Arcane Barrage");return true;end end end if v3(v25.ArcaneBlast) then v20("Arcane Blast");return true;end if v3(v25.ArcaneBarrage) then v20("Arcane Barrage");return true;end end;local v43=function() if (v3(v25.ShiftingPower) and (v11(v25.ArcaneSurgeBuff)==false) and (v11(v25.SiphonStormBuff)==false) and (v12(v25.TouchOfTheMagiDebuff)==false) and (v7(v25.Evocation)>(11 + 4)) and (v7(v25.TouchOfTheMagi)>(22 -12)) and (v18(60,v35)>(28 -18)) and (v11(v25.ArcaneSoulBuff)==false) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>(169.5 -(122 + 44)))))) then if ((aura_env.config[tostring(v25.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v21("Shifting Power");elseif (aura_env.config[tostring(v25.ShiftingPower)]~=true) then local v79=0 -0 ;while true do if (v79==(0 -0)) then v20("Shifting Power");return true;end end end end if (v3(v25.ArcaneMissiles) and (v32==0) and v11(v25.ClearcastingBuff) and v11(v25.ArcaneSoulBuff) and (v5("player",v25.ArcaneSoulBuff)>(max((1.5 + 0)/(1 + 0 + ((0.01 -0) * UnitSpellHaste("player"))) ,65.75 -(30 + 35) ) * (4 -((v11(v25.ClearcastingBuff) and 1) or 0))))) then local v60=0;while true do if (v60==(0 + 0)) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBarrage) and (v11(v25.ArcaneSoulBuff))) then local v61=0;while true do if (v61==(1257 -(1043 + 214))) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and ((v11(v25.ArcaneTempoBuff) and (v5("player",v25.ArcaneTempoBuff)<max((3.5 -2)/((1213 -(323 + 889)) + ((0.01 -0) * UnitSpellHaste("player"))) ,580.75 -(361 + 219) ))) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)<max((321.5 -(53 + 267))/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,0.75))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.OrbBarrageTalent) and (v34>1) and (v9(v25.ArcaneHarmonyBuff)>=(431 -(15 + 398))) and (((v34>(985 -(18 + 964))) and (IsPlayerSpell(v25.ResonanceTalent) or IsPlayerSpell(v25.HighVoltageTalent))) or (v32==(0 -0)) or (v32==(1 + 0)) or ((v32==(2 + 0)) and (v9(v25.ClearcastingBuff)==3)))) then local v62=850 -(20 + 830) ;while true do if (v62==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and v11(v25.ClearcastingBuff) and (v27>=(4 + 0)) and v11(v25.AetherAttunementBuff) and (v7(v25.TouchOfTheMagi)<(max((127.5 -(116 + 10))/(1 + 0 + ((738.01 -(542 + 196)) * UnitSpellHaste("player"))) ,0.75 -0 ) * ((1 + 2) -(1.5 * ((v34>(2 + 1)) and ( not IsPlayerSpell(v25.TimeLoopTalent) or IsPlayerSpell(v25.ResonanceTalent)))))))) then local v63=0 + 0 ;while true do if ((0 -0)==v63) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBlast) and ((aura_env.NeedArcaneBlastSpark and ((v6("target",v25.TouchOfTheMagiDebuff)<((C_Spell.GetSpellInfo(v25.ArcaneBlast).castTime/(2563 -1563)) + max((1552.5 -(1126 + 425))/((406 -(118 + 287)) + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75))) or (v34<=1) or IsPlayerSpell(v25.LeydrinkerTalent))) or v11(v25.LeydrinkerBuff)) and (v28==(1125 -(118 + 1003))) and ((v32>0) or (v9(v25.ClearcastingBuff)==0))) then local v64=0 -0 ;while true do if (v64==(377 -(142 + 235))) then v20("Arcane Blast");return true;end end end if (v3(v25.ArcaneBarrage) and (v28==(18 -14)) and (v3(v25.TouchOfTheMagi) or (v7(v25.TouchOfTheMagi)<min(0.75 + 0 + (1027 -(553 + 424)) ,max((1.5 -0)/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,0.75))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.HighVoltageTalent) and (v34>(1 + 0)) and (v28==(3 + 1)) and v11(v25.ClearcastingBuff) and (v32==1)) then local v65=0 + 0 ;while true do if (v65==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34>(1 + 0)) and IsPlayerSpell(v25.HighVoltageTalent) and (v28==(8 -4)) and v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff) and (v11(v25.GloriousIncandescenceBuff)==false) and (v11(v25.IntuitionBuff)==false)) then local v66=0 -0 ;while true do if (v66==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34>(4 -2)) and IsPlayerSpell(v25.OrbBarrageTalent) and IsPlayerSpell(v25.HighVoltageTalent) and  not aura_env.NeedArcaneBlastSpark and (v28==(2 + 2)) and (((UnitHealth("target")/UnitHealthMax("target")) * (483 -383))<(788 -(239 + 514))) and IsPlayerSpell(v25.ArcaneBombardmentTalent) and ((v32>0) or ((v32==(0 + 0)) and (v9(v25.ClearcastingBuff)==(1329 -(797 + 532)))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and ((v34>(2 + 0)) or ((v34>(1 + 0)) and (((UnitHealth("target")/UnitHealthMax("target")) * (235 -135))<(1237 -(373 + 829))) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and (v7(v25.ArcaneOrb)<max((732.5 -(476 + 255))/((1131 -(369 + 761)) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 -0 )) and (v28==(7 -3)) and (v7(v25.TouchOfTheMagi)>(max(1.5/(1 + (0.01 * UnitSpellHaste("player"))) ,238.75 -(64 + 174) ) * (1 + 5))) and ( not aura_env.NeedArcaneBlastSpark or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v32>0) and (IsPlayerSpell(v25.HighVoltageTalent) or (v32==(2 -0)) or ((v32==1) and  not v11(v25.ClearcastingBuff)))) then local v67=336 -(144 + 192) ;while true do if ((216 -(42 + 174))==v67) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and v11(v25.ClearcastingBuff) and ((IsPlayerSpell(v25.HighVoltageTalent) and (v28<(4 + 0))) or (v32==(0 + 0)) or ((v9(v25.ClearcastingBuff)==(2 + 1)) and ( not IsPlayerSpell(v25.HighVoltageTalent) or (v34<=(1505 -(363 + 1141))))))) then v20("Arcane Missiles");return true;end if (v3(v25.ArcaneBarrage) and (v28==(1584 -(1183 + 397))) and (v34>(2 -1)) and (v34<(4 + 1)) and v11(v25.BurdenOfPowerBuff) and ((IsPlayerSpell(v25.HighVoltageTalent) and v11(v25.ClearcastingBuff)) or v11(v25.GloriousIncandescenceBuff) or v11(v25.IntuitionBuff) or (v7(v25.ArcaneOrb)<max(1.5/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75 + 0 )) or (C_Spell.GetSpellCharges(v25.ArcaneOrb).currentCharges>(1975 -(1913 + 62)))) and ( not IsPlayerSpell(v25.ConsortiumsBaubleTalent) or IsPlayerSpell(v25.HighVoltageTalent))) then local v68=0;while true do if (v68==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneOrb) and (v28<(2 + 1))) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then v20("Arcane Orb");return true;end end if (v3(v25.ArcaneBarrage) and ((v11(v25.GloriousIncandescenceBuff) and ((v7(v25.TouchOfTheMagi)>6) or  not IsPlayerSpell(v25.MagisSparkTalent))) or v11(v25.IntuitionBuff))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneExplosion) and (v28<(5 -3)) and (v34>1)) then v20("Arcane Explosion");return true;end if v3(v25.ArcaneBlast) then v20("Arcane Blast");return true;end if v3(v25.ArcaneBarrage) then v20("Arcane Barrage");return true;end end;if (v3(v25.ArcaneBarrage) and (v18(1993 -(565 + 1368) ,v35)<(7 -5))) then v20("Arcane Barrage");return true;end if v41() then return true;end if IsPlayerSpell(v25.SpellfireSpheresTalent) then if v43() then return true;end end if  not IsPlayerSpell(v25.SpellfireSpheresTalent) then if v42() then return true;end end if v3(v25.ArcaneBarrage) then local v50=1661 -(1477 + 184) ;while true do if (v50==0) then v20("Arcane Barrage");return true;end end end v20("Clear");end;