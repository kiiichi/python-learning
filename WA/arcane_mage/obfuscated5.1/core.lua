function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.FullGCD;local v24=aura_env.TalentRank;local v25=aura_env.ids;aura_env.OutOfRange=false;local v27=WeakAuras.GetNumSetItemsEquipped(1872);local v28=UnitPower("player",Enum.PowerType.ArcaneCharges);local v29=UnitPowerMax("player",Enum.PowerType.ArcaneCharges);local v30=UnitPower("player",Enum.PowerType.Mana);local v31=UnitPowerMax("player",Enum.PowerType.Mana);local v32=v9(v25.NetherPrecisionBuff);local v33=select(28 -19 ,UnitCastingInfo("player"));if (v33~=nil) then if (v33==v25.ArcaneBlast) then v28=min(22 -(10 + 8) ,v28 + (3 -2) );v32=max(442 -(416 + 26) ,v32-1 );end end local v34=0 -0 ;local v35=40;for v44=1 + 0 ,70 -30  do local v45="nameplate"   .. v44 ;if (UnitExists(v45) and  not UnitIsFriend("player",v45) and WeakAuras.CheckRange(v45,v35,"<=") and (UnitAffectingCombat(v45) or aura_env.config['BypassCombatRequirement'])) then v34=v34 + (439 -(145 + 293)) ;end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v34);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then local v75=0;while true do if (v75==1) then v21("Clear",nil);return;end if (v75==(430 -(44 + 386))) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",ExtraGlows);v20("Clear",nil);v75=1487 -(998 + 488) ;end end end end local v36={};WeakAuras.ScanEvents("K_TRIGED_EXTRA",v36,nil);local v37={};v37.AoeTargetCount=1 + 1 ;if  not IsPlayerSpell(v25.ArcingCleaveTalent) then v37.AoeTargetCount=9;end if ( not v12(v25.TouchOfTheMagiDebuff) and (v7(v25.TouchOfTheMagi)==(0 + 0))) then v37.Opener=true;else aura_env.UsedOrb=false;aura_env.UsedMissiles=false;aura_env.UsedBarrage=false;v37.Opener=false;end v37.AoeList=aura_env.config['AoeList'];local v41=function() local v46=772 -(201 + 571) ;while true do if (v46==(1141 -(116 + 1022))) then if (v4(v25.ArcaneSurge) and ((v7(v25.TouchOfTheMagi)<(max(C_Spell.GetSpellInfo(v25.ArcaneSurge).castTime/(4163 -3163) ,WeakAuras.gcdDuration()) + (max((1.5 + 0)/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75 -0 ) * (((v28==(14 -10)) and 1) or (859 -(814 + 45)))))) or v12(v25.TouchOfTheMagiDebuff))) then if ((aura_env.config[tostring(v25.ArcaneSurge)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Surge");elseif (aura_env.config[tostring(v25.ArcaneSurge)]~=true) then local v81=0 -0 ;while true do if (v81==(0 + 0)) then v20("Arcane Surge");return true;end end end end break;end if (v46==(0 + 0)) then if (v3(v25.TouchOfTheMagi) and ((true and ((v5("player",v25.ArcaneSurgeBuff)>(890 -(261 + 624))) or v8(v25.ArcaneSurge) or (v7(v25.ArcaneSurge)>30))) or (((aura_env.PrevCast==v25.ArcaneSurge) or v8(v25.ArcaneSurge)) and ((v28<(6 -2)) or (v32==(1080 -(1020 + 60))))) or ((v7(v25.ArcaneSurge)>30) and v3(v25.TouchOfTheMagi) and (v28<4) and  not ((aura_env.PrevCast==v25.ArcaneBarrage) or v8(v25.ArcaneBarrage))))) then if ((aura_env.config[tostring(v25.TouchOfTheMagi)]==true) and aura_env.FlagKTrigCD) then v21("Touch Of The Magi");elseif (aura_env.config[tostring(v25.TouchOfTheMagi)]~=true) then v20("Touch Of The Magi");return true;end end if (v3(v25.ArcaneBlast) and (v11(v25.PresenceOfMind))) then v20("Arcane Blast");return true;end v46=1424 -(630 + 793) ;end if (v46==2) then if (v3(v25.Evocation) and (v7(v25.ArcaneSurge)<(max((3.5 -2)/((4 -3) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 -0 ) * (1750 -(760 + 987)))) and (v7(v25.TouchOfTheMagi)<(max((1914.5 -(1789 + 124))/((767 -(745 + 21)) + (0.01 * UnitSpellHaste("player"))) ,0.75) * (2 + 3)))) then if ((aura_env.config[tostring(v25.Evocation)]==true) and aura_env.FlagKTrigCD) then v21("Evocation");elseif (aura_env.config[tostring(v25.Evocation)]~=true) then v20("Evocation");return true;end end if (v3(v25.ArcaneMissiles) and  not aura_env.UsedMissiles and ((aura_env.PrevCast==v25.Evocation) or v8(v25.Evocation) or (aura_env.PrevCast==v25.ArcaneSurge) or v8(v25.ArcaneSurge) or v37.Opener) and (v32==(0 -0)) and ( not v11(v25.AetherAttunementBuff) or (v27>=4))) then local v76=0 -0 ;while true do if (v76==0) then v20("Arcane Missiles");return true;end end end v46=1 + 2 ;end if (v46==(1 + 0)) then if (v3(v25.ArcaneOrb) and IsPlayerSpell(v25.HighVoltageTalent) and v37.Opener and  not aura_env.UsedOrb) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then v20("Arcane Orb");return true;end end if (v3(v25.ArcaneBarrage) and v37.Opener and  not aura_env.UsedBarrage and v11(v25.ArcaneTempoBuff) and v3(v25.Evocation) and (v5("player",v25.ArcaneTempoBuff)<(max((1056.5 -(87 + 968))/(1 + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 + 0 ) * (11 -6)))) then v20("Arcane Barrage");return true;end v46=2;end end end;local v42=function() if (v3(v25.ShiftingPower) and (((((C_Spell.GetSpellCharges(v25.ArcaneOrb).currentCharges==((IsPlayerSpell(v25.ChargedOrbTalent) and 1) or (1413 -(447 + 966)))) and v7(v25.ArcaneOrb)) or (v7(v25.TouchOfTheMagi)<(62 -39))) and (v11(v25.ArcaneSurgeBuff)==false) and (v11(v25.SiphonStormBuff)==false) and (v12(v25.TouchOfTheMagiDebuff)==false) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>(1820.5 -(1703 + 114))))) and (v7(v25.TouchOfTheMagi)>((713 -(376 + 325)) + ((9 -3) * max((2.5 -1)/(1 + 0 + ((0.01 -0) * UnitSpellHaste("player"))) ,14.75 -(9 + 5) ))))) or (((aura_env.PrevCast==v25.ArcaneBarrage) or v8(v25.ArcaneBarrage)) and IsPlayerSpell(v25.ShiftingShardsTalent) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>3.5))) and (v11(v25.ArcaneSurgeBuff) or v12(v25.TouchOfTheMagiDebuff) or (v7(v25.Evocation)<20)))) and (v18(436 -(85 + 291) ,v35)>10) and ((v5("player",v25.ArcaneTempoBuff)>(max((1266.5 -(243 + 1022))/((3 -2) + ((0.01 + 0) * UnitSpellHaste("player"))) ,1180.75 -(1123 + 57) ) * (2.5 + 0))) or (v11(v25.ArcaneTempoBuff)==false))) then if ((aura_env.config[tostring(v25.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v21("Shifting Power");elseif (aura_env.config[tostring(v25.ShiftingPower)]~=true) then local v77=254 -(163 + 91) ;while true do if (v77==(1930 -(1869 + 61))) then v20("Shifting Power");return true;end end end end if (v3(v25.Supernova) and (v6("target",v25.TouchOfTheMagiDebuff)<=max(1.5/(1 + 0 + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 -0 )) and (v9(v25.UnerringProficiencyBuff)==(5 + 25))) then if ((aura_env.config[tostring(v25.Supernova)]==true) and aura_env.FlagKTrigCD) then v21("Supernova");elseif (aura_env.config[tostring(v25.Supernova)]~=true) then v20("Supernova");return true;end end if (v3(v25.ArcaneBarrage) and ((v11(v25.ArcaneTempoBuff) and (v5("player",v25.ArcaneTempoBuff)<(max(1.5/((1 -0) + ((0.01 + 0) * UnitSpellHaste("player"))) ,1474.75 -(1329 + 145) ) + (max((972.5 -(140 + 831))/((1851 -(1409 + 441)) + ((718.01 -(15 + 703)) * UnitSpellHaste("player"))) ,0.75 + 0 ) * 2 * (((v32==1) and (439 -(262 + 176))) or (1721 -(345 + 1376))))))) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)<max((689.5 -(198 + 490))/((4 -3) + ((0.01 -0) * UnitSpellHaste("player"))) ,1206.75 -(696 + 510) ))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v9(v25.ArcaneHarmonyBuff)>=(18 -(6 * ((IsPlayerSpell(v25.HighVoltageTalent) and 1) or (0 -0))))) and ((v32==(1262 -(1091 + 171))) or (v32==1) or ((v34>(1 + 2)) and v11(v25.ClearcastingBuff) and IsPlayerSpell(v25.HighVoltageTalent)))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneMissiles) and v11(v25.AetherAttunementBuff) and (v7(v25.TouchOfTheMagi)<(max((3.5 -2)/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75) * (9 -6))) and v11(v25.ClearcastingBuff) and (v27>=(378 -(123 + 251)))) then local v54=0 -0 ;while true do if (v54==(698 -(208 + 490))) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.HighVoltageTalent) and IsPlayerSpell(v25.OrbBarrageTalent) and (v28>(1 + 0)) and v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff) and ((v32==(1 + 0)) or ((v32>0) and (v34>(837 -(660 + 176)))) or (((v32>0) or ((v9(v25.ClearcastingBuff)<(1 + 2)) and  not v11(v25.IntuitionBuff))) and (v34>(205 -(14 + 188)))))) then local v55=675 -(534 + 141) ;while true do if (v55==(0 + 0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and ((v11(v25.ClearcastingBuff) and (v32==0) and (((v7(v25.TouchOfTheMagi)>(max((1.5 + 0)/(1 + 0 + (0.01 * UnitSpellHaste("player"))) ,0.75) * (14 -7))) and (v7(v25.ArcaneSurge)>(max((1.5 -0)/((2 -1) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75) * 7))) or (v9(v25.ClearcastingBuff)>(1 + 0)) or  not IsPlayerSpell(v25.MagisSparkTalent) or ((v7(v25.TouchOfTheMagi)<(max((397.5 -(115 + 281))/((2 -1) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 -0 ) * 4)) and (v9(v25.AetherAttunementBuff)==0)) or (v27>=4))) or ((v18(220 -160 ,v35)<(872 -(550 + 317))) and v11(v25.ClearcastingBuff)))) then local v56=0 -0 ;while true do if (v56==(0 -0)) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBlast) and ((aura_env.NeedArcaneBlastSpark and ((v6("target",v25.TouchOfTheMagiDebuff)<((C_Spell.GetSpellInfo(v25.ArcaneBlast).castTime/1000) + max((2.5 -1)/((286 -(134 + 151)) + ((1665.01 -(970 + 695)) * UnitSpellHaste("player"))) ,0.75 -0 ))) or (v34<=(1991 -(582 + 1408))) or IsPlayerSpell(v25.LeydrinkerTalent))) or v11(v25.LeydrinkerBuff)) and (v28==(13 -9)) and  not IsPlayerSpell(v25.ChargedOrbTalent) and (v34<(3 -0))) then v20("Arcane Blast");return true;end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.OrbBarrageTalent) and (v34>1) and ((aura_env.NeedArcaneBlastSpark==false) or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v28==(15 -11)) and ((IsPlayerSpell(v25.HighVoltageTalent) and (v34>(1826 -(1195 + 629)))) or (v7(v25.TouchOfTheMagi)>(max(1.5/((1 -0) + ((241.01 -(187 + 54)) * UnitSpellHaste("player"))) ,780.75 -(162 + 618) ) * 6)) or  not IsPlayerSpell(v25.MagisSparkTalent) or (IsPlayerSpell(v25.ChargedOrbTalent) and (v14(v25.ArcaneOrb)>1.8)))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v34>(1 + 0)) and ((aura_env.NeedArcaneBlastSpark==false) or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v28==(3 + 1)) and ((v7(v25.ArcaneOrb)<max((1.5 -0)/(1 + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75)) or ((((UnitHealth("target")/UnitHealthMax("target")) * (8 + 92))<(1671 -(1373 + 263))) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and ((v32==1) or ((v32==0) and IsPlayerSpell(v25.HighVoltageTalent)) or ((v32==2) and (((UnitHealth("target")/UnitHealthMax("target")) * 100)<(1035 -(451 + 549))) and IsPlayerSpell(v25.ArcaneBombardmentTalent) and IsPlayerSpell(v25.HighVoltageTalent))) and ((v7(v25.TouchOfTheMagi)>(max((1.5 + 0)/(1 + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 -0 ) * 6)) or (IsPlayerSpell(v25.ChargedOrbTalent) and (v14(v25.ArcaneOrb)>1.8)))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneMissiles) and IsPlayerSpell(v25.HighVoltageTalent) and ((v9(v25.ClearcastingBuff)>(1385 -(746 + 638))) or (v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff))) and (v28<3)) then local v57=0;while true do if (v57==(0 + 0)) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneOrb) and (((v34<=1) and (v28<(4 -1))) or (v28<1) or ((v28<(343 -(218 + 123))) and IsPlayerSpell(v25.HighVoltageTalent)))) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then local v78=1581 -(1535 + 46) ;while true do if (v78==(0 + 0)) then v20("Arcane Orb");return true;end end end end if (v3(v25.ArcaneBarrage) and (v11(v25.IntuitionBuff))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v34<=(1 + 0)) and IsPlayerSpell(v25.HighVoltageTalent) and (v28==4) and v11(v25.ClearcastingBuff) and (v32==(561 -(306 + 254))) and (v11(v25.AetherAttunementBuff) or ((((UnitHealth("target")/UnitHealthMax("target")) * (7 + 93))<(68 -33)) and IsPlayerSpell(v25.ArcaneBombardmentTalent)))) then local v58=1467 -(899 + 568) ;while true do if (v58==(0 + 0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v7(v25.ArcaneOrb)<max((2.5 -1)/((604 -(268 + 335)) + ((290.01 -(60 + 230)) * UnitSpellHaste("player"))) ,0.75)) and (v28==(576 -(426 + 146))) and (v32==0) and IsPlayerSpell(v25.OrbBarrageTalent) and ((v7(v25.TouchOfTheMagi)>(max((1.5 + 0)/(1 + (0.01 * UnitSpellHaste("player"))) ,1456.75 -(282 + 1174) ) * (817 -(569 + 242)))) or  not IsPlayerSpell(v25.MagisSparkTalent))) then local v59=0 -0 ;while true do if (v59==(0 + 0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34<=1) and (IsPlayerSpell(v25.OrbBarrageTalent) or ((((UnitHealth("target")/UnitHealthMax("target")) * (1124 -(706 + 318)))<35) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and (v7(v25.ArcaneOrb)<max((1252.5 -(721 + 530))/((1272 -(945 + 326)) + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75)) and (v28==(4 + 0)) and ((v7(v25.TouchOfTheMagi)>(max(1.5/((701 -(271 + 429)) + (0.01 * UnitSpellHaste("player"))) ,0.75 + 0 ) * (1506 -(1408 + 92)))) or  not IsPlayerSpell(v25.MagisSparkTalent)) and ((v32==(1086 -(461 + 625))) or ((v32==1) and (v9(v25.ClearcastingBuff)==(1288 -(993 + 295)))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and (v34>(1 + 0)) and ((aura_env.NeedArcaneBlastSpark==false) or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v28>(1173 -(418 + 753)))) then local v60=0 + 0 ;while true do if (v60==(0 + 0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneMissiles) and IsPlayerSpell(v25.HighVoltageTalent) and v11(v25.ClearcastingBuff) and (v28<(1 + 2))) then v20("Arcane Missiles");return true;end if (v3(v25.ArcaneExplosion) and WeakAuras.CheckRange("target",3 + 7 ,"<=") and (v34>(530 -(406 + 123))) and (((v28<1) and  not IsPlayerSpell(v25.HighVoltageTalent)) or ((v28<3) and ((v9(v25.ClearcastingBuff)==(1769 -(1749 + 20))) or IsPlayerSpell(v25.ReverberateTalent))))) then local v61=0 + 0 ;while true do if (v61==0) then v20("Arcane Explosion");return true;end end end if (v3(v25.ArcaneExplosion) and WeakAuras.CheckRange("target",1332 -(1249 + 73) ,"<=") and (v34==1) and (v28<(1 + 1)) and  not v11(v25.ClearcastingBuff) and (((v30/v31) * 100)>(1155 -(466 + 679)))) then local v62=0;while true do if (v62==(0 -0)) then v20("Arcane Explosion");return true;end end end if (v3(v25.ArcaneBarrage) and (((((UnitHealth("target")/UnitHealthMax("target")) * 100)<(100 -65)) and (v6("target",v25.TouchOfTheMagiDebuff)<(max((1901.5 -(106 + 1794))/(1 + 0 + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 -0 ) * (2.25 -1))) and (v6("target",v25.TouchOfTheMagiDebuff)>0.75)) or ((v5("player",v25.ArcaneSurgeBuff)<max(1.5/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75)) and v11(v25.ArcaneSurgeBuff))) and (v28==4)) then local v63=114 -(4 + 110) ;while true do if (v63==(584 -(57 + 527))) then v20("Arcane Barrage");return true;end end end if v3(v25.ArcaneBlast) then v20("Arcane Blast");return true;end if v3(v25.ArcaneBarrage) then v20("Arcane Barrage");return true;end end;local v43=function() if (v3(v25.ShiftingPower) and (v11(v25.ArcaneSurgeBuff)==false) and (v11(v25.SiphonStormBuff)==false) and (v12(v25.TouchOfTheMagiDebuff)==false) and (v7(v25.Evocation)>15) and (v7(v25.TouchOfTheMagi)>(1437 -(41 + 1386))) and (v18(163 -(17 + 86) ,v35)>(7 + 3)) and (v11(v25.ArcaneSoulBuff)==false) and ( not v11(v25.IntuitionBuff) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)>(6.5 -3))))) then if ((aura_env.config[tostring(v25.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v21("Shifting Power");elseif (aura_env.config[tostring(v25.ShiftingPower)]~=true) then local v79=0;while true do if (v79==(0 -0)) then v20("Shifting Power");return true;end end end end if (v3(v25.ArcaneMissiles) and (v32==(166 -(122 + 44))) and v11(v25.ClearcastingBuff) and v11(v25.ArcaneSoulBuff) and (v5("player",v25.ArcaneSoulBuff)>(max((1.5 -0)/(1 + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 + 0 ) * ((1 + 3) -((v11(v25.ClearcastingBuff) and 1) or 0))))) then local v64=0 -0 ;while true do if ((65 -(30 + 35))==v64) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBarrage) and (v11(v25.ArcaneSoulBuff))) then local v65=0 + 0 ;while true do if ((1257 -(1043 + 214))==v65) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and ((v11(v25.ArcaneTempoBuff) and (v5("player",v25.ArcaneTempoBuff)<max((3.5 -2)/((1213 -(323 + 889)) + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75))) or (v11(v25.IntuitionBuff) and (v5("player",v25.IntuitionBuff)<max(1.5/((581 -(361 + 219)) + (0.01 * UnitSpellHaste("player"))) ,0.75))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.OrbBarrageTalent) and (v34>(321 -(53 + 267))) and (v9(v25.ArcaneHarmonyBuff)>=(5 + 13)) and (((v34>(416 -(15 + 398))) and (IsPlayerSpell(v25.ResonanceTalent) or IsPlayerSpell(v25.HighVoltageTalent))) or (v32==(982 -(18 + 964))) or (v32==(3 -2)) or ((v32==2) and (v9(v25.ClearcastingBuff)==(2 + 1))))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneMissiles) and v11(v25.ClearcastingBuff) and (v27>=4) and v11(v25.AetherAttunementBuff) and (v7(v25.TouchOfTheMagi)<(max((1.5 + 0)/(1 + (0.01 * UnitSpellHaste("player"))) ,850.75 -(20 + 830) ) * (3 -((1.5 + 0) * (((v34>3) and ( not IsPlayerSpell(v25.TimeLoopTalent) or IsPlayerSpell(v25.ResonanceTalent)) and (127 -(116 + 10))) or (0 + 0))))))) then local v66=738 -(542 + 196) ;while true do if (v66==(0 -0)) then v20("Arcane Missiles");return true;end end end if (v3(v25.ArcaneBlast) and ((aura_env.NeedArcaneBlastSpark and ((v6("target",v25.TouchOfTheMagiDebuff)<((C_Spell.GetSpellInfo(v25.ArcaneBlast).castTime/(293 + 707)) + max(1.5/(1 + 0 + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 -0 ))) or (v34<=1) or IsPlayerSpell(v25.LeydrinkerTalent))) or v11(v25.LeydrinkerBuff)) and (v28==4) and ((v32>(0 -0)) or (v9(v25.ClearcastingBuff)==(1551 -(1126 + 425))))) then local v67=405 -(118 + 287) ;while true do if (v67==0) then v20("Arcane Blast");return true;end end end if (v3(v25.ArcaneBarrage) and IsPlayerSpell(v25.HighVoltageTalent) and (v34>(3 -2)) and (v28==4) and v11(v25.ClearcastingBuff) and (v32==(1122 -(118 + 1003)))) then local v68=0 -0 ;while true do if (v68==(377 -(142 + 235))) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34>(4 -3)) and IsPlayerSpell(v25.HighVoltageTalent) and (v28==4) and v11(v25.ClearcastingBuff) and v11(v25.AetherAttunementBuff) and (v11(v25.GloriousIncandescenceBuff)==false) and (v11(v25.IntuitionBuff)==false)) then local v69=0;while true do if (v69==(0 + 0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and (v34>(979 -(553 + 424))) and IsPlayerSpell(v25.OrbBarrageTalent) and IsPlayerSpell(v25.HighVoltageTalent) and  not aura_env.NeedArcaneBlastSpark and (v28==4) and (((UnitHealth("target")/UnitHealthMax("target")) * (189 -89))<35) and IsPlayerSpell(v25.ArcaneBombardmentTalent) and ((v32>(0 + 0)) or ((v32==(0 + 0)) and (v9(v25.ClearcastingBuff)==0)))) then local v70=0 + 0 ;while true do if (v70==(0 + 0)) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneBarrage) and ((v34>(2 + 0)) or ((v34>(2 -1)) and (((UnitHealth("target")/UnitHealthMax("target")) * (278 -178))<(78 -43)) and IsPlayerSpell(v25.ArcaneBombardmentTalent))) and (v7(v25.ArcaneOrb)<max(1.5/(1 + 0 + ((0.01 -0) * UnitSpellHaste("player"))) ,753.75 -(239 + 514) )) and (v28==(2 + 2)) and (v7(v25.TouchOfTheMagi)>(max(1.5/((1330 -(797 + 532)) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 + 0 ) * 6)) and ( not aura_env.NeedArcaneBlastSpark or  not IsPlayerSpell(v25.MagisSparkTalent)) and (v32>(0 -0)) and (IsPlayerSpell(v25.HighVoltageTalent) or (v32==2) or ((v32==1) and  not v11(v25.ClearcastingBuff)))) then v20("Arcane Barrage");return true;end if (v3(v25.ArcaneMissiles) and v11(v25.ClearcastingBuff) and ((IsPlayerSpell(v25.HighVoltageTalent) and (v28<(1206 -(373 + 829)))) or (v32==0) or ((v9(v25.ClearcastingBuff)==3) and ( not IsPlayerSpell(v25.HighVoltageTalent) or (v34<=1))))) then v20("Arcane Missiles");return true;end if (v3(v25.ArcaneBarrage) and (v28==(735 -(476 + 255))) and (v34>(1131 -(369 + 761))) and (v34<(3 + 2)) and v11(v25.BurdenOfPowerBuff) and ((IsPlayerSpell(v25.HighVoltageTalent) and v11(v25.ClearcastingBuff)) or v11(v25.GloriousIncandescenceBuff) or v11(v25.IntuitionBuff) or (v7(v25.ArcaneOrb)<max((1.5 -0)/((1 -0) + ((238.01 -(64 + 174)) * UnitSpellHaste("player"))) ,0.75 + 0 )) or (C_Spell.GetSpellCharges(v25.ArcaneOrb).currentCharges>(0 -0))) and ( not IsPlayerSpell(v25.ConsortiumsBaubleTalent) or IsPlayerSpell(v25.HighVoltageTalent))) then local v71=336 -(144 + 192) ;while true do if ((216 -(42 + 174))==v71) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneOrb) and (v28<(3 + 0))) then if ((aura_env.config[tostring(v25.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v21("Arcane Orb");elseif (aura_env.config[tostring(v25.ArcaneOrb)]~=true) then local v80=0;while true do if (0==v80) then v20("Arcane Orb");return true;end end end end if (v3(v25.ArcaneBarrage) and ((v11(v25.GloriousIncandescenceBuff) and ((v7(v25.TouchOfTheMagi)>(5 + 1)) or  not IsPlayerSpell(v25.MagisSparkTalent))) or v11(v25.IntuitionBuff))) then local v72=0;while true do if (v72==0) then v20("Arcane Barrage");return true;end end end if (v3(v25.ArcaneExplosion) and WeakAuras.CheckRange("target",5 + 5 ,"<=") and (v28<(1506 -(363 + 1141))) and (v34>(1581 -(1183 + 397)))) then local v73=0 -0 ;while true do if (v73==(0 + 0)) then v20("Arcane Explosion");return true;end end end if v3(v25.ArcaneBlast) then v20("Arcane Blast");return true;end if v3(v25.ArcaneBarrage) then local v74=0 + 0 ;while true do if (v74==(1975 -(1913 + 62))) then v20("Arcane Barrage");return true;end end end end;if (v3(v25.ArcaneBarrage) and (v18(38 + 22 ,v35)<(5 -3))) then v20("Arcane Barrage");return true;end if v41() then return true;end if IsPlayerSpell(v25.SpellfireSpheresTalent) then if v43() then return true;end end if  not IsPlayerSpell(v25.SpellfireSpheresTalent) then if v42() then return true;end end if v3(v25.ArcaneBarrage) then local v53=1933 -(565 + 1368) ;while true do if (v53==0) then v20("Arcane Barrage");return true;end end end v20("Clear");end;