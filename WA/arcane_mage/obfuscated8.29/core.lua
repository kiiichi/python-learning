function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=C_SpellBook.IsSpellKnown;local v21=aura_env.KTrig;local v22=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v24=aura_env.FullGCD;local v25=aura_env.TalentRank;local v26=aura_env.IsChanneling;local v27=aura_env.ids;aura_env.OutOfRange=false;local v29={};local v30=max(1.5/((1 -0) + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 -0 );local v31=WeakAuras.GetNumSetItemsEquipped(1746 + 178 );local v32=WeakAuras.GetNumSetItemsEquipped(1872);local v33=UnitPower("player",Enum.PowerType.ArcaneCharges);local v34=UnitPowerMax("player",Enum.PowerType.ArcaneCharges);local v35=UnitPower("player",Enum.PowerType.Mana);local v36=UnitPowerMax("player",Enum.PowerType.Mana);local v37=v9(v27.NetherPrecisionBuff);local v38=select(9,UnitCastingInfo("player"));if (v38~=nil) then if (v38==v27.ArcaneBlast) then local v85=0 -0 ;while true do if (v85==0) then v33=min(1417 -(447 + 966) ,v33 + (2 -1) );v37=max(1817 -(1703 + 114) ,v37-1 );break;end end end end local v39=0;local v40=40;for v51=1,741 -(376 + 325)  do local v52=0;local v53;while true do if (v52==0) then v53="nameplate"   .. v51 ;if (UnitExists(v53) and  not UnitIsFriend("player",v53) and WeakAuras.CheckRange(v53,v40,"<=") and (UnitAffectingCombat(v53) or aura_env.config['BypassCombatRequirement'])) then v39=v39 + (1 -0) ;end break;end end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v39);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then local v86=0 -0 ;while true do if (v86==(1 + 0)) then v22("Clear",nil);return;end if (v86==0) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",ExtraGlows);v21("Clear",nil);v86=1;end end end end v29.SoulBurst=aura_env.config['SoulBurstSwitch'];if ((v31>=4) and v20(v27.SpellfireSpheresTalent) and v20(v27.ResonanceTalent) and  not v20(v27.MagisSparkTalent) and (v39>=(6 -3)) and v29.SoulBurst) then v29.SoulCd=true;else v29.SoulCd=false;end v29.AoeTargetCount=16 -(9 + 5) ;if  not v20(v27.ArcingCleaveTalent) then v29.AoeTargetCount=9;end if ( not v12(v27.TouchOfTheMagiDebuff) and (v7(v27.TouchOfTheMagi)==0)) then v29.Opener=true;else aura_env.UsedOrb=false;aura_env.UsedMissiles=false;aura_env.UsedBarrage=false;v29.Opener=false;end v29.AoeList=aura_env.config['AoeList'];local v46={};WeakAuras.ScanEvents("K_TRIGED_EXTRA",v46,nil);local v47=function() local v54=376 -(85 + 291) ;while true do if (v54==(1268 -(243 + 1022))) then if (v4(v27.ArcaneSurge) and ((v7(v27.TouchOfTheMagi)<(max(C_Spell.GetSpellInfo(v27.ArcaneSurge).castTime/(3805 -2805) ,WeakAuras.gcdDuration()) + (v30 * (((v33==(4 + 0)) and 1) or (1180 -(1123 + 57)))))) or false)) then if ((aura_env.config[tostring(v27.ArcaneSurge)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Surge");elseif (aura_env.config[tostring(v27.ArcaneSurge)]~=true) then local v97=0 + 0 ;while true do if (v97==(254 -(163 + 91))) then v21("Arcane Surge");return true;end end end end break;end if (v54==(1930 -(1869 + 61))) then if (v3(v27.TouchOfTheMagi) and ((aura_env.PrevCast==v27.ArcaneSurge) or v8(v27.ArcaneSurge) or ((v7(v27.ArcaneSurge)>(9 + 21)) and v3(v27.TouchOfTheMagi) and true))) then if ((aura_env.config[tostring(v27.TouchOfTheMagi)]==true) and aura_env.FlagKTrigCD) then v22("Touch Of The Magi");elseif (aura_env.config[tostring(v27.TouchOfTheMagi)]~=true) then v21("Touch Of The Magi");return true;end end if (v3(v27.ArcaneBlast) and (v11(v27.PresenceOfMind))) then v21("Arcane Blast");return true;end v54=3 -2 ;end if (v54==(2 -0)) then if (v3(v27.Evocation) and (((v7(v27.ArcaneSurge)<(v30 * (1 + 2))) and (v7(v27.TouchOfTheMagi)<(v30 * (6 -1)))) or false)) then if ((aura_env.config[tostring(v27.Evocation)]==true) and aura_env.FlagKTrigCD) then v22("Evocation");elseif (aura_env.config[tostring(v27.Evocation)]~=true) then local v98=0 + 0 ;while true do if (v98==(1474 -(1329 + 145))) then v21("Evocation");return true;end end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and  not aura_env.UsedMissiles and ((aura_env.PrevCast==v27.Evocation) or v8(v27.Evocation) or (aura_env.PrevCast==v27.ArcaneSurge) or v8(v27.ArcaneSurge) or v29.Opener) and (v37==(971 -(140 + 831)))) then local v87=1850 -(1409 + 441) ;while true do if (0==v87) then v21("Arcane Missiles");return true;end end end v54=721 -(15 + 703) ;end if (v54==1) then if (v3(v27.ArcaneOrb) and v20(v27.HighVoltageTalent) and v29.Opener and  not aura_env.UsedOrb) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then v21("Arcane Orb");return true;end end if (v3(v27.ArcaneBarrage) and v29.Opener and  not aura_env.UsedBarrage and v11(v27.ArcaneTempoBuff) and v3(v27.Evocation) and (v5("player",v27.ArcaneTempoBuff)<(v30 * (3 + 2)))) then local v88=0;while true do if (v88==0) then v21("Arcane Barrage");return true;end end end v54=440 -(262 + 176) ;end end end;local v48=function() local v55=0;while true do if (v55==(1722 -(345 + 1376))) then if (v3(v27.TouchOfTheMagi) and ((v11(v27.ArcaneSurgeBuff) and (v5("player",v27.ArcaneSurgeBuff)<=(690.5 -(198 + 490))) and true) or ((v7(v27.Evocation)>(176 -136)) and (v7(v27.Evocation)<60) and true))) then if ((aura_env.config[tostring(v27.TouchOfTheMagi)]==true) and aura_env.FlagKTrigCD) then v22("Touch Of The Magi");elseif (aura_env.config[tostring(v27.TouchOfTheMagi)]~=true) then local v99=0 -0 ;while true do if (v99==0) then v21("Touch Of The Magi");return true;end end end end break;end if (v55==0) then if (v4(v27.ArcaneSurge) and (v7(v27.TouchOfTheMagi)<15)) then if ((aura_env.config[tostring(v27.ArcaneSurge)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Surge");elseif (aura_env.config[tostring(v27.ArcaneSurge)]~=true) then local v100=0;while true do if (v100==(1206 -(696 + 510))) then v21("Arcane Surge");return true;end end end end if (v3(v27.Evocation) and v11(v27.ArcaneSurgeBuff) and ((v5("player",v27.ArcaneSurgeBuff)<=11) or ((v11(v27.GloriousIncandescenceBuff) or v11(v27.IntuitionBuff)) and (v5("player",v27.ArcaneSurgeBuff)<=(26 -13))))) then if ((aura_env.config[tostring(v27.Evocation)]==true) and aura_env.FlagKTrigCD) then v22("Evocation");elseif (aura_env.config[tostring(v27.Evocation)]~=true) then local v101=1262 -(1091 + 171) ;while true do if (v101==(0 + 0)) then v21("Evocation");return true;end end end end v55=1;end end end;local v49=function() if (v3(v27.ShiftingPower) and (((((C_Spell.GetSpellCharges(v27.ArcaneOrb).currentCharges==(0 -0)) and (v7(v27.ArcaneOrb)>(52 -36))) or (v7(v27.TouchOfTheMagi)<(394 -(123 + 251)))) and (v11(v27.ArcaneSurgeBuff)==false) and (v11(v27.SiphonStormBuff)==false) and (v12(v27.TouchOfTheMagiDebuff)==false) and ( not v11(v27.IntuitionBuff) or (v11(v27.IntuitionBuff) and (v5("player",v27.IntuitionBuff)>(14.5 -11)))) and (v7(v27.TouchOfTheMagi)>(12 + ((704 -(208 + 490)) * v30)))) or (((aura_env.PrevCast==v27.ArcaneBarrage) or v8(v27.ArcaneBarrage)) and v20(v27.ShiftingShardsTalent) and ( not v11(v27.IntuitionBuff) or (v11(v27.IntuitionBuff) and (v5("player",v27.IntuitionBuff)>(1.5 + 2)))) and (v11(v27.ArcaneSurgeBuff) or v12(v27.TouchOfTheMagiDebuff) or (v7(v27.Evocation)<(9 + 11))))) and (v18(60,v40)>10) and ((v5("player",v27.ArcaneTempoBuff)>(v30 * 2.5)) or (v11(v27.ArcaneTempoBuff)==false))) then if ((aura_env.config[tostring(v27.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v22("Shifting Power");elseif (aura_env.config[tostring(v27.ShiftingPower)]~=true) then local v89=836 -(660 + 176) ;while true do if ((0 + 0)==v89) then v21("Shifting Power");return true;end end end end if (v3(v27.Supernova) and (v6("target",v27.TouchOfTheMagiDebuff)<=v30) and (v9(v27.UnerringProficiencyBuff)==(232 -(14 + 188)))) then if ((aura_env.config[tostring(v27.Supernova)]==true) and aura_env.FlagKTrigCD) then v22("Supernova");elseif (aura_env.config[tostring(v27.Supernova)]~=true) then local v90=675 -(534 + 141) ;while true do if (v90==0) then v21("Supernova");return true;end end end end if (v3(v27.ArcaneOrb) and (v33<4)) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then local v91=0 + 0 ;while true do if (v91==(0 + 0)) then v21("Arcane Orb");return true;end end end end if (v3(v27.ArcaneBarrage) and v11(v27.ArcaneTempoBuff) and (v5("player",v27.ArcaneTempoBuff)<=(v30 * (2 + 0)))) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and v11(v27.AetherAttunementBuff) and (v7(v27.TouchOfTheMagi)<(v30 * 3)) and v11(v27.ClearcastingBuff) and (v32>=(8 -4))) then v21("Arcane Missiles");return true;end if (v3(v27.ArcaneBarrage) and (v33==4) and (v9(v27.ArcaneHarmonyBuff)>=(31 -11)) and (v31>=4)) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and ((v11(v27.ClearcastingBuff) and (v37==(0 -0)) and (((v7(v27.TouchOfTheMagi)>(v30 * (4 + 3))) and (v7(v27.ArcaneSurge)>(v30 * 7))) or (v9(v27.ClearcastingBuff)>1) or  not v20(v27.MagisSparkTalent) or ((v7(v27.TouchOfTheMagi)<(v30 * (3 + 1))) and (v9(v27.AetherAttunementBuff)==(396 -(115 + 281)))) or (v32>=(9 -5)))) or ((v18(60,v40)<(5 + 0)) and v11(v27.ClearcastingBuff)))) then local v64=0 -0 ;while true do if (v64==(0 -0)) then v21("Arcane Missiles");return true;end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and IsPlayerSpell(v27.HighVoltageTalent) and ((v9(v27.ClearcastingBuff)>1) or (v11(v27.ClearcastingBuff) and v11(v27.AetherAttunementBuff))) and (v33<3)) then v21("Arcane Missiles");return true;end if (v3(v27.ArcaneBarrage) and (v11(v27.IntuitionBuff))) then local v65=0;while true do if (v65==0) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneBlast) and (aura_env.NeedArcaneBlastSpark or v11(v27.LeydrinkerBuff))) then local v66=867 -(550 + 317) ;while true do if (v66==(0 -0)) then v21("Arcane Blast");return true;end end end if (v3(v27.ArcaneBlast) and (v37>(0 -0)) and (v9(v27.ArcaneHarmonyBuff)<=16) and (v33==(11 -7)) and (v39==(286 -(134 + 151)))) then local v67=1665 -(970 + 695) ;while true do if (v67==(0 -0)) then v21("Arcane Blast");return true;end end end if (v3(v27.ArcaneBarrage) and (((v35/v36) * (2090 -(582 + 1408)))<(34 -24)) and (v11(v27.ArcaneSurgeBuff)==false) and (v7(v27.ArcaneOrb)<v30)) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneOrb) and (v39==(1 -0)) and ((v7(v27.TouchOfTheMagi)<6) or  not v20(v27.ChargedOrbTalent) or v11(v27.ArcaneSurgeBuff) or (v14(v27.ArcaneOrb)>(3.5 -2)))) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then local v92=0;while true do if (v92==(1824 -(1195 + 629))) then v21("Arcane Orb");return true;end end end end if (v3(v27.ArcaneBarrage) and (v39>=(2 -0)) and (v33==(245 -(187 + 54))) and (v7(v27.ArcaneOrb)<v30) and (v9(v27.ArcaneHarmonyBuff)<=(8 + ((790 -(162 + 618)) * (((v31>=4) and (0 + 0)) or (1 + 0))))) and ((((aura_env.PrevCast==v27.ArcaneBarrage) or v8(v27.ArcaneBarrage) or (aura_env.PrevCast==v27.ArcaneOrb) or v8(v27.ArcaneOrb)) and (v37==(1 -0))) or (v37==2) or (v37==(0 -0)))) then local v68=0 + 0 ;while true do if (v68==(1636 -(1373 + 263))) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneBarrage) and (v39>(1002 -(451 + 549))) and (v33==4) and  not (v31>=(2 + 2))) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneOrb) and (v39>(1 -0)) and (v9(v27.ArcaneHarmonyBuff)<(33 -13)) and (v11(v27.ArcaneSurgeBuff) or (v37>(1384 -(746 + 638))) or (v39>=7)) and (v31>=4)) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then local v93=0 + 0 ;while true do if (v93==(0 -0)) then v21("Arcane Orb");return true;end end end end if (v3(v27.ArcaneBarrage) and v20(v27.HighVoltageTalent) and (v39>=2) and (v33==4) and v11(v27.AetherAttunementBuff) and v11(v27.ClearcastingBuff)) then local v69=341 -(218 + 123) ;while true do if (v69==0) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneOrb) and (v39>(1582 -(1535 + 46))) and ((v39<3) or v11(v27.ArcaneSurgeBuff) or (v37>(0 + 0))) and (v31>=(1 + 3))) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then local v94=560 -(306 + 254) ;while true do if (v94==(0 + 0)) then v21("Arcane Orb");return true;end end end end if (v3(v27.ArcaneBarrage) and (v39>(1 -0)) and (v33==4) and (v7(v27.ArcaneOrb)<v30)) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneBarrage) and v20(v27.HighVoltageTalent) and (v33==(1471 -(899 + 568))) and v11(v27.ClearcastingBuff) and (v37==(1 + 0))) then local v70=0 -0 ;while true do if (v70==(603 -(268 + 335))) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneBarrage) and (v39<=1) and (v20(v27.OrbBarrageTalent) or ((((UnitHealth("target")/UnitHealthMax("target")) * 100)<(325 -(60 + 230))) and v20(v27.ArcaneBombardmentTalent))) and (v7(v27.ArcaneOrb)<v30) and (v33==4) and ((v7(v27.TouchOfTheMagi)>(v30 * 6)) or  not v20(v27.MagisSparkTalent)) and ((v37==(572 -(426 + 146))) or ((v37==1) and (v9(v27.ClearcastingBuff)==(0 + 0)))) and  not (v31>=4)) then local v71=1456 -(282 + 1174) ;while true do if (v71==(811 -(569 + 242))) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneExplosion) and WeakAuras.CheckRange("target",28 -18 ,"<=") and (v39>1) and (((v33<(1 + 0)) and  not v20(v27.HighVoltageTalent)) or ((v33<(1027 -(706 + 318))) and ((v9(v27.ClearcastingBuff)==0) or v20(v27.ReverberateTalent))))) then v21("Arcane Explosion");return true;end if (v3(v27.ArcaneExplosion) and WeakAuras.CheckRange("target",10,"<=") and (v39==1) and (v33<(1253 -(721 + 530))) and  not v11(v27.ClearcastingBuff)) then local v72=1271 -(945 + 326) ;while true do if (v72==0) then v21("Arcane Explosion");return true;end end end if (v3(v27.ArcaneBarrage) and (((((UnitHealth("target")/UnitHealthMax("target")) * (249 -149))<35) and (v6("target",v27.TouchOfTheMagiDebuff)<(v30 * (1.25 + 0))) and (v6("target",v27.TouchOfTheMagiDebuff)>(700.75 -(271 + 429)))) or ((v5("player",v27.ArcaneSurgeBuff)<v30) and v11(v27.ArcaneSurgeBuff))) and (v33==(4 + 0)) and  not (v31>=(1504 -(1408 + 92)))) then v21("Arcane Barrage");return true;end if v3(v27.ArcaneBlast) then local v73=1086 -(461 + 625) ;while true do if (v73==(1288 -(993 + 295))) then v21("Arcane Blast");return true;end end end if v3(v27.ArcaneBarrage) then local v74=0 + 0 ;while true do if (0==v74) then v21("Arcane Barrage");return true;end end end end;local v50=function() if (v3(v27.ShiftingPower) and (v11(v27.ArcaneSurgeBuff)==false) and (v11(v27.SiphonStormBuff)==false) and (v12(v27.TouchOfTheMagiDebuff)==false) and (v7(v27.Evocation)>(1186 -(418 + 753))) and (v7(v27.TouchOfTheMagi)>10) and (v18(23 + 37 ,v40)>10) and (v11(v27.ArcaneSoulBuff)==false) and ( not v11(v27.IntuitionBuff) or (v11(v27.IntuitionBuff) and (v5("player",v27.IntuitionBuff)>3.5)))) then if ((aura_env.config[tostring(v27.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v22("Shifting Power");elseif (aura_env.config[tostring(v27.ShiftingPower)]~=true) then local v95=0 + 0 ;while true do if (v95==0) then v21("Shifting Power");return true;end end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and (v37==(0 + 0)) and v11(v27.ClearcastingBuff) and v11(v27.ArcaneSoulBuff) and (v5("player",v27.ArcaneSoulBuff)>(v30 * ((2 + 2) -((v11(v27.ClearcastingBuff) and 1) or (529 -(406 + 123))))))) then local v75=1769 -(1749 + 20) ;while true do if (0==v75) then v21("Arcane Missiles");return true;end end end if (v3(v27.ArcaneBarrage) and (v11(v27.ArcaneSoulBuff))) then local v76=0 + 0 ;while true do if (v76==0) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and v11(v27.ClearcastingBuff) and v11(v27.ArcaneSurgeBuff) and (v5("player",v27.ArcaneSurgeBuff)<(v30 * (1324 -(1249 + 73))))) then local v77=0;while true do if (v77==0) then v21("Arcane Missiles");return true;end end end if (v3(v27.ArcaneBarrage) and ((v11(v27.ArcaneTempoBuff) and (v5("player",v27.ArcaneTempoBuff)<(v30 + (v30 * (((v37==(1 + 0)) and (1146 -(466 + 679))) or (0 -0)))))) or (v11(v27.IntuitionBuff) and (v5("player",v27.IntuitionBuff)<(v30 + (v30 * (((v37==(2 -1)) and (1901 -(106 + 1794))) or (0 + 0)))))))) then local v78=0;while true do if (v78==0) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneBarrage) and v20(v27.OrbBarrageTalent) and (v39>(1 + 0)) and (v9(v27.ArcaneHarmonyBuff)>=18) and (((v39>(8 -5)) and (v20(v27.ResonanceTalent) or v20(v27.HighVoltageTalent))) or (v37==(0 -0)) or (v37==1) or ((v37==2) and (v9(v27.ClearcastingBuff)==3)))) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and v11(v27.ClearcastingBuff) and (v32>=(118 -(4 + 110))) and v11(v27.AetherAttunementBuff) and (v7(v27.TouchOfTheMagi)<(v30 * (3 -(1.5 * (((v39>(587 -(57 + 527))) and ( not v20(v27.TimeLoopTalent) or v20(v27.ResonanceTalent)) and (1428 -(41 + 1386))) or 0)))))) then local v79=0;while true do if (v79==(103 -(17 + 86))) then v21("Arcane Missiles");return true;end end end if (v3(v27.ArcaneBlast) and aura_env.NeedArcaneBlastSpark and (v33==(3 + 1))) then local v80=0 -0 ;while true do if (v80==(0 -0)) then v21("Arcane Blast");return true;end end end if (v3(v27.ArcaneBarrage) and v20(v27.HighVoltageTalent) and (v39>(167 -(122 + 44))) and (v33==(6 -2)) and v11(v27.ClearcastingBuff) and (v37==(3 -2))) then local v81=0 + 0 ;while true do if (v81==(0 + 0)) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneBarrage) and v20(v27.HighVoltageTalent) and (v39>1) and (v33==(7 -3)) and v11(v27.ClearcastingBuff) and v11(v27.AetherAttunementBuff) and (v11(v27.GloriousIncandescenceBuff)==false) and (v11(v27.IntuitionBuff)==false)) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneBarrage) and (v39>(67 -(30 + 35))) and v20(v27.OrbBarrageTalent) and v20(v27.HighVoltageTalent) and  not aura_env.NeedArcaneBlastSpark and (v33==4) and (((UnitHealth("target")/UnitHealthMax("target")) * 100)<35) and v20(v27.ArcaneBombardmentTalent) and ((v37>0) or ((v37==(0 + 0)) and (v9(v27.ClearcastingBuff)==(1257 -(1043 + 214)))))) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneBarrage) and ((v39>2) or ((v39>(3 -2)) and (((UnitHealth("target")/UnitHealthMax("target")) * 100)<35) and v20(v27.ArcaneBombardmentTalent))) and (v7(v27.ArcaneOrb)<v30) and (v33==4) and (v7(v27.TouchOfTheMagi)>(v30 * 6)) and ( not aura_env.NeedArcaneBlastSpark or  not v20(v27.MagisSparkTalent)) and (v37>(1212 -(323 + 889))) and (v20(v27.HighVoltageTalent) or (( not v11(v27.LeydrinkerBuff) or ((((UnitHealth("target")/UnitHealthMax("target")) * (269 -169))<(615 -(361 + 219))) and v20(v27.ArcaneBombardmentTalent) and (v39>=(324 -(53 + 267))) and v20(v27.ResonanceTalent))) and (v37==(1 + 1))) or ((v37==(414 -(15 + 398))) and  not v11(v27.ClearcastingBuff)))) then local v82=982 -(18 + 964) ;while true do if (v82==0) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and v11(v27.ClearcastingBuff) and ((v20(v27.HighVoltageTalent) and (v33<(14 -10))) or ((v37==(0 + 0)) and (v9(v27.ClearcastingBuff)>(1 + 0))) or (v9(v27.SpellfireSpheresBuff)==(856 -(20 + 830))) or v11(v27.BurdenOfPowerBuff) or v11(v27.GloriousIncandescenceBuff) or v11(v27.IntuitionBuff))) then v21("Arcane Missiles");return true;end if (v3(v27.ArcaneBarrage) and (v33==4) and (v39>(1 + 0)) and (v39<5) and v11(v27.BurdenOfPowerBuff) and ((v20(v27.HighVoltageTalent) and v11(v27.ClearcastingBuff)) or v11(v27.GloriousIncandescenceBuff) or v11(v27.IntuitionBuff) or (v7(v27.ArcaneOrb)<v30) or (C_Spell.GetSpellCharges(v27.ArcaneOrb).currentCharges>0)) and ( not v20(v27.ConsortiumsBaubleTalent) or v20(v27.HighVoltageTalent))) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneOrb) and (v33<(129 -(116 + 10)))) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then local v96=0 + 0 ;while true do if (v96==(738 -(542 + 196))) then v21("Arcane Orb");return true;end end end end if (v3(v27.ArcaneBarrage) and (v11(v27.GloriousIncandescenceBuff) or v11(v27.IntuitionBuff))) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneExplosion) and WeakAuras.CheckRange("target",21 -11 ,"<=") and (v33<2) and (v39>(1 + 0))) then local v83=0 + 0 ;while true do if (0==v83) then v21("Arcane Explosion");return true;end end end if v3(v27.ArcaneBlast) then local v84=0;while true do if ((0 + 0)==v84) then v21("Arcane Blast");return true;end end end if v3(v27.ArcaneBarrage) then v21("Arcane Barrage");return true;end end;if (v3(v27.ArcaneBarrage) and (v18(158 -98 ,v40)<(4 -2))) then v21("Arcane Barrage");return true;end if  not v29.SoulCd then if v47() then return true;end end if v29.SoulCd then if v48() then return true;end end if v20(v27.SpellfireSpheresTalent) then if v50() then return true;end end if  not v20(v27.SpellfireSpheresTalent) then if v49() then return true;end end if v3(v27.ArcaneBarrage) then v21("Arcane Barrage");return true;end v21("Clear");v22("Clear");end;