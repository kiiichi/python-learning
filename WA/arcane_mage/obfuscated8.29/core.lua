function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=C_SpellBook.IsSpellKnown;local v21=aura_env.KTrig;local v22=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v24=aura_env.FullGCD;local v25=aura_env.TalentRank;local v26=aura_env.IsChanneling;local v27=aura_env.ids;aura_env.OutOfRange=false;local v29={};local v30=max((3.5 -2)/(1 + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 -0 );local v31=WeakAuras.GetNumSetItemsEquipped(1924);local v32=WeakAuras.GetNumSetItemsEquipped(5530 -3658 );local v33=UnitPower("player",Enum.PowerType.ArcaneCharges);local v34=UnitPowerMax("player",Enum.PowerType.ArcaneCharges);local v35=UnitPower("player",Enum.PowerType.Mana);local v36=UnitPowerMax("player",Enum.PowerType.Mana);local v37=v9(v27.NetherPrecisionBuff);local v38=select(9,UnitCastingInfo("player"));if (v38~=nil) then if (v38==v27.ArcaneBlast) then v33=min(4,v33 + 1 + 0 );v37=max(0 -0 ,v37-(3 -2) );end end local v39=0;local v40=1 + 39 ;for v51=1 + 0 ,40 do local v52=1055 -(87 + 968) ;local v53;while true do if (v52==(0 -0)) then v53="nameplate"   .. v51 ;if (UnitExists(v53) and  not UnitIsFriend("player",v53) and WeakAuras.CheckRange(v53,v40,"<=") and (UnitAffectingCombat(v53) or aura_env.config['BypassCombatRequirement'])) then v39=v39 + 1 ;end break;end end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v39);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",ExtraGlows);v21("Clear",nil);v22("Clear",nil);return;end end v29.SoulBurst=aura_env.config['SoulBurstSwitch'];if ((v31>=4) and v20(v27.SpellfireSpheresTalent) and v20(v27.ResonanceTalent) and  not v20(v27.MagisSparkTalent) and (v39>=3) and v29.SoulBurst and  not ((aura_env.config['SoulBurstSwitchBack']==true) and (v7(v27.Evocation)>80))) then v29.SoulCd=true;else v29.SoulCd=false;end v29.AoeTargetCount=2;if  not v20(v27.ArcingCleaveTalent) then v29.AoeTargetCount=9;end if ( not v12(v27.TouchOfTheMagiDebuff) and (v7(v27.TouchOfTheMagi)==(0 + 0))) then v29.Opener=true;else aura_env.UsedOrb=false;aura_env.UsedMissiles=false;aura_env.UsedBarrage=false;v29.Opener=false;end v29.AoeList=aura_env.config['AoeList'];local v46={};WeakAuras.ScanEvents("K_TRIGED_EXTRA",v46,nil);local v47=function() if (v3(v27.TouchOfTheMagi) and ((aura_env.PrevCast==v27.ArcaneSurge) or v8(v27.ArcaneSurge) or ((v7(v27.ArcaneSurge)>(67 -37)) and v3(v27.TouchOfTheMagi) and true))) then if ((aura_env.config[tostring(v27.TouchOfTheMagi)]==true) and aura_env.FlagKTrigCD) then v22("Touch Of The Magi");elseif (aura_env.config[tostring(v27.TouchOfTheMagi)]~=true) then local v92=1413 -(447 + 966) ;while true do if (v92==(0 -0)) then v21("Touch Of The Magi");return true;end end end end if (v3(v27.ArcaneBlast) and (v11(v27.PresenceOfMind))) then local v63=1817 -(1703 + 114) ;while true do if (v63==(701 -(376 + 325))) then v21("Arcane Blast");return true;end end end if (v3(v27.ArcaneOrb) and v20(v27.HighVoltageTalent) and v29.Opener and  not aura_env.UsedOrb) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then v21("Arcane Orb");return true;end end if (v3(v27.ArcaneBarrage) and v29.Opener and  not aura_env.UsedBarrage and v11(v27.ArcaneTempoBuff) and v3(v27.Evocation) and (v5("player",v27.ArcaneTempoBuff)<(v30 * (8 -3)))) then local v64=0 -0 ;while true do if (0==v64) then v21("Arcane Barrage");return true;end end end if (v3(v27.Evocation) and (((v7(v27.ArcaneSurge)<(v30 * (1 + 2))) and (v7(v27.TouchOfTheMagi)<(v30 * (10 -5)))) or false)) then if ((aura_env.config[tostring(v27.Evocation)]==true) and aura_env.FlagKTrigCD) then v22("Evocation");elseif (aura_env.config[tostring(v27.Evocation)]~=true) then local v93=0;while true do if ((14 -(9 + 5))==v93) then v21("Evocation");return true;end end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and  not aura_env.UsedMissiles and ((aura_env.PrevCast==v27.Evocation) or v8(v27.Evocation) or (aura_env.PrevCast==v27.ArcaneSurge) or v8(v27.ArcaneSurge) or v29.Opener) and (v37==(376 -(85 + 291)))) then local v65=1265 -(243 + 1022) ;while true do if (v65==(0 -0)) then v21("Arcane Missiles");return true;end end end if (v4(v27.ArcaneSurge) and ((v7(v27.TouchOfTheMagi)<(max(C_Spell.GetSpellInfo(v27.ArcaneSurge).castTime/1000 ,WeakAuras.gcdDuration()) + (v30 * (((v33==(4 + 0)) and (1181 -(1123 + 57))) or (0 + 0))))) or false)) then if ((aura_env.config[tostring(v27.ArcaneSurge)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Surge");elseif (aura_env.config[tostring(v27.ArcaneSurge)]~=true) then local v94=254 -(163 + 91) ;while true do if (v94==(1930 -(1869 + 61))) then v21("Arcane Surge");return true;end end end end end;local v48=function() if (v4(v27.ArcaneSurge) and (v7(v27.TouchOfTheMagi)<(5 + 10))) then if ((aura_env.config[tostring(v27.ArcaneSurge)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Surge");elseif (aura_env.config[tostring(v27.ArcaneSurge)]~=true) then v21("Arcane Surge");return true;end end if (v3(v27.Evocation) and v11(v27.ArcaneSurgeBuff) and ((v5("player",v27.ArcaneSurgeBuff)<=(38 -27)) or ((v11(v27.GloriousIncandescenceBuff) or v11(v27.IntuitionBuff)) and (v5("player",v27.ArcaneSurgeBuff)<=13)))) then if ((aura_env.config[tostring(v27.Evocation)]==true) and aura_env.FlagKTrigCD) then v22("Evocation");elseif (aura_env.config[tostring(v27.Evocation)]~=true) then local v95=0 -0 ;while true do if (0==v95) then v21("Evocation");return true;end end end end if (v3(v27.TouchOfTheMagi) and ((v11(v27.ArcaneSurgeBuff) and (v5("player",v27.ArcaneSurgeBuff)<=2.5) and true) or ((v7(v27.Evocation)>40) and (v7(v27.Evocation)<60) and true))) then if ((aura_env.config[tostring(v27.TouchOfTheMagi)]==true) and aura_env.FlagKTrigCD) then v22("Touch Of The Magi");elseif (aura_env.config[tostring(v27.TouchOfTheMagi)]~=true) then local v96=0;while true do if (v96==(0 + 0)) then v21("Touch Of The Magi");return true;end end end end end;local v49=function() if (v3(v27.ShiftingPower) and (((((C_Spell.GetSpellCharges(v27.ArcaneOrb).currentCharges==(0 -0)) and (v7(v27.ArcaneOrb)>(16 + 0))) or (v7(v27.TouchOfTheMagi)<(1494 -(1329 + 145)))) and (v11(v27.ArcaneSurgeBuff)==false) and (v11(v27.SiphonStormBuff)==false) and (v12(v27.TouchOfTheMagiDebuff)==false) and ( not v11(v27.IntuitionBuff) or (v11(v27.IntuitionBuff) and (v5("player",v27.IntuitionBuff)>3.5))) and (v7(v27.TouchOfTheMagi)>((983 -(140 + 831)) + ((1856 -(1409 + 441)) * v30)))) or (((aura_env.PrevCast==v27.ArcaneBarrage) or v8(v27.ArcaneBarrage)) and v20(v27.ShiftingShardsTalent) and ( not v11(v27.IntuitionBuff) or (v11(v27.IntuitionBuff) and (v5("player",v27.IntuitionBuff)>(721.5 -(15 + 703))))) and (v11(v27.ArcaneSurgeBuff) or v12(v27.TouchOfTheMagiDebuff) or (v7(v27.Evocation)<20)))) and (v18(28 + 32 ,v40)>10) and ((v5("player",v27.ArcaneTempoBuff)>(v30 * (440.5 -(262 + 176)))) or (v11(v27.ArcaneTempoBuff)==false))) then if ((aura_env.config[tostring(v27.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v22("Shifting Power");elseif (aura_env.config[tostring(v27.ShiftingPower)]~=true) then local v97=1721 -(345 + 1376) ;while true do if (v97==(688 -(198 + 490))) then v21("Shifting Power");return true;end end end end if (v3(v27.Supernova) and (v6("target",v27.TouchOfTheMagiDebuff)<=v30) and (v9(v27.UnerringProficiencyBuff)==(132 -102))) then if ((aura_env.config[tostring(v27.Supernova)]==true) and aura_env.FlagKTrigCD) then v22("Supernova");elseif (aura_env.config[tostring(v27.Supernova)]~=true) then local v98=0;while true do if (v98==0) then v21("Supernova");return true;end end end end if (v3(v27.ArcaneOrb) and (v33<(9 -5))) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then local v99=1206 -(696 + 510) ;while true do if (v99==(0 -0)) then v21("Arcane Orb");return true;end end end end if (v3(v27.ArcaneBarrage) and v11(v27.ArcaneTempoBuff) and (v5("player",v27.ArcaneTempoBuff)<=(v30 * (1264 -(1091 + 171))))) then local v66=0 + 0 ;while true do if (v66==(0 -0)) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and v11(v27.AetherAttunementBuff) and (v7(v27.TouchOfTheMagi)<(v30 * 3)) and v11(v27.ClearcastingBuff) and (v32>=(12 -8))) then local v67=374 -(123 + 251) ;while true do if (v67==0) then v21("Arcane Missiles");return true;end end end if (v3(v27.ArcaneBarrage) and (v33==(19 -15)) and (v9(v27.ArcaneHarmonyBuff)>=(718 -(208 + 490))) and (v31>=(1 + 3))) then local v68=0;while true do if (v68==(0 + 0)) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and ((v11(v27.ClearcastingBuff) and (v37==(836 -(660 + 176))) and (((v7(v27.TouchOfTheMagi)>(v30 * (1 + 6))) and (v7(v27.ArcaneSurge)>(v30 * 7))) or (v9(v27.ClearcastingBuff)>(203 -(14 + 188))) or  not v20(v27.MagisSparkTalent) or ((v7(v27.TouchOfTheMagi)<(v30 * (679 -(534 + 141)))) and (v9(v27.AetherAttunementBuff)==(0 + 0))) or (v32>=4))) or ((v18(60,v40)<(5 + 0)) and v11(v27.ClearcastingBuff)))) then local v69=0 + 0 ;while true do if (v69==(0 -0)) then v21("Arcane Missiles");return true;end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and IsPlayerSpell(v27.HighVoltageTalent) and ((v9(v27.ClearcastingBuff)>1) or (v11(v27.ClearcastingBuff) and v11(v27.AetherAttunementBuff))) and (v33<3)) then local v70=0;while true do if (v70==(0 -0)) then v21("Arcane Missiles");return true;end end end if (v3(v27.ArcaneBarrage) and (v11(v27.IntuitionBuff))) then local v71=0 -0 ;while true do if ((0 + 0)==v71) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneBlast) and (aura_env.NeedArcaneBlastSpark or v11(v27.LeydrinkerBuff))) then local v72=0 + 0 ;while true do if (v72==(396 -(115 + 281))) then v21("Arcane Blast");return true;end end end if (v3(v27.ArcaneBlast) and (v37>(0 -0)) and (v9(v27.ArcaneHarmonyBuff)<=16) and (v33==(4 + 0)) and (v39==(2 -1))) then local v73=0;while true do if (v73==0) then v21("Arcane Blast");return true;end end end if (v3(v27.ArcaneBarrage) and (((v35/v36) * 100)<(36 -26)) and (v11(v27.ArcaneSurgeBuff)==false) and (v7(v27.ArcaneOrb)<v30)) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneOrb) and (v39==(868 -(550 + 317))) and ((v7(v27.TouchOfTheMagi)<(8 -2)) or  not v20(v27.ChargedOrbTalent) or v11(v27.ArcaneSurgeBuff) or (v14(v27.ArcaneOrb)>(1.5 -0)))) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then local v100=0 -0 ;while true do if (v100==(285 -(134 + 151))) then v21("Arcane Orb");return true;end end end end if (v3(v27.ArcaneBarrage) and (v39>=2) and (v33==4) and (v7(v27.ArcaneOrb)<v30) and (v9(v27.ArcaneHarmonyBuff)<=((1673 -(970 + 695)) + ((19 -9) * (((v31>=4) and (1990 -(582 + 1408))) or (3 -2))))) and ((((aura_env.PrevCast==v27.ArcaneBarrage) or v8(v27.ArcaneBarrage) or (aura_env.PrevCast==v27.ArcaneOrb) or v8(v27.ArcaneOrb)) and (v37==1)) or (v37==(2 -0)) or (v37==0))) then local v74=0 -0 ;while true do if (v74==(1824 -(1195 + 629))) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneBarrage) and (v39>(2 -0)) and (v33==(245 -(187 + 54))) and  not (v31>=4)) then local v75=0;while true do if ((780 -(162 + 618))==v75) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneOrb) and (v39>1) and (v9(v27.ArcaneHarmonyBuff)<(15 + 5)) and (v11(v27.ArcaneSurgeBuff) or (v37>(0 + 0)) or (v39>=(14 -7))) and (v31>=(6 -2))) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then v21("Arcane Orb");return true;end end if (v3(v27.ArcaneBarrage) and v20(v27.HighVoltageTalent) and (v39>=(1 + 1)) and (v33==4) and v11(v27.AetherAttunementBuff) and v11(v27.ClearcastingBuff)) then local v76=0;while true do if ((1636 -(1373 + 263))==v76) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneOrb) and (v39>(1001 -(451 + 549))) and ((v39<3) or v11(v27.ArcaneSurgeBuff) or (v37>(0 + 0))) and (v31>=(5 -1))) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then v21("Arcane Orb");return true;end end if (v3(v27.ArcaneBarrage) and (v39>1) and (v33==(6 -2)) and (v7(v27.ArcaneOrb)<v30)) then local v77=0;while true do if (v77==(1384 -(746 + 638))) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneBarrage) and v20(v27.HighVoltageTalent) and (v33==(2 + 2)) and v11(v27.ClearcastingBuff) and (v37==(1 -0))) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneBarrage) and (v39<=(342 -(218 + 123))) and (v20(v27.OrbBarrageTalent) or ((((UnitHealth("target")/UnitHealthMax("target")) * 100)<(1616 -(1535 + 46))) and v20(v27.ArcaneBombardmentTalent))) and (v7(v27.ArcaneOrb)<v30) and (v33==(4 + 0)) and ((v7(v27.TouchOfTheMagi)>(v30 * (1 + 5))) or  not v20(v27.MagisSparkTalent)) and ((v37==(560 -(306 + 254))) or ((v37==(1 + 0)) and (v9(v27.ClearcastingBuff)==0))) and  not (v31>=4)) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneExplosion) and WeakAuras.CheckRange("target",19 -9 ,"<=") and (v39>(1468 -(899 + 568))) and (((v33<1) and  not v20(v27.HighVoltageTalent)) or ((v33<(2 + 1)) and ((v9(v27.ClearcastingBuff)==(0 -0)) or v20(v27.ReverberateTalent))))) then local v78=0;while true do if (v78==0) then v21("Arcane Explosion");return true;end end end if (v3(v27.ArcaneExplosion) and WeakAuras.CheckRange("target",613 -(268 + 335) ,"<=") and (v39==1) and (v33<(292 -(60 + 230))) and  not v11(v27.ClearcastingBuff)) then local v79=0;while true do if (v79==(572 -(426 + 146))) then v21("Arcane Explosion");return true;end end end if (v3(v27.ArcaneBarrage) and (((((UnitHealth("target")/UnitHealthMax("target")) * (12 + 88))<(1491 -(282 + 1174))) and (v6("target",v27.TouchOfTheMagiDebuff)<(v30 * (812.25 -(569 + 242)))) and (v6("target",v27.TouchOfTheMagiDebuff)>(0.75 -0))) or ((v5("player",v27.ArcaneSurgeBuff)<v30) and v11(v27.ArcaneSurgeBuff))) and (v33==(1 + 3)) and  not (v31>=4)) then local v80=1024 -(706 + 318) ;while true do if (v80==(1251 -(721 + 530))) then v21("Arcane Barrage");return true;end end end if v3(v27.ArcaneBlast) then v21("Arcane Blast");return true;end if v3(v27.ArcaneBarrage) then local v81=0;while true do if (v81==(1271 -(945 + 326))) then v21("Arcane Barrage");return true;end end end end;local v50=function() if (v3(v27.ShiftingPower) and (v11(v27.ArcaneSurgeBuff)==false) and (v11(v27.SiphonStormBuff)==false) and (v12(v27.TouchOfTheMagiDebuff)==false) and (v7(v27.Evocation)>(37 -22)) and (v7(v27.TouchOfTheMagi)>(9 + 1)) and (v18(760 -(271 + 429) ,v40)>10) and (v11(v27.ArcaneSoulBuff)==false) and ( not v11(v27.IntuitionBuff) or (v11(v27.IntuitionBuff) and (v5("player",v27.IntuitionBuff)>(3.5 + 0))))) then if ((aura_env.config[tostring(v27.ShiftingPower)]==true) and aura_env.FlagKTrigCD) then v22("Shifting Power");elseif (aura_env.config[tostring(v27.ShiftingPower)]~=true) then local v101=1500 -(1408 + 92) ;while true do if (v101==(1086 -(461 + 625))) then v21("Shifting Power");return true;end end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and (v37==(1288 -(993 + 295))) and v11(v27.ClearcastingBuff) and v11(v27.ArcaneSoulBuff) and (v5("player",v27.ArcaneSoulBuff)>(v30 * (4 -((v11(v27.ClearcastingBuff) and (1 + 0)) or (1171 -(418 + 753))))))) then local v82=0 + 0 ;while true do if (v82==(0 + 0)) then v21("Arcane Missiles");return true;end end end if (v3(v27.ArcaneBarrage) and (v11(v27.ArcaneSoulBuff))) then local v83=0 + 0 ;while true do if (v83==(0 + 0)) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and v11(v27.ClearcastingBuff) and v11(v27.ArcaneSurgeBuff) and (v5("player",v27.ArcaneSurgeBuff)<(v30 * (531 -(406 + 123))))) then v21("Arcane Missiles");return true;end if (v3(v27.ArcaneBarrage) and ((v11(v27.ArcaneTempoBuff) and (v5("player",v27.ArcaneTempoBuff)<(v30 + (v30 * (((v37==(1770 -(1749 + 20))) and (1 + 0)) or 0))))) or (v11(v27.IntuitionBuff) and (v5("player",v27.IntuitionBuff)<(v30 + (v30 * (((v37==(1323 -(1249 + 73))) and 1) or (0 + 0)))))))) then local v84=1145 -(466 + 679) ;while true do if (v84==(0 -0)) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneBarrage) and v20(v27.OrbBarrageTalent) and (v39>(2 -1)) and (v9(v27.ArcaneHarmonyBuff)>=(1918 -(106 + 1794))) and (((v39>(1 + 2)) and (v20(v27.ResonanceTalent) or v20(v27.HighVoltageTalent))) or (v37==(0 + 0)) or (v37==(2 -1)) or ((v37==(5 -3)) and (v9(v27.ClearcastingBuff)==(117 -(4 + 110)))))) then local v85=584 -(57 + 527) ;while true do if (v85==0) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and v11(v27.ClearcastingBuff) and (v32>=4) and v11(v27.AetherAttunementBuff) and (v7(v27.TouchOfTheMagi)<(v30 * ((1430 -(41 + 1386)) -((104.5 -(17 + 86)) * (((v39>3) and ( not v20(v27.TimeLoopTalent) or v20(v27.ResonanceTalent)) and (1 + 0)) or (0 -0))))))) then local v86=0;while true do if (v86==(0 -0)) then v21("Arcane Missiles");return true;end end end if (v3(v27.ArcaneBlast) and aura_env.NeedArcaneBlastSpark and (v33==4)) then v21("Arcane Blast");return true;end if (v3(v27.ArcaneBarrage) and v20(v27.HighVoltageTalent) and (v39>1) and (v33==(170 -(122 + 44))) and v11(v27.ClearcastingBuff) and (v37==(1 -0))) then local v87=0 -0 ;while true do if (v87==0) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneBarrage) and v20(v27.HighVoltageTalent) and (v39>1) and (v33==4) and v11(v27.ClearcastingBuff) and v11(v27.AetherAttunementBuff) and (v11(v27.GloriousIncandescenceBuff)==false) and (v11(v27.IntuitionBuff)==false)) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneBarrage) and (v39>(2 + 0)) and v20(v27.OrbBarrageTalent) and v20(v27.HighVoltageTalent) and  not aura_env.NeedArcaneBlastSpark and (v33==(1 + 3)) and (((UnitHealth("target")/UnitHealthMax("target")) * (202 -102))<35) and v20(v27.ArcaneBombardmentTalent) and ((v37>0) or ((v37==(65 -(30 + 35))) and (v9(v27.ClearcastingBuff)==(0 + 0))))) then v21("Arcane Barrage");return true;end if (v3(v27.ArcaneBarrage) and ((v39>2) or ((v39>(1258 -(1043 + 214))) and (((UnitHealth("target")/UnitHealthMax("target")) * (378 -278))<(1247 -(323 + 889))) and v20(v27.ArcaneBombardmentTalent))) and (v7(v27.ArcaneOrb)<v30) and (v33==(10 -6)) and (v7(v27.TouchOfTheMagi)>(v30 * (586 -(361 + 219)))) and ( not aura_env.NeedArcaneBlastSpark or  not v20(v27.MagisSparkTalent)) and (v37>0) and (v20(v27.HighVoltageTalent) or (( not v11(v27.LeydrinkerBuff) or ((((UnitHealth("target")/UnitHealthMax("target")) * (420 -(53 + 267)))<35) and v20(v27.ArcaneBombardmentTalent) and (v39>=(1 + 3)) and v20(v27.ResonanceTalent))) and (v37==(415 -(15 + 398)))) or ((v37==1) and  not v11(v27.ClearcastingBuff)))) then local v88=0;while true do if (v88==0) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneMissiles) and  not v26(v27.ArcaneMissiles) and v11(v27.ClearcastingBuff) and ((v20(v27.HighVoltageTalent) and (v33<4)) or ((v37==(982 -(18 + 964))) and ((v9(v27.ClearcastingBuff)>(3 -2)) or (v9(v27.SpellfireSpheresBuff)==(4 + 2)) or v11(v27.BurdenOfPowerBuff) or v11(v27.GloriousIncandescenceBuff) or v11(v27.IntuitionBuff))))) then local v89=0;while true do if (v89==0) then v21("Arcane Missiles");return true;end end end if (v3(v27.ArcaneOrb) and (v33<3)) then if ((aura_env.config[tostring(v27.ArcaneOrb)]==true) and aura_env.FlagKTrigCD) then v22("Arcane Orb");elseif (aura_env.config[tostring(v27.ArcaneOrb)]~=true) then local v102=0 + 0 ;while true do if (v102==(850 -(20 + 830))) then v21("Arcane Orb");return true;end end end end if (v3(v27.ArcaneBarrage) and (v11(v27.GloriousIncandescenceBuff) or v11(v27.IntuitionBuff))) then local v90=0;while true do if (v90==(0 + 0)) then v21("Arcane Barrage");return true;end end end if (v3(v27.ArcaneExplosion) and WeakAuras.CheckRange("target",136 -(116 + 10) ,"<=") and (v33<2) and (v39>1)) then local v91=0 + 0 ;while true do if (v91==(738 -(542 + 196))) then v21("Arcane Explosion");return true;end end end if v3(v27.ArcaneBlast) then v21("Arcane Blast");return true;end if v3(v27.ArcaneBarrage) then v21("Arcane Barrage");return true;end end;if (v3(v27.ArcaneBarrage) and (v18(128 -68 ,v40)<(1 + 1))) then v21("Arcane Barrage");return true;end if  not v29.SoulCd then if v47() then return true;end end if v29.SoulCd then if v48() then return true;end end if v20(v27.SpellfireSpheresTalent) then if v50() then return true;end end if  not v20(v27.SpellfireSpheresTalent) then if v49() then return true;end end if v3(v27.ArcaneBarrage) then local v62=0 + 0 ;while true do if (v62==(0 + 0)) then v21("Arcane Barrage");return true;end end end v21("Clear");v22("Clear");end;