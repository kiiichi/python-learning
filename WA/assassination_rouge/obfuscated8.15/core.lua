function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.FullGCD;local v24=aura_env.ids;aura_env.OutOfRange=false;local v26={};local v27=WeakAuras.GetNumSetItemsEquipped(2835 -(821 + 86) );local v28=UnitPower("player",Enum.PowerType.ComboPoints);local v29=GetUnitChargedPowerPoints("player");local v30=(v29 and  #v29) or (0 -0) ;local v31=UnitPowerMax("player",Enum.PowerType.ComboPoints);local v32=UnitPower("player",Enum.PowerType.Energy);local v33=UnitPowerMax("player",Enum.PowerType.Energy);local v34=((v28>(1883 -(1668 + 215))) and (v28 + (math.min(v30,1 + 0 ) * (2 + ((IsPlayerSpell(v24.ForcedInductionTalent) and (3 -2)) or (0 + 0)))))) or 0 ;local v35=((aura_env.Envenom1<v2) and (518 -(114 + 404))) or (aura_env.Envenom1-v2) ;local v36=v11(v24.SubterfugeBuff) or v11(v24.StealthBuff) ;local v37=v11(392891 -(106 + 382) ) or v11(392812 -(306 + 105) ) ;local v38=GetPowerRegen();local v39=2/((2 -1) + ((427.01 -(166 + 261)) * UnitSpellHaste("player"))) ;local v40=507 -(289 + 218) ;local v41=1344 -(1213 + 131) ;local v42={703,1141 + 802 ,1281324 -920498 ,360830};local v43={468 + 8212 ,2818,383414};local v44=function(v70) local v71=0;while true do if (v71==0) then for v99,v100 in ipairs(v43) do if WA_GetUnitDebuff(v70,v100,"PLAYER") then return true;end end return false;end end end;local v45=895 -(261 + 624) ;local v46=0;local v47=0 -0 ;local v48=1080 -(1020 + 60) ;local v49=0;local v50=0;local v51=1423 -(630 + 793) ;local v52=0;for v72=3 -2 ,189 -149  do local v73=0 + 0 ;local v74;while true do if (v73==0) then v74="nameplate"   .. v72 ;if (UnitExists(v74) and  not UnitIsFriend("player",v74) and WeakAuras.CheckRange(v74,v45,"<=")) then v46=v46 + (3 -2) ;if WA_GetUnitDebuff(v74,v24.Garrote,"PLAYER") then v47=v47 + 1 ;end if WA_GetUnitDebuff(v74,v24.Rupture,"PLAYER") then v48=v48 + (1748 -(760 + 987)) ;end if (v6(v74,v24.Garrote)<12) then v49=v49 + (1914 -(1789 + 124)) ;end if (aura_env.GarroteSnapshots[UnitGUID(v74)]==nil) then aura_env.GarroteSnapshots[UnitGUID(v74)]=0;end if (aura_env.GarroteSnapshots[UnitGUID(v74)]<=(767 -(745 + 21))) then v50=v50 + 1 + 0 ;end if (v19(v24.Garrote,v74,"HARMFUL|PLAYER") and (aura_env.GarroteSnapshots[UnitGUID(v74)]<=(2 -1))) then v51=v51 + (3 -2) ;end if v19(v24.Rupture,v74,"HARMFUL|PLAYER") then v52=v52 + 1 ;end if v44(v74) then v40=v40 + 1 + 0 ;for v122,v123 in ipairs(v42) do if WA_GetUnitDebuff(v74,v123,"PLAYER") then v41=v41 + 1 + 0 ;end end end end break;end end end if  not (v47<v46) then WeakAuras.ScanEvents("K_NEARBY_GARROTED_SAT");end if  not (v48<v46) then WeakAuras.ScanEvents("K_NEARBY_RUPTURED_SAT");end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v46);v38=v38 + ((v41 * (1062 -(87 + 968)))/v39) ;if IsPlayerSpell(v24.DashingScoundrelTalent) then v38=v38 + ((0.9 * v40 * (GetCritChance()/(440 -340)))/v39) ;end WeakAuras.ScanEvents("K_GARROTE_DATA",v47,v46);WeakAuras.ScanEvents("K_RUPTURE_DATA",v48,v46);if (C_Item.IsItemInRange(16114,"target")==false) then aura_env.OutOfRange=true;end v26.EffectiveSpendCp=max(v31-(2 + 0) ,(11 -6) * ((IsPlayerSpell(v24.HandOfFateTalent) and (1414 -(447 + 966))) or (0 -0)) );v26.SingleTarget=v46<=(1818 -(1703 + 114)) ;v26.RegenSaturated=v38>(30 + ((711 -(376 + 325)) * ((IsPlayerSpell(v24.DashingScoundrelTalent) and (0 -0)) or (2 -1)))) ;v26.InCooldowns=v12(v24.Kingsbane) or v12(v24.ShivDebuff) ;v26.UpperLimitEnergy=((v32/v33) * (29 + 71))>=((80 -(10 * ((IsPlayerSpell(v24.ViciousVenomsTalent) and (4 -2)) or (14 -(9 + 5))))) -(30 * ((IsPlayerSpell(v24.AmplifyingPoisonTalent) and (377 -(85 + 291))) or 0))) ;v26.CdSoon=IsPlayerSpell(v24.KingsbaneTalent) and (v7(v24.Kingsbane)<(1268 -(243 + 1022))) and  not v3(v24.Kingsbane) ;v26.NotPooling=v26.InCooldowns or v11(v24.DarkestNightBuff) or v26.UpperLimitEnergy or (v18(228 -168 ,v45)<=20) ;v26.ScentEffectiveMaxStacks=min(v46 * ((IsPlayerSpell(v24.ScentOfBloodTalent) and (2 + 0)) or (1180 -(1123 + 57))) * (2 + 0) ,20);v26.ScentSaturation=v9(v24.ScentOfBloodBuff)>=v26.ScentEffectiveMaxStacks ;local v62={};if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then local v97=254 -(163 + 91) ;while true do if (v97==1) then v21("Clear",nil);return;end if (v97==(1930 -(1869 + 61))) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v97=1 + 0 ;end end end end if (v3(v24.ThistleTea) and (( not v11(v24.ThistleTeaBuff) and (v6("target",v24.ShivDebuff)>=6) and  not v12(v24.KingsbaneDebuff)) or ( not v11(v24.ThistleTeaBuff) and v12(v24.KingsbaneDebuff) and (v6("target",v24.KingsbaneDebuff)<=(20 -14))) or ( not v11(v24.ThistleTeaBuff) and (v18(92 -32 ,v45)<=(C_Spell.GetSpellCharges(v24.ThistleTea).currentCharges * (1 + 5)))))) then v62.ThistleTea=true;end if (v3(v24.ColdBlood) and (v7(v24.Deathmark)>(13 -3)) and  not v11(v24.DarkestNightBuff) and (v34>=v26.EffectiveSpendCp) and (v26.NotPooling or (v10(v24.AmplifyingPoisonDebuff)>=(19 + 1)) or  not (v46<(1476 -(1329 + 145)))) and  not v11(v24.VanishBuff) and ( not v3(v24.Kingsbane) or  not (v46<2)) and  not v3(v24.Deathmark)) then v62.ColdBlood=true;end if (v3(v24.ColdBlood) and (((v9(v24.FateboundCoinHeadsBuff)>(971 -(140 + 831))) and (v9(v24.FateboundCoinTailsBuff)>0)) or (v12(v24.ShivDebuff) and (((v7(v24.Deathmark)>(1900 -(1409 + 441))) and  not ((v27>=(722 -(15 + 703))) and IsPlayerSpell(v24.HandOfFateTalent))) or (v12(v24.KingsbaneDebuff) and (v27>=(2 + 2)) and IsPlayerSpell(v24.HandOfFateTalent)) or ( not IsPlayerSpell(v24.InevitabileEndTalent) and (v34>=v26.EffectiveSpendCp)))))) then v62.ColdBlood=true;end WeakAuras.ScanEvents("K_TRIGED_EXTRA",v62,nil);local v63=function() local v75=438 -(262 + 176) ;while true do if (v75==1) then if (v3(v24.Garrote) and (aura_env.config['PerformanceMode']==true) and ((v31-v34)>=(1722 -(345 + 1376))) and (v51>(688 -(198 + 490))) and  not v26.RegenSaturated and  not IsPlayerSpell(v24.DashingScoundrelTalent)) then local v107=0 -0 ;while true do if (v107==(0 -0)) then v20("Garrote","TAB");return true;end end end if (v3(v24.Garrote) and ((v31-v34)>=(1207 -(696 + 510))) and ( not v12(v24.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(1 -0))) and v19(v24.Garrote) and  not v26.RegenSaturated and (v46<=(1265 -(1091 + 171))) and  not IsPlayerSpell(v24.DashingScoundrelTalent) and (((v17(0 + 0 ,188 -128 ) -v6("target",v24.Garrote))>12) or IsPlayerSpell(v24.SuddenDemiseTalent))) then v20("Garrote");return true;end v75=6 -4 ;end if (v75==(377 -(123 + 251))) then if (v3(v24.Garrote) and v19(v24.Garrote) and ((v31-v34)==1) and ( not v12(v24.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(4 -3)) or ((v6("target",v24.Garrote)<=2) and (v46>=(701 -(208 + 490))))) and (v6("target",v24.Garrote)<=((1 + 1) * (1 + 1))) and (v46>=(839 -(660 + 176))) and (((v17(0 + 0 ,60) -v6("target",v24.Garrote))>(206 -(14 + 188))) or IsPlayerSpell(v24.SuddenDemiseTalent)) and (abs(v5("player",v24.MasterAssassinBuff))==(675 -(534 + 141)))) then local v108=0 + 0 ;while true do if (v108==0) then v20("Garrote");return true;end end end break;end if (v75==(0 + 0)) then v26.DotFinisherCondition=v34>=v26.EffectiveSpendCp ;if (v3(v24.CrimsonTempest) and (v46>=(2 + 0)) and v19(v24.CrimsonTempest) and v26.DotFinisherCondition and (((v17(0 -0 ,60) -v6("target",v24.CrimsonTempest))>6) or IsPlayerSpell(v24.SuddenDemiseTalent)) and  not v11(v24.DarkestNightBuff)) then v20("Crimson Tempest");return true;end v75=1 -0 ;end if (v75==2) then if (v3(v24.Rupture) and (aura_env.config['PerformanceMode']==true) and v26.DotFinisherCondition and (v52>(0 -0)) and ( not v12(v24.Kingsbane) or v11(v24.ColdBlood)) and  not v26.RegenSaturated and (IsPlayerSpell(v24.ScentOfBloodTalent) or v11(v24.IndiscriminateCarnageBuff) or true) and true and  not v11(v24.DarkestNightBuff)) then local v109=0 + 0 ;while true do if (v109==(0 + 0)) then v20("Rupture","TAB");return true;end end end if (v3(v24.Rupture) and v26.DotFinisherCondition and v19(v24.Rupture) and ( not v12(v24.Kingsbane) or v11(v24.ColdBlood)) and ( not v26.RegenSaturated or  not v26.ScentSaturation) and ((v17(0,456 -(115 + 281) )>((15 -8) + ((IsPlayerSpell(v24.DashingScoundrelTalent) and 5) or (0 + 0)) + ((v26.RegenSaturated and (14 -8)) or 0))) or IsPlayerSpell(v24.SuddenDemiseTalent)) and  not v11(v24.DarkestNightBuff)) then v20("Rupture");return true;end v75=3;end end end;local v64=function() if (v3(v24.Garrote) and ((v31-v34)>=(3 -2)) and ( not v12(v24.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(868 -(550 + 317)))) and v19(v24.Garrote) and (((v17(0 -0 ,84 -24 ) -v6("target",v24.Garrote))>(33 -21)) or IsPlayerSpell(v24.SuddenDemiseTalent))) then v20("Garrote");return true;end if (v3(v24.Rupture) and (v34>=v26.EffectiveSpendCp) and v19(v24.Rupture) and (((v17(0,60) -v6("target",v24.Rupture))>((289 -(134 + 151)) + (((IsPlayerSpell(v24.DashingScoundrelTalent) and (1666 -(970 + 695))) or 0) * (9 -4)) + (((v26.RegenSaturated and (1991 -(582 + 1408))) or 0) * (20 -14)))) or IsPlayerSpell(v24.SuddenDemiseTalent)) and ( not v11(v24.DarkestNightBuff) or (IsPlayerSpell(v24.CausticSpatterTalent) and  not v12(v24.CausticSpatterDebuff)))) then v20("Rupture");return true;end if (v3(v24.CrimsonTempest) and (v34>=v26.EffectiveSpendCp) and v19(v24.CrimsonTempestDebuff) and ( not v12(v24.CrimsonTempestDebuff) or (aura_env.CrimsonTempestSnapshots[UnitGUID("target")]<=v46)) and  not v11(v24.DarkestNightBuff) and  not IsPlayerSpell(v24.AmplifyingPoisonTalent) and (v46<=1)) then local v88=0;while true do if (v88==(0 -0)) then v20("Crimson Tempest");return true;end end end end;local v65=function() v26.UseCausticFiller=IsPlayerSpell(v24.CausticSpatterTalent) and v12(v24.Rupture) and ( not v12(v24.CausticSpatterDebuff) or (v6("target",v24.CausticSpatterDebuff)<=(7 -5))) and ((v31-v34)>=(1825 -(1195 + 629))) and  not (v46<(2 -0)) ;if (v3(v24.Mutilate) and v26.UseCausticFiller) then v20("Mutilate");return true;end if (v3(v24.Ambush) and v26.UseCausticFiller) then local v89=241 -(187 + 54) ;while true do if ((780 -(162 + 618))==v89) then v20("Ambush");return true;end end end if (v3(v24.Envenom) and  not v11(v24.DarkestNightBuff) and (v34>=v26.EffectiveSpendCp) and (v26.NotPooling or (v10(v24.AmplifyingPoisonDebuff)>=20) or  not (v46<(2 + 0)))) then local v90=0;while true do if (v90==(0 + 0)) then v20("Envenom");return true;end end end if (v3(v24.Envenom) and v11(v24.DarkestNightBuff) and (v34>=v31)) then local v91=0 -0 ;while true do if (0==v91) then v20("Envenom");return true;end end end v26.UseFiller=((v28<=v26.EffectiveSpendCp) and  not v26.CdSoon) or v26.NotPooling or  not (v46<(2 -0)) ;v26.FokTargetCount=(v11(v24.ClearTheWitnessesBuff) and (v46>=((1 + 1) -(((v11(v24.LingeringDarknessBuff) or  not IsPlayerSpell(v24.ViciousVenomsTalent)) and 1) or (1636 -(1373 + 263)))))) or (v46>=(((1003 -(451 + 549)) -((IsPlayerSpell(v24.MomentumOfDespairTalent) and IsPlayerSpell(v24.ThrownPrecisionTalent) and (1 + 0)) or (0 -0))) + ((IsPlayerSpell(v24.ViciousVenomsTalent) and (1 -0)) or (1384 -(746 + 638))) + ((IsPlayerSpell(v24.BlindsideTalent) and (1 + 0)) or (0 -0)))) ;if (v3(v24.FanOfKnives) and v11(v24.DarkestNightBuff) and (v34==6) and ( not IsPlayerSpell(v24.ViciousVenomsTalent) or (v46>=(343 -(218 + 123))))) then v20("Fan of Knives");return true;end if (v3(v24.FanOfKnives) and v26.UseFiller and v26.FokTargetCount) then if v26.NotPooling then local v101=1581 -(1535 + 46) ;while true do if ((0 + 0)==v101) then v20("Fan of Knives");return true;end end else local v102=0;while true do if (v102==0) then v20("Fan of Knives","Not Good");return true;end end end end if (v3(v24.Ambush) and v26.UseFiller and (v11(v24.BlindsideBuff) or v36) and ( not v12(v24.Kingsbane) or (v12(v24.Deathmark)==false) or v11(v24.BlindsideBuff))) then if v26.NotPooling then v20("Ambush");return true;else v20("Ambush","Not Good");return true;end end if (v3(v24.Mutilate) and  not v12(v24.DeadlyPoisonDebuff) and  not v12(v24.AmplifyingPoisonDebuff) and v26.UseFiller and (v46==(1 + 1))) then if v26.NotPooling then local v103=560 -(306 + 254) ;while true do if (v103==0) then v20("Mutilate");return true;end end else local v104=0 + 0 ;while true do if (v104==0) then v20("Mutilate","Not Good");return true;end end end end if (v3(v24.Mutilate) and v26.UseFiller) then if v26.NotPooling then local v105=0 -0 ;while true do if (v105==(1467 -(899 + 568))) then v20("Mutilate");return true;end end else local v106=0;while true do if (v106==(0 + 0)) then v20("Mutilate","Not Good");return true;end end end end end;local v66=function() v26.ShivCondition= not v12(v24.ShivDebuff) and v12(v24.Garrote) and v12(v24.Rupture) and (v46<=(12 -7)) ;v26.ShivKingsbaneCondition=IsPlayerSpell(v24.Kingsbane) and v11(v24.Envenom) and v26.ShivCondition ;if (v3(v24.Shiv) and IsPlayerSpell(v24.LightweightShivTalent) and v26.ShivKingsbaneCondition and (v3(v24.Deathmark) or (v7(v24.Deathmark)<=1)) and (v3(v24.Kingsbane) or (v7(v24.Kingsbane)<=2)) and (v27>=(605 -(268 + 335))) and IsPlayerSpell(v24.HandOfFateTalent)) then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v24.Shiv)]~=true) then local v110=290 -(60 + 230) ;while true do if (v110==(572 -(426 + 146))) then v20("Shiv");return true;end end end end if (v3(v24.Shiv) and IsPlayerSpell(v24.ArterialPrecisionTalent) and  not v12(v24.ShivDebuff) and v12(v24.GarroteDebuff) and v12(v24.RuptureDebuff) and (v46>=(1 + 3)) and v12(v24.CrimsonTempestDebuff) and (((((UnitHealth("target")/UnitHealthMax("target")) * (1556 -(282 + 1174)))<=35) and IsPlayerSpell(v24.ZoldyckRecipeTalent)) or (v14(v24.Shiv)>=(812.9 -(569 + 242))))) then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v24.Shiv)]~=true) then v20("Shiv");return true;end end if (v3(v24.Shiv) and  not IsPlayerSpell(v24.LightweightShivTalent) and v26.ShivKingsbaneCondition and ((v12(v24.Kingsbane) and (v6("target",v24.Kingsbane)<((22 -14) + ((1 + 2) * (((v27>=4) and IsPlayerSpell(v24.DeathstalkersMarkTalent) and (1025 -(706 + 318))) or (1251 -(721 + 530))))))) or ( not v12(v24.Kingsbane) and (v7(v24.Kingsbane)>=(1291 -(945 + 326))))) and ( not IsPlayerSpell(v24.CrimsonTempest) or (v46<2) or v12(v24.CrimsonTempest))) then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v24.Shiv)]~=true) then v20("Shiv");return true;end end if (v3(v24.Shiv) and (v10(v24.DeathstalkersMarkDebuff)<=2) and (v34>=v26.EffectiveSpendCp) and v11(v24.LingeringDarknessBuff)) then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v24.Shiv)]~=true) then local v111=0;while true do if (v111==(0 -0)) then v20("Shiv");return true;end end end end if (v3(v24.Shiv) and IsPlayerSpell(v24.LightweightShivTalent) and v26.ShivKingsbaneCondition and ((v12(v24.Kingsbane) and (v6("target",v24.KingsbaneDebuff)<(8 + 0 + (3 * (((v27>=(704 -(271 + 429))) and IsPlayerSpell(v24.DeathstalkersMarkTalent) and 1) or 0)))) and (v6("target",v24.KingsbaneDebuff)>(4 + 0))) or ((v7(v24.Kingsbane)<=(1501 -(1408 + 92))) and (v14(v24.Shiv)>=(1087.7 -(461 + 625)))))) then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v24.Shiv)]~=true) then v20("Shiv");return true;end end if (v3(v24.Shiv) and v12(v24.DeathmarkDebuff) and IsPlayerSpell(v24.ArterialPrecisionTalent) and  not v12(v24.ShivDebuff) and v12(v24.GarroteDebuff) and v12(v24.RuptureDebuff)) then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v24.Shiv)]~=true) then local v112=1288 -(993 + 295) ;while true do if (v112==(0 + 0)) then v20("Shiv");return true;end end end end if (v3(v24.Shiv) and  not v12(v24.DeathmarkDebuff) and  not IsPlayerSpell(v24.KingsbaneTalent) and v26.ShivCondition and (v12(v24.CrimsonTempestDebuff) or IsPlayerSpell(v24.AmplifyingPoisonTalent)) and ((((((IsPlayerSpell(v24.LightweightShivTalent) and 1) or (1171 -(418 + 753))) + 1) -v14(v24.Shiv)) * (12 + 18))<v7(v24.Deathmark))) then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v24.Shiv)]~=true) then v20("Shiv");return true;end end if (v3(v24.Shiv) and  not IsPlayerSpell(v24.Kingsbane) and  not IsPlayerSpell(v24.ArterialPrecisionTalent) and v26.ShivCondition and ( not IsPlayerSpell(v24.CrimsonTempest) or (v46<(1 + 1)) or v12(v24.CrimsonTempest))) then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v24.Shiv)]~=true) then local v113=0 + 0 ;while true do if (v113==(0 + 0)) then v20("Shiv");return true;end end end end if (v3(v24.Shiv) and (v18(589 -(406 + 123) ,v45)<=(C_Spell.GetSpellCharges(v24.Shiv).currentCharges * ((1777 -(1749 + 20)) + ((1 + 1) * (((v27>=(1326 -(1249 + 73))) and IsPlayerSpell(v24.DeathstalkersMarkTalent) and (1 + 0)) or (1145 -(466 + 679)))))))) then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v24.Shiv)]~=true) then v20("Shiv");return true;end end end;local v67=function() if (v3(v24.Ambush) and  not v12(v24.DeathstalkersMarkDebuff) and IsPlayerSpell(v24.DeathstalkersMarkTalent) and (v34<v26.EffectiveSpendCp) and (v12(v24.Rupture) or (v46<=(2 -1)) or  not IsPlayerSpell(v24.SubterfugeTalent))) then v20("Ambush");return true;end if (v3(v24.Shiv) and IsPlayerSpell(v24.KingsbaneTalent) and v12(v24.KingsbaneDebuff) and (v6("target",v24.KingsbaneDebuff)<(22 -14)) and ( not v12(v24.ShivDebuff) or (v6("target",v24.ShivDebuff)<(1901 -(106 + 1794)))) and v11(v24.EnvenomBuff)) then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v24.Shiv)]~=true) then v20("Shiv");return true;end end if (v3(v24.Envenom) and (v34>=v26.EffectiveSpendCp) and v12(v24.Kingsbane) and (v5("player",v24.Envenom)<=(1 + 2)) and (v12(v24.DeathstalkersMarkDebuff) or v11(v24.ColdBlood) or (v11(v24.DarkestNightBuff) and (v34>=7)))) then local v92=0 + 0 ;while true do if (v92==0) then v20("Envenom");return true;end end end if (v3(v24.Envenom) and (v34>=v26.EffectiveSpendCp) and (v5("player",v24.MasterAssassinBuff)< -1) and (v46<2) and (v12(v24.DeathstalkersMarkDebuff) or v11(v24.ColdBlood) or (v11(v24.DarkestNightBuff) and (v34>=(20 -13))))) then local v93=0 -0 ;while true do if (v93==0) then v20("Envenom");return true;end end end if (v3(v24.CrimsonTempest) and (v46>=(121 -(4 + 110))) and (v34>=v26.EffectiveSpendCp) and (v6("target",v24.CrimsonTempest)<=2) and  not v11(v24.DarkestNightBuff) and v26.RegenSaturated and v26.ScentSaturation and (((v17(584 -(57 + 527) ,1487 -(41 + 1386) ) -v6("target",v24.CrimsonTempest))>(109 -(17 + 86))) or IsPlayerSpell(v24.SuddenDemiseTalent))) then local v94=0;while true do if (v94==(0 + 0)) then v20("Crimson Tempest");return true;end end end v26.DeathmarkConditionInStealthed=v12(v24.Rupture) and (v26.DeathmarkKingsbaneCondition or ((v46>(1 -0)) and (v34>=v26.EffectiveSpendCp) and v26.ScentSaturation) or ( not IsPlayerSpell(v24.KingsbaneTalent) and v12(v24.CrimsonTempest))) and  not v12(v24.Deathmark) and ( not IsPlayerSpell(v24.MasterAssassinTalent) or v12(v24.Garrote)) ;if (v3(v24.Deathmark) and ((v26.DeathmarkConditionInStealthed and (v17(0 -0 ,226 -(122 + 44) )>=10)) or (v18(103 -43 ,v45)<=(66 -46)))) then if ((aura_env.config[tostring(v24.Deathmark)]==true) and aura_env.FlagKTrigCD) then v21("Deathmark","Quick");elseif (aura_env.config[tostring(v24.Deathmark)]~=true) then local v114=0;while true do if ((0 + 0)==v114) then v20("Deathmark");return true;end end end end if v66() then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v24.Shiv)]~=true) then return true;end end if (v3(v24.Kingsbane) and (((v12(v24.ShivDebuff) or (v7(v24.Shiv)<6)) and (v11(v24.Envenom) or (v46>(1 + 0))) and v12(v24.Deathmark)) or (v18(60,v45)<=(30 -15)))) then if ((aura_env.config[tostring(v24.Kingsbane)]==true) and aura_env.FlagKTrigCD) then v21("Kingsbane");elseif (aura_env.config[tostring(v24.Kingsbane)]~=true) then local v115=0;while true do if (v115==(65 -(30 + 35))) then v20("Kingsbane");return true;end end end end if (v3(v24.Kingsbane) and (((v12(v24.ShivDebuff) or (v7(v24.Shiv)<6)) and (v11(v24.Envenom) or (v46>(1 + 0))) and (v7(v24.Deathmark)>=(1307 -(1043 + 214))) and  not v12(v24.Deathmark)) or (v18(226 -166 ,v45)<=15))) then if ((aura_env.config[tostring(v24.Kingsbane)]==true) and aura_env.FlagKTrigCD) then v21("Kingsbane","Quick");elseif (aura_env.config[tostring(v24.Kingsbane)]~=true) then v20("Kingsbane");return true;end end if (v3(v24.Rupture) and (v34>=v26.EffectiveSpendCp) and v11(v24.IndiscriminateCarnageBuff) and (v52>0) and ((IsPlayerSpell(v24.CausticSpatterTalent) and  not v12(v24.CausticSpatterDebuff) and  not v12(v24.RuptureDebuff)) or  not v11(v24.DarkestNightBuff)) and ( not v26.RegenSaturated or  not v26.ScentSaturation or (( not IsPlayerSpell(v24.DashingScoundrelTalent) or  not IsPlayerSpell(v24.PoisonBombTalent)) and v11(v24.IndiscriminateCarnageBuff) and  not v12(v24.Rupture)) or (v48<v46)) and ((v17(0,1272 -(323 + 889) )>15) or IsPlayerSpell(v24.SuddenDemiseTalent))) then v20("Rupture");return true;end if (v3(v24.Garrote) and v37 and ((v51>(0 -0)) or  not v12(v24.Garrote) or (v50>0) or (v11(v24.IndiscriminateCarnageBuff) and (v47<v46))) and  not (v46<(582 -(361 + 219))) and (((v17(320 -(53 + 267) ,14 + 46 ) -v6("target",v24.Garrote))>2) or IsPlayerSpell(v24.SuddenDemiseTalent)) and ((v31-v34)>((415 -(15 + 398)) -((v11(v24.DarkestNightBuff) and (984 -(18 + 964))) or (0 -0))))) then local v95=0 + 0 ;while true do if (v95==(0 + 0)) then v20("Garrote");return true;end end end if (v3(v24.Garrote) and v37 and ( not v12(v24.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=1) or v19(v24.Garrote)) and ((v31-v34)>=((851 -(20 + 830)) + ((2 + 0) * ((IsPlayerSpell(v24.ShroudedSuffocationTalent) and (127 -(116 + 10))) or (0 + 0)))))) then local v96=738 -(542 + 196) ;while true do if (v96==(0 -0)) then v20("Garrote");return true;end end end end;local v68=function() if (v3(v24.Vanish) and ((v11(v24.ColdBloodBuff) and (v9(v24.FateboundCoinTailsBuff)>=(1 + 0)) and (v9(v24.FateboundCoinHeadsBuff)>=1)) or ( not v11(v24.FateboundLuckyCoinBuff) and (v34>=v26.EffectiveSpendCp) and ((v9(v24.FateboundCoinTailsBuff)>=(3 + 2)) or (v9(v24.FateboundCoinHeadsBuff)>=5))))) then if ((aura_env.config[tostring(v24.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v24.Vanish)]~=true) then local v116=0 + 0 ;while true do if (0==v116) then v20("Vanish");return true;end end end end if (v3(v24.Vanish) and  not IsPlayerSpell(v24.MasterAssassinTalent) and  not IsPlayerSpell(v24.IndiscriminateCarnageTalent) and IsPlayerSpell(v24.ImprovedGarroteTalent) and v3(v24.Garrote) and ( not v12(v24.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(2 -1)) or v19(v24.Garrote)) and (v12(v24.Deathmark) or (v7(v24.Deathmark)<4)) and ((v31-v34)>=min(v46,4))) then if ((aura_env.config[tostring(v24.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v24.Vanish)]~=true) then local v117=0 -0 ;while true do if (v117==(1551 -(1126 + 425))) then v20("Vanish");return true;end end end end if (v3(v24.Vanish) and IsPlayerSpell(v24.IndiscriminateCarnageTalent) and IsPlayerSpell(v24.ImprovedGarroteTalent) and v3(v24.Garrote) and ( not v12(v24.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(406 -(118 + 287))) or v19(v24.Garrote)) and (v46>(7 -5)) and ((v17(0,1181 -(118 + 1003) ) -v6("target",v24.Vanish))>(43 -28))) then if ((aura_env.config[tostring(v24.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v24.Vanish)]~=true) then local v118=377 -(142 + 235) ;while true do if (v118==0) then v20("Vanish");return true;end end end end if (v3(v24.Vanish) and IsPlayerSpell(v24.MasterAssassinTalent) and v12(v24.Deathmark) and (v6("target",v24.Kingsbane)<=(6 + ((13 -10) * ((IsPlayerSpell(v24.SubterfugeTalent) and (1 + 1)) or (977 -(553 + 424))))))) then if ((aura_env.config[tostring(v24.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish","Quick");elseif (aura_env.config[tostring(v24.Vanish)]~=true) then local v119=0;while true do if (v119==(0 -0)) then v20("Vanish");return true;end end end end if (v3(v24.Vanish) and IsPlayerSpell(v24.ImprovedGarroteTalent) and v3(v24.Garrote) and ( not v12(v24.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(1 + 0)) or v19(v24.Garrote)) and (v12(v24.Deathmark))) then if ((aura_env.config[tostring(v24.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v24.Vanish)]~=true) then v20("Vanish");return true;end end end;local v69=function() v26.DeathmarkKingsbaneCondition=(v7(v24.Kingsbane)<=2) and v11(v24.EnvenomBuff) ;v26.DeathmarkCondition=v12(v24.RuptureDebuff) and (v26.DeathmarkKingsbaneCondition or ((v46>(1 + 0)) and (v5("player",v24.SliceAndDiceBuff)>5)) or ( not IsPlayerSpell(v24.KingsbaneTalent) and v12(v24.CrimsonTempestDebuff))) and  not v12(v24.DeathmarkDebuff) ;if (v11(v24.DarkestNightBuff) and (( not v11(v24.DarkestNightBuff) and (v46<2)) or (v11(v24.DarkestNightBuff) and (v46>(1 + 0))))) then if v66() then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v24.Shiv)]~=true) then return true;end end end if (v3(v24.Deathmark) and ((v26.DeathmarkCondition and (v17(0 + 0 ,35 + 25 )>=(21 -11))) or (v18(60,v45)<=20))) then if ((aura_env.config[tostring(v24.Deathmark)]==true) and aura_env.FlagKTrigCD) then v21("Deathmark");elseif (aura_env.config[tostring(v24.Deathmark)]~=true) then local v120=0 -0 ;while true do if (v120==0) then v20("Deathmark");return true;end end end end if ( not v11(v24.DarkestNightBuff) and (v46>1)) then if v66() then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v24.Shiv)]~=true) then return true;end end end if (v3(v24.Kingsbane) and (((v12(v24.ShivDebuff) or (v7(v24.Shiv)<6)) and (v11(v24.Envenom) or (v46>1)) and ((v7(v24.Deathmark)>=((111 -61) -((5 + 10) * (((v27>=(19 -15)) and IsPlayerSpell(v24.HandOfFateTalent) and (754 -(239 + 514))) or (0 + 0))))) or v12(v24.Deathmark))) or (v18(60,v45)<=(1344 -(797 + 532))))) then if ((aura_env.config[tostring(v24.Kingsbane)]==true) and aura_env.FlagKTrigCD) then v21("Kingsbane");elseif (aura_env.config[tostring(v24.Kingsbane)]~=true) then v20("Kingsbane");return true;end end if (( not v36 and (abs(v5("player",v24.MasterAssassinBuff))==0)) or (IsPlayerSpell(v24.IndiscriminateCarnageTalent) and  not IsPlayerSpell(v24.ImprovedGarroteTalent) and  not v26.ScentSaturation and (v48<v46) and (v46>=3))) then if v68() then if ((aura_env.config[tostring(v24.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v24.Shiv)]~=true) then return true;end end end end;if (v36 or v11(v24.IndiscriminateCarnageBuff) or v37 or (abs(v5("player",v24.MasterAssassinBuff))>(0 + 0))) then if v67() then return true;end end if v69() then return true;end if v64() then return true;end if  not (v46<(1 + 1)) then if v63() then return true;end end if v65() then return true;end v20("Clear");end;