function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.FullGCD;local v24=aura_env.GetRemainingStealthDuration;local v25=aura_env.ids;aura_env.OutOfRange=false;local v27={};local v28=WeakAuras.GetNumSetItemsEquipped(1928);local v29=UnitPower("player",Enum.PowerType.ComboPoints);local v30=GetUnitChargedPowerPoints("player");local v31=(v30 and  #v30) or (0 + 0) ;local v32=UnitPowerMax("player",Enum.PowerType.ComboPoints);local v33=UnitPower("player",Enum.PowerType.Energy);local v34=UnitPowerMax("player",Enum.PowerType.Energy);local v35=((v29>(1138 -(116 + 1022))) and (v29 + (math.min(v31,4 -3 ) * (2 + 0 + ((IsPlayerSpell(v25.ForcedInductionTalent) and 1) or (0 -0)))))) or (0 -0) ;local v36=((aura_env.Envenom1<v2) and 0) or (aura_env.Envenom1-v2) ;local v37=v11(v25.SubterfugeBuff) or v11(v25.StealthBuff) ;local v38=v11(392403) or v11(392401) ;local v39=GetPowerRegen();local v40=(861 -(814 + 45))/((2 -1) + (0.01 * UnitSpellHaste("player"))) ;local v41=0;local v42=0;local v43={249 + 454 ,3452 -1509 ,362249 -(630 + 793) ,1708442 -1347612 };local v44={3419 + 5261 ,9702 -6884 ,383414};local v45=function(v71) local v72=0;while true do if (v72==(1913 -(1789 + 124))) then for v101,v102 in ipairs(v44) do if WA_GetUnitDebuff(v71,v102,"PLAYER") then return true;end end return false;end end end;local v46=776 -(745 + 21) ;local v47=0 + 0 ;local v48=0 -0 ;local v49=0 -0 ;local v50=0 + 0 ;local v51=0 + 0 ;local v52=1055 -(87 + 968) ;local v53=0 -0 ;for v73=1 + 0 ,90 -50  do local v74=0;local v75;while true do if (v74==(1413 -(447 + 966))) then v75="nameplate"   .. v73 ;if (UnitExists(v75) and  not UnitIsFriend("player",v75) and WeakAuras.CheckRange(v75,v46,"<=")) then v47=v47 + (2 -1) ;if WA_GetUnitDebuff(v75,v25.Garrote,"PLAYER") then v48=v48 + 1 ;end if WA_GetUnitDebuff(v75,v25.Rupture,"PLAYER") then v49=v49 + 1 ;end if (v6(v75,v25.Garrote)<12) then v50=v50 + (1818 -(1703 + 114)) ;end if (aura_env.GarroteSnapshots[UnitGUID(v75)]==nil) then aura_env.GarroteSnapshots[UnitGUID(v75)]=701 -(376 + 325) ;end if (aura_env.GarroteSnapshots[UnitGUID(v75)]<=(1 -0)) then v51=v51 + (2 -1) ;end if (v19(v25.Garrote,v75,"HARMFUL|PLAYER") and ((aura_env.GarroteSnapshots[UnitGUID(v75)]<=(1 + 0)) or aura_env.PlayerHasBuff(864260 -471857 ) or aura_env.PlayerHasBuff(392401))) then v52=v52 + (15 -(9 + 5)) ;end if v19(v25.Rupture,v75,"HARMFUL|PLAYER") then v53=v53 + (377 -(85 + 291)) ;end if v45(v75) then v41=v41 + 1 ;for v125,v126 in ipairs(v43) do if WA_GetUnitDebuff(v75,v126,"PLAYER") then v42=v42 + (1266 -(243 + 1022)) ;end end end end break;end end end if  not (v48<v47) then WeakAuras.ScanEvents("K_NEARBY_GARROTED_SAT");end if  not (v49<v47) then WeakAuras.ScanEvents("K_NEARBY_RUPTURED_SAT");end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v47);v39=v39 + ((v42 * (26 -19))/v40) ;if IsPlayerSpell(v25.DashingScoundrelTalent) then v39=v39 + (((0.9 + 0) * v41 * (GetCritChance()/(1280 -(1123 + 57))))/v40) ;end WeakAuras.ScanEvents("K_GARROTE_DATA",v48,v47);WeakAuras.ScanEvents("K_RUPTURE_DATA",v49,v47);if (C_Item.IsItemInRange(13112 + 3002 ,"target")==false) then aura_env.OutOfRange=true;end v27.EffectiveSpendCp=max(v32-(256 -(163 + 91)) ,(1935 -(1869 + 61)) * ((IsPlayerSpell(v25.HandOfFateTalent) and (1 + 0)) or (0 -0)) );v27.SingleTarget=v47<=1 ;v27.RegenSaturated=v39>(30 + ((15 -5) * ((IsPlayerSpell(v25.DashingScoundrelTalent) and (0 + 0)) or (1 -0)))) ;v27.InCooldowns=v12(v25.Kingsbane) or v12(v25.ShivDebuff) ;v27.UpperLimitEnergy=((v33/v34) * (94 + 6))>=(((1554 -(1329 + 145)) -(10 * ((IsPlayerSpell(v25.ViciousVenomsTalent) and (973 -(140 + 831))) or 0))) -((1880 -(1409 + 441)) * ((IsPlayerSpell(v25.AmplifyingPoisonTalent) and (719 -(15 + 703))) or (0 + 0)))) ;v27.CdSoon=IsPlayerSpell(v25.KingsbaneTalent) and (v7(v25.Kingsbane)<3) and  not v3(v25.Kingsbane) ;v27.NotPooling=v27.InCooldowns or v11(v25.DarkestNightBuff) or v27.UpperLimitEnergy or (v18(60,v46)<=(458 -(262 + 176))) ;v27.ScentEffectiveMaxStacks=min(v47 * ((IsPlayerSpell(v25.ScentOfBloodTalent) and 2) or (1721 -(345 + 1376))) * (690 -(198 + 490)) ,88 -68 );v27.ScentSaturation=v9(v25.ScentOfBloodBuff)>=v27.ScentEffectiveMaxStacks ;local v63={};if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then local v94=0 -0 ;while true do if (v94==(1207 -(696 + 510))) then v21("Clear",nil);return;end if (v94==(0 -0)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v94=1263 -(1091 + 171) ;end end end end if (v3(v25.ThistleTea) and (( not v11(v25.ThistleTeaBuff) and (v6("target",v25.ShivDebuff)>=(1 + 5))) or ( not v11(v25.ThistleTeaBuff) and v12(v25.KingsbaneDebuff) and (v6("target",v25.KingsbaneDebuff)<=(18 -12))) or ( not v11(v25.ThistleTeaBuff) and (v18(60,v46)<=(C_Spell.GetSpellCharges(v25.ThistleTea).currentCharges * (19 -13)))))) then v63.ThistleTea=true;end if (v3(v25.ColdBlood) and (v7(v25.Deathmark)>(384 -(123 + 251))) and  not v11(v25.DarkestNightBuff) and (v35>=v27.EffectiveSpendCp) and (v27.NotPooling or (v10(v25.AmplifyingPoisonDebuff)>=(99 -79)) or  not (v47<(700 -(208 + 490)))) and  not v11(v25.VanishBuff) and ( not v3(v25.Kingsbane) or  not (v47<2)) and  not v3(v25.Deathmark)) then v63.ColdBlood=true;end if (v3(v25.ColdBlood) and (((v9(v25.FateboundCoinHeadsBuff)>(0 + 0)) and (v9(v25.FateboundCoinTailsBuff)>0)) or (v12(v25.ShivDebuff) and (((v7(v25.Deathmark)>50) and  not ((v28>=(2 + 2)) and IsPlayerSpell(v25.HandOfFateTalent))) or (v12(v25.KingsbaneDebuff) and (v28>=(840 -(660 + 176))) and IsPlayerSpell(v25.HandOfFateTalent)) or ( not IsPlayerSpell(v25.InevitabileEndTalent) and (v35>=v27.EffectiveSpendCp)))))) then v63.ColdBlood=true;end WeakAuras.ScanEvents("K_TRIGED_EXTRA",v63,nil);local v64=function() local v76=0 + 0 ;while true do if (v76==1) then if (v3(v25.Garrote) and (aura_env.config['PerformanceMode']==true) and ((v32-v35)>=1) and (v52>(202 -(14 + 188))) and  not v27.RegenSaturated and  not IsPlayerSpell(v25.DashingScoundrelTalent)) then local v103=675 -(534 + 141) ;while true do if (v103==(0 + 0)) then v20("Garrote","TAB");return true;end end end if (v3(v25.Garrote) and ((v32-v35)>=(1 + 0)) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=1)) and v19(v25.Garrote) and  not v27.RegenSaturated and (v47<=3) and  not IsPlayerSpell(v25.DashingScoundrelTalent) and (((v17(0 + 0 ,60) -v6("target",v25.Garrote))>12) or IsPlayerSpell(v25.SuddenDemiseTalent))) then local v104=0;while true do if (v104==(0 -0)) then v20("Garrote");return true;end end end v76=2 -0 ;end if (v76==3) then if (v3(v25.Garrote) and v19(v25.Garrote) and ((v32-v35)==1) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=1) or ((v6("target",v25.Garrote)<=2) and (v47>=(8 -5)))) and (v6("target",v25.Garrote)<=((2 + 0) * 2)) and (v47>=(2 + 1)) and (((v17(396 -(115 + 281) ,60) -v6("target",v25.Garrote))>(9 -5)) or IsPlayerSpell(v25.SuddenDemiseTalent)) and (abs(v5("player",v25.MasterAssassinBuff))==0)) then local v105=0;while true do if (v105==0) then v20("Garrote");return true;end end end break;end if (v76==(0 + 0)) then v27.DotFinisherCondition=v35>=v27.EffectiveSpendCp ;if (v3(v25.CrimsonTempest) and (v47>=(4 -2)) and v19(v25.CrimsonTempest) and v27.DotFinisherCondition and (((v17(0,220 -160 ) -v6("target",v25.CrimsonTempest))>(873 -(550 + 317))) or IsPlayerSpell(v25.SuddenDemiseTalent)) and  not v11(v25.DarkestNightBuff)) then local v106=0 -0 ;while true do if (v106==(0 -0)) then v20("Crimson Tempest");return true;end end end v76=1;end if (v76==(5 -3)) then if (v3(v25.Rupture) and (aura_env.config['PerformanceMode']==true) and v27.DotFinisherCondition and (v53>0) and ( not v12(v25.Kingsbane) or v11(v25.ColdBlood)) and  not v27.RegenSaturated and (IsPlayerSpell(v25.ScentOfBloodTalent) or v11(v25.IndiscriminateCarnageBuff) or true) and true and  not v11(v25.DarkestNightBuff)) then local v107=285 -(134 + 151) ;while true do if (v107==(1665 -(970 + 695))) then v20("Rupture","TAB");return true;end end end if (v3(v25.Rupture) and v27.DotFinisherCondition and v19(v25.Rupture) and ( not v12(v25.Kingsbane) or v11(v25.ColdBlood)) and ( not v27.RegenSaturated or  not v27.ScentSaturation) and ((v17(0 -0 ,60)>(7 + ((IsPlayerSpell(v25.DashingScoundrelTalent) and 5) or (1990 -(582 + 1408))) + ((v27.RegenSaturated and (20 -14)) or (0 -0)))) or IsPlayerSpell(v25.SuddenDemiseTalent)) and  not v11(v25.DarkestNightBuff)) then local v108=0;while true do if ((0 -0)==v108) then v20("Rupture");return true;end end end v76=3;end end end;local v65=function() if (v3(v25.Garrote) and ((v32-v35)>=1) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=1)) and v19(v25.Garrote) and (((v17(1824 -(1195 + 629) ,79 -19 ) -v6("target",v25.Garrote))>(253 -(187 + 54))) or IsPlayerSpell(v25.SuddenDemiseTalent))) then local v86=780 -(162 + 618) ;while true do if ((0 + 0)==v86) then v20("Garrote");return true;end end end if (v3(v25.Rupture) and (v35>=v27.EffectiveSpendCp) and v19(v25.Rupture) and (((v17(0 + 0 ,127 -67 ) -v6("target",v25.Rupture))>((6 -2) + (((IsPlayerSpell(v25.DashingScoundrelTalent) and (1 + 0)) or (1636 -(1373 + 263))) * (1005 -(451 + 549))) + (((v27.RegenSaturated and (1 + 0)) or (0 -0)) * 6))) or IsPlayerSpell(v25.SuddenDemiseTalent)) and ( not v11(v25.DarkestNightBuff) or (IsPlayerSpell(v25.CausticSpatterTalent) and  not v12(v25.CausticSpatterDebuff)))) then local v87=0;while true do if ((0 -0)==v87) then v20("Rupture");return true;end end end if (v3(v25.CrimsonTempest) and (v35>=v27.EffectiveSpendCp) and v19(v25.CrimsonTempestDebuff) and ( not v12(v25.CrimsonTempestDebuff) or (aura_env.CrimsonTempestSnapshots[UnitGUID("target")]<=v47)) and  not v11(v25.DarkestNightBuff) and  not IsPlayerSpell(v25.AmplifyingPoisonTalent) and (v47<=(1385 -(746 + 638)))) then local v88=0 + 0 ;while true do if (v88==(0 -0)) then v20("Crimson Tempest");return true;end end end end;local v66=function() local v77=0;while true do if (v77==3) then if (v3(v25.Mutilate) and v27.UseFiller) then if v27.NotPooling then v20("Mutilate");return true;else local v121=341 -(218 + 123) ;while true do if ((1581 -(1535 + 46))==v121) then v20("Mutilate");return true;end end end end break;end if (v77==(2 + 0)) then if (v3(v25.FanOfKnives) and v11(v25.DarkestNightBuff) and (v35==6) and ( not IsPlayerSpell(v25.ViciousVenomsTalent) or (v47>=(1 + 1)))) then v20("Fan of Knives");return true;end if (v3(v25.FanOfKnives) and v27.UseFiller and v27.FokTargetCount) then if v27.NotPooling then local v122=560 -(306 + 254) ;while true do if (v122==(0 + 0)) then v20("Fan of Knives");return true;end end else local v123=0 -0 ;while true do if (v123==(1467 -(899 + 568))) then v20("Fan of Knives");return true;end end end end if (v3(v25.Ambush) and v27.UseFiller and (v11(v25.BlindsideBuff) or v37) and ( not v12(v25.Kingsbane) or (v12(v25.Deathmark)==false) or v11(v25.BlindsideBuff))) then if v27.NotPooling then v20("Ambush");return true;else v20("Ambush");return true;end end if (v3(v25.Mutilate) and  not v12(v25.DeadlyPoisonDebuff) and  not v12(v25.AmplifyingPoisonDebuff) and v27.UseFiller and (v47==(2 + 0))) then if v27.NotPooling then local v124=0 -0 ;while true do if ((603 -(268 + 335))==v124) then v20("Mutilate");return true;end end else v20("Mutilate");return true;end end v77=293 -(60 + 230) ;end if (v77==0) then v27.UseCausticFiller=IsPlayerSpell(v25.CausticSpatterTalent) and v12(v25.Rupture) and ( not v12(v25.CausticSpatterDebuff) or (v6("target",v25.CausticSpatterDebuff)<=2)) and ((v32-v35)>=(573 -(426 + 146))) and  not (v47<2) ;if (v3(v25.Mutilate) and v27.UseCausticFiller) then v20("Mutilate");return true;end if (v3(v25.Ambush) and v27.UseCausticFiller) then v20("Ambush");return true;end if (v3(v25.Envenom) and  not v11(v25.DarkestNightBuff) and (v35>=v27.EffectiveSpendCp) and (v27.NotPooling or (v10(v25.AmplifyingPoisonDebuff)>=20) or  not (v47<2))) then v20("Envenom");return true;end v77=1 + 0 ;end if (v77==1) then if (v3(v25.Envenom) and v11(v25.DarkestNightBuff) and (v35>=v32)) then local v109=1456 -(282 + 1174) ;while true do if (v109==0) then v20("Envenom");return true;end end end v27.UseFiller=((v29<=v27.EffectiveSpendCp) and  not v27.CdSoon) or v27.NotPooling or  not (v47<2) ;if (v3(v25.FanOfKnives) and v11(v25.ClearTheWitnessesBuff) and (v47>=((813 -(569 + 242)) -(((v11(v25.LingeringDarknessBuff) or  not IsPlayerSpell(v25.ViciousVenomsTalent)) and (2 -1)) or (0 + 0))))) then v20("Fan of Knives");return true;end v27.FokTargetCount=v47>=((3 -((IsPlayerSpell(v25.MomentumOfDespairTalent) and IsPlayerSpell(v25.ThrownPrecisionTalent) and 1) or (1024 -(706 + 318)))) + ((IsPlayerSpell(v25.ViciousVenomsTalent) and (1252 -(721 + 530))) or 0) + ((IsPlayerSpell(v25.BlindsideTalent) and (1272 -(945 + 326))) or 0)) ;v77=2;end end end;local v67=function() v27.ShivCondition= not v12(v25.ShivDebuff) and v12(v25.Garrote) and v12(v25.Rupture) and (v47<=(12 -7)) ;v27.ShivKingsbaneCondition=IsPlayerSpell(v25.Kingsbane) and v11(v25.Envenom) and v27.ShivCondition ;if (v3(v25.Shiv) and IsPlayerSpell(v25.LightweightShivTalent) and v27.ShivKingsbaneCondition and (v3(v25.Deathmark) or (v7(v25.Deathmark)<=1)) and (v3(v25.Kingsbane) or (v7(v25.Kingsbane)<=2)) and (v28>=(2 + 0)) and IsPlayerSpell(v25.HandOfFateTalent)) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v110=0;while true do if (v110==(700 -(271 + 429))) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and IsPlayerSpell(v25.ArterialPrecisionTalent) and  not v12(v25.ShivDebuff) and v12(v25.GarroteDebuff) and v12(v25.RuptureDebuff) and (v47>=4) and v12(v25.CrimsonTempestDebuff) and (((((UnitHealth("target")/UnitHealthMax("target")) * (92 + 8))<=(1535 -(1408 + 92))) and IsPlayerSpell(v25.ZoldyckRecipeTalent)) or (v14(v25.Shiv)>=(1087.9 -(461 + 625))))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v111=1288 -(993 + 295) ;while true do if (v111==0) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and  not IsPlayerSpell(v25.LightweightShivTalent) and v27.ShivKingsbaneCondition and ((v12(v25.Kingsbane) and (v6("target",v25.Kingsbane)<(1 + 7 + ((1174 -(418 + 753)) * (((v28>=(2 + 2)) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and 1) or 0))))) or ( not v12(v25.Kingsbane) and (v7(v25.Kingsbane)>=(3 + 17)))) and ( not IsPlayerSpell(v25.CrimsonTempest) or (v47<(1 + 1)) or v12(v25.CrimsonTempest))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then v20("Shiv");return true;end end if (v3(v25.Shiv) and (v10(v25.DeathstalkersMarkDebuff)<=(1 + 1)) and (v35>=v27.EffectiveSpendCp) and v11(v25.LingeringDarknessBuff)) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v112=0;while true do if (v112==0) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and IsPlayerSpell(v25.LightweightShivTalent) and v27.ShivKingsbaneCondition and ((v12(v25.Kingsbane) and (v6("target",v25.KingsbaneDebuff)<(8 + ((532 -(406 + 123)) * (((v28>=(1773 -(1749 + 20))) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and (1 + 0)) or 0)))) and (v6("target",v25.KingsbaneDebuff)>(1326 -(1249 + 73)))) or ((v7(v25.Kingsbane)<=(1 + 0)) and (v14(v25.Shiv)>=(1146.7 -(466 + 679)))))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v113=0;while true do if (v113==(0 -0)) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and v12(v25.DeathmarkDebuff) and IsPlayerSpell(v25.ArterialPrecisionTalent) and  not v12(v25.ShivDebuff) and v12(v25.GarroteDebuff) and v12(v25.RuptureDebuff)) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then v20("Shiv");return true;end end if (v3(v25.Shiv) and  not v12(v25.DeathmarkDebuff) and  not IsPlayerSpell(v25.KingsbaneTalent) and v27.ShivCondition and (v12(v25.CrimsonTempestDebuff) or IsPlayerSpell(v25.AmplifyingPoisonTalent)) and ((((((IsPlayerSpell(v25.LightweightShivTalent) and (2 -1)) or (1900 -(106 + 1794))) + 1) -v14(v25.Shiv)) * (10 + 20))<v7(v25.Deathmark))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then v20("Shiv");return true;end end if (v3(v25.Shiv) and  not IsPlayerSpell(v25.Kingsbane) and  not IsPlayerSpell(v25.ArterialPrecisionTalent) and v27.ShivCondition and ( not IsPlayerSpell(v25.CrimsonTempest) or (v47<2) or v12(v25.CrimsonTempest))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v114=0 + 0 ;while true do if (v114==(0 -0)) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and (v14(v25.Shiv)>1) and (v18(60,v46)<=(C_Spell.GetSpellCharges(v25.Shiv).currentCharges * (8 + (2 * (((v28>=(10 -6)) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and (115 -(4 + 110))) or 0)))))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v115=584 -(57 + 527) ;while true do if (0==v115) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and (v14(v25.Shiv)>(1428.9 -(41 + 1386))) and (v28>=4) and (v10(v25.DeathstalkersMarkDebuff)<=1) and ((v32-v35)<(105 -(17 + 86))) and (v7(v25.Deathmark)>(21 + 9)) and ((v7(v25.Kingsbane)>(66 -36)) or  not IsPlayerSpell(v25.KingsbaneTalent))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then v20("Shiv");return true;end end end;local v68=function() if (v3(v25.Ambush) and  not v12(v25.DeathstalkersMarkDebuff) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and  not v11(v25.DarkestNightBuff) and (v5("player",v25.SubterfugeBuff)>(0 -0)) and (v5("player",v25.SubterfugeBuff)<=v23())) then local v89=166 -(122 + 44) ;while true do if (v89==(0 -0)) then v20("Ambush","Glow");return true;end end end if (v3(v25.Ambush) and  not v12(v25.DeathstalkersMarkDebuff) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and (v35<v27.EffectiveSpendCp) and (v12(v25.Rupture) or (v47<=1) or  not IsPlayerSpell(v25.SubterfugeTalent))) then v20("Ambush");return true;end if (v3(v25.Shiv) and IsPlayerSpell(v25.KingsbaneTalent) and v12(v25.KingsbaneDebuff) and (v6("target",v25.KingsbaneDebuff)<(26 -18)) and ( not v12(v25.ShivDebuff) or (v6("target",v25.ShivDebuff)<(1 + 0))) and v11(v25.EnvenomBuff)) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v116=0;while true do if (v116==(0 + 0)) then v20("Shiv");return true;end end end end if (v3(v25.Envenom) and (v35>=v27.EffectiveSpendCp) and v12(v25.Kingsbane) and (v5("player",v25.Envenom)<=(5 -2)) and (v12(v25.DeathstalkersMarkDebuff) or v11(v25.ColdBlood) or (v11(v25.DarkestNightBuff) and (v35>=(72 -(30 + 35)))))) then local v90=0;while true do if (v90==(0 + 0)) then v20("Envenom");return true;end end end if (v3(v25.Envenom) and (v35>=v27.EffectiveSpendCp) and (v5("player",v25.MasterAssassinBuff)< -1) and (v47<2) and (v12(v25.DeathstalkersMarkDebuff) or v11(v25.ColdBlood) or (v11(v25.DarkestNightBuff) and (v35>=(1264 -(1043 + 214)))))) then v20("Envenom");return true;end if (v3(v25.CrimsonTempest) and (v47>=aura_env.config['CrimsonTempestThreshold']) and (v35>=3) and (v6("target",v25.CrimsonTempest)<=(7 -5)) and  not v11(v25.DarkestNightBuff) and (v27.ScentSaturation or (v9(v25.ScentOfBloodBuff)>=12)) and (((v17(1212 -(323 + 889) ,161 -101 ) -v6("target",v25.CrimsonTempest))>(586 -(361 + 219))) or IsPlayerSpell(v25.SuddenDemiseTalent))) then local v91=320 -(53 + 267) ;while true do if (v91==(0 + 0)) then v20("Crimson Tempest");return true;end end end v27.DeathmarkConditionInStealthed=v12(v25.Rupture) and (v27.DeathmarkKingsbaneCondition or ((v47>1) and (v35>=v27.EffectiveSpendCp) and v27.ScentSaturation and (v12(v25.CrimsonTempest) or ( not IsPlayerSpell(v25.CrimsonTempest)==true)))) and  not v12(v25.Deathmark) and ( not IsPlayerSpell(v25.MasterAssassinTalent) or v12(v25.Garrote)) ;if (v3(v25.Deathmark) and ((v27.DeathmarkConditionInStealthed and (v17(413 -(15 + 398) ,1042 -(18 + 964) )>=(37 -27))) or (v18(35 + 25 ,v46)<=(13 + 7)))) then if ((aura_env.config[tostring(v25.Deathmark)]==true) and aura_env.FlagKTrigCD) then v21("Deathmark","Quick");elseif (aura_env.config[tostring(v25.Deathmark)]~=true) then local v117=850 -(20 + 830) ;while true do if (v117==(0 + 0)) then v20("Deathmark");return true;end end end end if v67() then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v25.Shiv)]~=true) then return true;end end if (v3(v25.Kingsbane) and (((v12(v25.ShivDebuff) or (v7(v25.Shiv)<6)) and (v11(v25.Envenom) or (v47>(127 -(116 + 10)))) and v12(v25.Deathmark)) or (v18(5 + 55 ,v46)<=(753 -(542 + 196))))) then if ((aura_env.config[tostring(v25.Kingsbane)]==true) and aura_env.FlagKTrigCD) then v21("Kingsbane");elseif (aura_env.config[tostring(v25.Kingsbane)]~=true) then v20("Kingsbane");return true;end end if (v3(v25.Kingsbane) and (((v12(v25.ShivDebuff) or (v7(v25.Shiv)<(12 -6))) and (v11(v25.Envenom) or (v47>(1 + 0))) and (v7(v25.Deathmark)>=(26 + 24)) and  not v12(v25.Deathmark)) or (v18(22 + 38 ,v46)<=(39 -24)))) then if ((aura_env.config[tostring(v25.Kingsbane)]==true) and aura_env.FlagKTrigCD) then v21("Kingsbane","Quick");elseif (aura_env.config[tostring(v25.Kingsbane)]~=true) then v20("Kingsbane");return true;end end if (v3(v25.Rupture) and (v35>=v27.EffectiveSpendCp) and v11(v25.IndiscriminateCarnageBuff) and (v53>0) and ((IsPlayerSpell(v25.CausticSpatterTalent) and  not v12(v25.CausticSpatterDebuff) and  not v12(v25.RuptureDebuff)) or  not v11(v25.DarkestNightBuff)) and ( not v27.RegenSaturated or  not v27.ScentSaturation or (( not IsPlayerSpell(v25.DashingScoundrelTalent) or  not IsPlayerSpell(v25.PoisonBombTalent)) and v11(v25.IndiscriminateCarnageBuff) and  not v12(v25.Rupture)) or (v49<v47)) and ((v17(0 -0 ,60)>(1566 -(1126 + 425))) or IsPlayerSpell(v25.SuddenDemiseTalent))) then local v92=405 -(118 + 287) ;while true do if ((0 -0)==v92) then v20("Rupture");return true;end end end if (v3(v25.Garrote) and v38 and ((v52>(1121 -(118 + 1003))) or  not v12(v25.Garrote) or (v51>(0 -0)) or (v11(v25.IndiscriminateCarnageBuff) and (v48<v47))) and  not (v47<(379 -(142 + 235))) and (((v17(0 -0 ,14 + 46 ) -v6("target",v25.Garrote))>(979 -(553 + 424))) or IsPlayerSpell(v25.SuddenDemiseTalent)) and ((v32-v35)>(2 -((v11(v25.DarkestNightBuff) and (3 -1)) or 0)))) then local v93=0;while true do if (v93==(0 + 0)) then v20("Garrote");return true;end end end if (v3(v25.Garrote) and v38 and ( not v12(v25.Garrote) or (v51>(0 + 0)) or v19(v25.Garrote)) and ((v32-v35)>=(1 + (2 * ((IsPlayerSpell(v25.ShroudedSuffocationTalent) and (1 + 0)) or (0 + 0)))))) then v20("Garrote");return true;end end;local v69=function() if (v3(v25.Vanish) and v12(v25.DeathmarkDebuff) and v11(v25.ColdBloodBuff) and (v9(v25.FateboundCoinTailsBuff)>=(1 + 0)) and (v9(v25.FateboundCoinHeadsBuff)>=(2 -1))) then if ((aura_env.config[tostring(v25.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v25.Vanish)]~=true) then local v118=0;while true do if (v118==0) then v20("Vanish");return true;end end end end if (v3(v25.Vanish) and  not IsPlayerSpell(v25.MasterAssassinTalent) and  not IsPlayerSpell(v25.IndiscriminateCarnageTalent) and IsPlayerSpell(v25.ImprovedGarroteTalent) and v3(v25.Garrote) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(2 -1)) or v19(v25.Garrote)) and (v12(v25.Deathmark) or (v7(v25.Deathmark)<4)) and ((v32-v35)>=min(v47,8 -4 ))) then if ((aura_env.config[tostring(v25.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v25.Vanish)]~=true) then local v119=0 + 0 ;while true do if (v119==(0 -0)) then v20("Vanish");return true;end end end end if (v3(v25.Vanish) and IsPlayerSpell(v25.IndiscriminateCarnageTalent) and IsPlayerSpell(v25.ImprovedGarroteTalent) and v3(v25.Garrote) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(754 -(239 + 514))) or v19(v25.Garrote)) and (v47>(1 + 1)) and ((v17(1329 -(797 + 532) ,60) -v6("target",v25.Vanish))>15)) then if ((aura_env.config[tostring(v25.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v25.Vanish)]~=true) then v20("Vanish");return true;end end if (v3(v25.Vanish) and IsPlayerSpell(v25.MasterAssassinTalent) and v12(v25.Deathmark) and (v6("target",v25.Kingsbane)<=(5 + 1 + ((2 + 1) * ((IsPlayerSpell(v25.SubterfugeTalent) and (4 -2)) or 0))))) then if ((aura_env.config[tostring(v25.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v25.Vanish)]~=true) then v20("Vanish");return true;end end if (v3(v25.Vanish) and IsPlayerSpell(v25.ImprovedGarroteTalent) and v3(v25.Garrote) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=1) or v19(v25.Garrote)) and (v12(v25.Deathmark))) then if ((aura_env.config[tostring(v25.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v25.Vanish)]~=true) then v20("Vanish");return true;end end end;local v70=function() local v81=1202 -(373 + 829) ;while true do if (v81==3) then if (( not v37 and (abs(v5("player",v25.MasterAssassinBuff))==0)) or (IsPlayerSpell(v25.IndiscriminateCarnageTalent) and  not IsPlayerSpell(v25.ImprovedGarroteTalent) and  not v27.ScentSaturation and (v49<v47) and (v47>=(734 -(476 + 255))))) then if v69() then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v25.Shiv)]~=true) then return true;end end end break;end if (v81==(1131 -(369 + 761))) then if ( not v12(v25.ShivDebuff) and v11(v25.DarkestNightBuff) and (( not v11(v25.DarkestNightBuff) and (v47<(2 + 0))) or (v11(v25.DarkestNightBuff) and (v47>(1 -0))))) then if v67() then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v25.Shiv)]~=true) then return true;end end end if (v3(v25.Deathmark) and ((v27.DeathmarkCondition and (v17(0 -0 ,298 -(64 + 174) )>=(2 + 8))) or (v18(88 -28 ,v46)<=(356 -(144 + 192))))) then if ((aura_env.config[tostring(v25.Deathmark)]==true) and aura_env.FlagKTrigCD) then v21("Deathmark");elseif (aura_env.config[tostring(v25.Deathmark)]~=true) then v20("Deathmark");return true;end end v81=218 -(42 + 174) ;end if (v81==(2 + 0)) then if ( not v12(v25.ShivDebuff) and  not v11(v25.DarkestNightBuff) and (v47>(1 + 0))) then if v67() then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v25.Shiv)]~=true) then return true;end end end if (v3(v25.Kingsbane) and (((v12(v25.ShivDebuff) or (v7(v25.Shiv)<(3 + 3))) and (v11(v25.Envenom) or (v47>1)) and ((v7(v25.Deathmark)>=(50 -((1519 -(363 + 1141)) * (((v28>=(1584 -(1183 + 397))) and IsPlayerSpell(v25.HandOfFateTalent) and (2 -1)) or (0 + 0))))) or v12(v25.Deathmark))) or (v18(45 + 15 ,v46)<=(1990 -(1913 + 62))))) then if ((aura_env.config[tostring(v25.Kingsbane)]==true) and aura_env.FlagKTrigCD) then v21("Kingsbane");elseif (aura_env.config[tostring(v25.Kingsbane)]~=true) then local v127=0;while true do if (v127==0) then v20("Kingsbane");return true;end end end end v81=3;end if (v81==(0 + 0)) then v27.DeathmarkKingsbaneCondition=(v7(v25.Kingsbane)<=(5 -3)) and v11(v25.EnvenomBuff) ;v27.DeathmarkCondition=v12(v25.RuptureDebuff) and (v27.DeathmarkKingsbaneCondition or ((v47>(1934 -(565 + 1368))) and (v5("player",v25.SliceAndDiceBuff)>5)) or ( not IsPlayerSpell(v25.KingsbaneTalent) and v12(v25.CrimsonTempestDebuff))) and  not v12(v25.DeathmarkDebuff) ;v81=3 -2 ;end end end;if (v37 or v11(v25.IndiscriminateCarnageBuff) or v38 or (abs(v5("player",v25.MasterAssassinBuff))>(1661 -(1477 + 184)))) then if v68() then return true;end end if v70() then return true;end if v65() then return true;end if  not (v47<(2 -0)) then if v64() then return true;end end if v66() then return true;end v20("Clear");end;