function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.FullGCD;local v24=aura_env.GetRemainingStealthDuration;local v25=aura_env.ids;aura_env.OutOfRange=false;local v27={};local v28=WeakAuras.GetNumSetItemsEquipped(4933 -3005 );local v29=UnitPower("player",Enum.PowerType.ComboPoints);local v30=GetUnitChargedPowerPoints("player");local v31=(v30 and  #v30) or 0 ;local v32=UnitPowerMax("player",Enum.PowerType.ComboPoints);local v33=UnitPower("player",Enum.PowerType.Energy);local v34=UnitPowerMax("player",Enum.PowerType.Energy);local v35=((v29>(427 -(166 + 261))) and (v29 + (math.min(v31,508 -(289 + 218) ) * ((1346 -(1213 + 131)) + ((IsPlayerSpell(v25.ForcedInductionTalent) and (1 + 0)) or (0 + 0)))))) or (0 -0) ;local v36=((aura_env.Envenom1<v2) and (0 -0)) or (aura_env.Envenom1-v2) ;local v37=v11(v25.SubterfugeBuff) or v11(v25.StealthBuff) ;local v38=v11(392403) or v11(392401) ;local v39=GetPowerRegen();local v40=(861 -(814 + 45))/((2 -1) + (0.01 * UnitSpellHaste("player"))) ;local v41=0 + 0 ;local v42=0 + 0 ;local v43={703,3023 -(1020 + 60) ,362249 -(630 + 793) ,1222732 -861902 };local v44={8680,9702 -6884 ,385161 -(760 + 987) };local v45=function(v71) local v72=0;while true do if (v72==(1913 -(1789 + 124))) then for v100,v101 in ipairs(v44) do if WA_GetUnitDebuff(v71,v101,"PLAYER") then return true;end end return false;end end end;local v46=10;local v47=0;local v48=0;local v49=0;local v50=766 -(745 + 21) ;local v51=0 + 0 ;local v52=0;local v53=0;for v73=2 -1 ,156 -116  do local v74=0 + 0 ;local v75;while true do if (v74==(0 + 0)) then v75="nameplate"   .. v73 ;if (UnitExists(v75) and  not UnitIsFriend("player",v75) and WeakAuras.CheckRange(v75,v46,"<=")) then v47=v47 + 1 ;if WA_GetUnitDebuff(v75,v25.Garrote,"PLAYER") then v48=v48 + 1 ;end if WA_GetUnitDebuff(v75,v25.Rupture,"PLAYER") then v49=v49 + (1056 -(87 + 968)) ;end if (v6(v75,v25.Garrote)<(52 -40)) then v50=v50 + 1 + 0 ;end if (aura_env.GarroteSnapshots[UnitGUID(v75)]==nil) then aura_env.GarroteSnapshots[UnitGUID(v75)]=0;end if (aura_env.GarroteSnapshots[UnitGUID(v75)]<=(2 -1)) then v51=v51 + 1 ;end if (v19(v25.Garrote,v75,"HARMFUL|PLAYER") and ((aura_env.GarroteSnapshots[UnitGUID(v75)]<=(1414 -(447 + 966))) or aura_env.PlayerHasBuff(392403) or aura_env.PlayerHasBuff(1074257 -681856 ))) then v52=v52 + (1818 -(1703 + 114)) ;end if v19(v25.Rupture,v75,"HARMFUL|PLAYER") then v53=v53 + (702 -(376 + 325)) ;end if v45(v75) then v41=v41 + (1 -0) ;for v127,v128 in ipairs(v43) do if WA_GetUnitDebuff(v75,v128,"PLAYER") then v42=v42 + (2 -1) ;end end end end break;end end end if  not (v48<v47) then WeakAuras.ScanEvents("K_NEARBY_GARROTED_SAT");end if  not (v49<v47) then WeakAuras.ScanEvents("K_NEARBY_RUPTURED_SAT");end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v47);v39=v39 + ((v42 * 7)/v40) ;if IsPlayerSpell(v25.DashingScoundrelTalent) then v39=v39 + (((0.9 + 0) * v41 * (GetCritChance()/100))/v40) ;end WeakAuras.ScanEvents("K_GARROTE_DATA",v48,v47);WeakAuras.ScanEvents("K_RUPTURE_DATA",v49,v47);if (C_Item.IsItemInRange(35490 -19376 ,"target")==false) then aura_env.OutOfRange=true;end v27.EffectiveSpendCp=max(v32-(16 -(9 + 5)) ,381 -(85 + 291) );v27.SingleTarget=v47<=1 ;v27.RegenSaturated=v39>((1295 -(243 + 1022)) + ((38 -28) * ((IsPlayerSpell(v25.DashingScoundrelTalent) and 0) or 1))) ;v27.InCooldowns=v12(v25.Kingsbane) or v12(v25.ShivDebuff) ;v27.UpperLimitEnergy=((v33/v34) * 100)>=((80 -((9 + 1) * ((IsPlayerSpell(v25.ViciousVenomsTalent) and 2) or 0))) -((1210 -(1123 + 57)) * ((IsPlayerSpell(v25.AmplifyingPoisonTalent) and (1 + 0)) or 0))) ;v27.CdSoon=IsPlayerSpell(v25.KingsbaneTalent) and (v7(v25.Kingsbane)<(257 -(163 + 91))) and  not v3(v25.Kingsbane) ;v27.NotPooling=v27.InCooldowns or v11(v25.DarkestNightBuff) or v27.UpperLimitEnergy or (v18(1990 -(1869 + 61) ,v46)<=20) ;v27.ScentEffectiveMaxStacks=min(v47 * ((IsPlayerSpell(v25.ScentOfBloodTalent) and (1 + 1)) or 0) * (6 -4) ,20);v27.ScentSaturation=v9(v25.ScentOfBloodBuff)>=v27.ScentEffectiveMaxStacks ;local v63={};if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v21("Clear",nil);return;end end if (v3(v25.ThistleTea) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and (( not v11(v25.ThistleTeaBuff) and (v6("target",v25.ShivDebuff)>=(8 -2))) or ( not v11(v25.ThistleTeaBuff) and v12(v25.KingsbaneDebuff) and (v6("target",v25.KingsbaneDebuff)<=(1 + 5))) or ( not v11(v25.ThistleTeaBuff) and (v18(60,v46)<=(C_Spell.GetSpellCharges(v25.ThistleTea).currentCharges * 6))))) then v63.ThistleTea=true;end if (v3(v25.ColdBlood1) and (v7(v25.Deathmark)>(13 -3)) and  not v11(v25.DarkestNightBuff) and (v35>=v27.EffectiveSpendCp) and (v27.NotPooling or (v10(v25.AmplifyingPoisonDebuff)>=(19 + 1)) or  not (v47<(1476 -(1329 + 145)))) and  not v11(v25.VanishBuff) and ( not v3(v25.Kingsbane) or  not (v47<(973 -(140 + 831)))) and  not v3(v25.Deathmark)) then v63.ColdBlood=true;end if (v3(v25.ColdBlood1) and (((v9(v25.FateboundCoinHeadsBuff)>0) and (v9(v25.FateboundCoinTailsBuff)>0)) or (v12(v25.ShivDebuff) and (((v7(v25.Deathmark)>(1900 -(1409 + 441))) and  not ((v28>=(722 -(15 + 703))) and IsPlayerSpell(v25.HandOfFateTalent))) or (v12(v25.KingsbaneDebuff) and (v28>=(2 + 2)) and IsPlayerSpell(v25.HandOfFateTalent)) or ( not IsPlayerSpell(v25.InevitabileEndTalent) and (v35>=v27.EffectiveSpendCp)))))) then v63.ColdBlood=true;end WeakAuras.ScanEvents("K_TRIGED_EXTRA",v63,nil);local v64=function() local v76=438 -(262 + 176) ;while true do if (v76==1) then if (v3(v25.Garrote) and (aura_env.config['PerformanceMode']==true) and ((v32-v35)>=(1722 -(345 + 1376))) and (v52>(688 -(198 + 490))) and  not v27.RegenSaturated and  not IsPlayerSpell(v25.DashingScoundrelTalent)) then v20("Garrote","TAB");return true;end if (v3(v25.Garrote) and ((v32-v35)>=1) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(4 -3))) and v19(v25.Garrote) and  not v27.RegenSaturated and (v47<=3) and  not IsPlayerSpell(v25.DashingScoundrelTalent) and (((v17(0 -0 ,1266 -(696 + 510) ) -v6("target",v25.Garrote))>(24 -12)) or IsPlayerSpell(v25.SuddenDemiseTalent))) then local v102=1262 -(1091 + 171) ;while true do if (v102==(0 + 0)) then v20("Garrote");return true;end end end v76=6 -4 ;end if (2==v76) then if (v3(v25.Rupture) and (aura_env.config['PerformanceMode']==true) and v27.DotFinisherCondition and (v53>0) and ( not v12(v25.Kingsbane) or v11(v25.ColdBlood)) and  not v27.RegenSaturated and (IsPlayerSpell(v25.ScentOfBloodTalent) or v11(v25.IndiscriminateCarnageBuff) or true) and true and  not v11(v25.DarkestNightBuff)) then v20("Rupture","TAB");return true;end if (v3(v25.Rupture) and v27.DotFinisherCondition and v19(v25.Rupture) and ( not v12(v25.Kingsbane) or v11(v25.ColdBlood)) and ( not v27.RegenSaturated or  not v27.ScentSaturation) and ((v17(0 -0 ,434 -(123 + 251) )>((34 -27) + ((IsPlayerSpell(v25.DashingScoundrelTalent) and (703 -(208 + 490))) or (0 + 0)) + ((v27.RegenSaturated and (3 + 3)) or (836 -(660 + 176))))) or IsPlayerSpell(v25.SuddenDemiseTalent)) and  not v11(v25.DarkestNightBuff)) then local v103=0;while true do if ((0 + 0)==v103) then v20("Rupture");return true;end end end v76=3;end if (v76==(202 -(14 + 188))) then v27.DotFinisherCondition=v35>=v27.EffectiveSpendCp ;if (v3(v25.CrimsonTempest) and (v47>=(677 -(534 + 141))) and v19(v25.CrimsonTempest) and v27.DotFinisherCondition and (((v17(0 + 0 ,60) -v6("target",v25.CrimsonTempest))>6) or IsPlayerSpell(v25.SuddenDemiseTalent)) and  not v11(v25.DarkestNightBuff)) then v20("Crimson Tempest");return true;end v76=1;end if (v76==(3 + 0)) then if (v3(v25.Garrote) and v19(v25.Garrote) and ((v32-v35)==(1 + 0)) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(1 -0)) or ((v6("target",v25.Garrote)<=(2 -0)) and (v47>=3))) and (v6("target",v25.Garrote)<=((5 -3) * (2 + 0))) and (v47>=3) and (((v17(0 + 0 ,456 -(115 + 281) ) -v6("target",v25.Garrote))>(9 -5)) or IsPlayerSpell(v25.SuddenDemiseTalent)) and (abs(v5("player",v25.MasterAssassinBuff))==0)) then v20("Garrote");return true;end break;end end end;local v65=function() if (v3(v25.Garrote) and ((v32-v35)>=(1 + 0)) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=1)) and v19(v25.Garrote) and (((v17(0,145 -85 ) -v6("target",v25.Garrote))>(43 -31)) or IsPlayerSpell(v25.SuddenDemiseTalent))) then local v87=867 -(550 + 317) ;while true do if ((0 -0)==v87) then v20("Garrote");return true;end end end if (v3(v25.Rupture) and (v35>=v27.EffectiveSpendCp) and v19(v25.Rupture) and (((v17(0 -0 ,167 -107 ) -v6("target",v25.Rupture))>(4 + (((IsPlayerSpell(v25.DashingScoundrelTalent) and (286 -(134 + 151))) or 0) * (1670 -(970 + 695))) + (((v27.RegenSaturated and (1 -0)) or 0) * (1996 -(582 + 1408))))) or IsPlayerSpell(v25.SuddenDemiseTalent)) and ( not v11(v25.DarkestNightBuff) or (IsPlayerSpell(v25.CausticSpatterTalent) and  not v12(v25.CausticSpatterDebuff)))) then v20("Rupture");return true;end if (v3(v25.CrimsonTempest) and (v35>=v27.EffectiveSpendCp) and v19(v25.CrimsonTempestDebuff) and  not v11(v25.DarkestNightBuff) and  not IsPlayerSpell(v25.AmplifyingPoisonTalent)) then local v88=0 -0 ;while true do if (v88==(0 -0)) then v20("Crimson Tempest");return true;end end end end;local v66=function() local v77=0 -0 ;while true do if (v77==2) then if (v3(v25.FanOfKnives) and v11(v25.DarkestNightBuff) and (v35==(1830 -(1195 + 629))) and ( not IsPlayerSpell(v25.ViciousVenomsTalent) or (v47>=(2 -0)))) then local v104=241 -(187 + 54) ;while true do if (v104==(780 -(162 + 618))) then v20("Fan of Knives");return true;end end end if (v3(v25.FanOfKnives) and v27.UseFiller and v27.FokTargetCount) then if v27.NotPooling then local v121=0 + 0 ;while true do if (v121==(0 + 0)) then v20("Fan of Knives");return true;end end else local v122=0 -0 ;while true do if (v122==0) then v20("Fan of Knives");return true;end end end end if (v3(v25.Ambush) and v27.UseFiller and (v11(v25.BlindsideBuff) or v37) and ( not v12(v25.Kingsbane) or (v12(v25.Deathmark)==false) or v11(v25.BlindsideBuff))) then if v27.NotPooling then local v123=0 -0 ;while true do if (v123==(0 + 0)) then v20("Ambush");return true;end end else v20("Ambush");return true;end end if (v3(v25.Mutilate) and  not v12(v25.DeadlyPoisonDebuff) and  not v12(v25.AmplifyingPoisonDebuff) and v27.UseFiller and (v47==(1638 -(1373 + 263)))) then if v27.NotPooling then local v124=1000 -(451 + 549) ;while true do if (v124==(0 + 0)) then v20("Mutilate");return true;end end else local v125=0 -0 ;while true do if (v125==(0 -0)) then v20("Mutilate");return true;end end end end v77=1387 -(746 + 638) ;end if (1==v77) then if (v3(v25.Envenom) and v11(v25.DarkestNightBuff) and (v35>=v32)) then local v105=0 + 0 ;while true do if (v105==(0 -0)) then v20("Envenom");return true;end end end v27.UseFiller=((v29<=v27.EffectiveSpendCp) and  not v27.CdSoon) or v27.NotPooling or  not (v47<(343 -(218 + 123))) ;if (v3(v25.FanOfKnives) and v11(v25.ClearTheWitnessesBuff) and (v47>=((1583 -(1535 + 46)) -(((v11(v25.LingeringDarknessBuff) or  not IsPlayerSpell(v25.ViciousVenomsTalent)) and 1) or 0)))) then v20("Fan of Knives");return true;end v27.FokTargetCount=v47>=(((3 + 0) -((IsPlayerSpell(v25.ThrownPrecisionTalent) and 1) or 0)) + ((IsPlayerSpell(v25.ViciousVenomsTalent) and 1) or 0) + ((IsPlayerSpell(v25.BlindsideTalent) and (1 + 0)) or (560 -(306 + 254)))) ;v77=1 + 1 ;end if (0==v77) then v27.UseCausticFiller=IsPlayerSpell(v25.CausticSpatterTalent) and v12(v25.Rupture) and ( not v12(v25.CausticSpatterDebuff) or (v6("target",v25.CausticSpatterDebuff)<=2)) and ((v32-v35)>=(1 -0)) and  not (v47<(1469 -(899 + 568))) ;if (v3(v25.Mutilate) and v27.UseCausticFiller) then v20("Mutilate");return true;end if (v3(v25.Ambush) and v27.UseCausticFiller) then local v106=0 + 0 ;while true do if (v106==0) then v20("Ambush");return true;end end end if (v3(v25.Envenom) and  not v11(v25.DarkestNightBuff) and (v35>=v27.EffectiveSpendCp) and (v27.NotPooling or (v10(v25.AmplifyingPoisonDebuff)>=(48 -28)) or  not (v47<(605 -(268 + 335))))) then local v107=0;while true do if (v107==0) then v20("Envenom");return true;end end end v77=291 -(60 + 230) ;end if (v77==3) then if (v3(v25.Mutilate) and v27.UseFiller) then if v27.NotPooling then v20("Mutilate");return true;else local v126=572 -(426 + 146) ;while true do if (v126==(0 + 0)) then v20("Mutilate");return true;end end end end break;end end end;local v67=function() v27.ShivCondition= not v12(v25.ShivDebuff) and v12(v25.Garrote) and v12(v25.Rupture) and (v47<=5) ;v27.ShivKingsbaneCondition=IsPlayerSpell(v25.Kingsbane) and v11(v25.Envenom) and v27.ShivCondition ;if (v3(v25.Shiv) and IsPlayerSpell(v25.LightweightShivTalent) and v27.ShivKingsbaneCondition and (v3(v25.Deathmark) or (v7(v25.Deathmark)<=1)) and (v3(v25.Kingsbane) or (v7(v25.Kingsbane)<=(1458 -(282 + 1174)))) and (v28>=(813 -(569 + 242))) and IsPlayerSpell(v25.HandOfFateTalent)) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v108=0 -0 ;while true do if (v108==0) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and IsPlayerSpell(v25.ArterialPrecisionTalent) and  not v12(v25.ShivDebuff) and v12(v25.GarroteDebuff) and v12(v25.RuptureDebuff) and (v47>=4) and v12(v25.CrimsonTempestDebuff) and (((((UnitHealth("target")/UnitHealthMax("target")) * 100)<=(3 + 32)) and IsPlayerSpell(v25.ZoldyckRecipeTalent)) or (v14(v25.Shiv)>=(1025.9 -(706 + 318))))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v109=1251 -(721 + 530) ;while true do if (v109==(1271 -(945 + 326))) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and  not IsPlayerSpell(v25.LightweightShivTalent) and v27.ShivKingsbaneCondition and ((v12(v25.Kingsbane) and (v6("target",v25.Kingsbane)<(8 + (3 * (((v28>=(9 -5)) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and 1) or (0 + 0)))))) or ( not v12(v25.Kingsbane) and (v7(v25.Kingsbane)>=(720 -(271 + 429))))) and ( not IsPlayerSpell(v25.CrimsonTempest) or (v47<(2 + 0)) or v12(v25.CrimsonTempest))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v110=0;while true do if (v110==(1500 -(1408 + 92))) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and (v10(v25.DeathstalkersMarkDebuff)<=(1088 -(461 + 625))) and (v35>=v27.EffectiveSpendCp) and v11(v25.LingeringDarknessBuff)) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v111=1288 -(993 + 295) ;while true do if (v111==(0 + 0)) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and IsPlayerSpell(v25.LightweightShivTalent) and v27.ShivKingsbaneCondition and ((v12(v25.Kingsbane) and (v6("target",v25.KingsbaneDebuff)<((1179 -(418 + 753)) + ((2 + 1) * (((v28>=4) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and (1 + 0)) or (0 + 0))))) and (v6("target",v25.KingsbaneDebuff)>4)) or ((v7(v25.Kingsbane)<=1) and (v14(v25.Shiv)>=1.7)))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v112=0 + 0 ;while true do if (v112==0) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and v12(v25.DeathmarkDebuff) and IsPlayerSpell(v25.ArterialPrecisionTalent) and  not v12(v25.ShivDebuff) and v12(v25.GarroteDebuff) and v12(v25.RuptureDebuff)) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v113=0;while true do if (0==v113) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and  not v12(v25.DeathmarkDebuff) and  not IsPlayerSpell(v25.KingsbaneTalent) and v27.ShivCondition and (v12(v25.CrimsonTempestDebuff) or IsPlayerSpell(v25.AmplifyingPoisonTalent)) and ((((((IsPlayerSpell(v25.LightweightShivTalent) and 1) or (529 -(406 + 123))) + (1770 -(1749 + 20))) -v14(v25.Shiv)) * (8 + 22))<v7(v25.Deathmark))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v114=1322 -(1249 + 73) ;while true do if (0==v114) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and  not IsPlayerSpell(v25.Kingsbane) and  not IsPlayerSpell(v25.ArterialPrecisionTalent) and v27.ShivCondition and ( not IsPlayerSpell(v25.CrimsonTempest) or (v47<2) or v12(v25.CrimsonTempest))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v115=0;while true do if (v115==(0 + 0)) then v20("Shiv");return true;end end end end if (v3(v25.Shiv) and (v18(60,v46)<=(C_Spell.GetSpellCharges(v25.Shiv).currentCharges * ((1153 -(466 + 679)) + ((6 -3) * (((v28>=(11 -7)) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and 1) or (1900 -(106 + 1794)))))))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then v20("Shiv");return true;end end if (v3(v25.Shiv) and (v14(v25.Shiv)>(1.9 + 0)) and (v28>=(2 + 2)) and (v10(v25.DeathstalkersMarkDebuff)<=(5 -3)) and ((v32-v35)<(5 -3)) and (v7(v25.Deathmark)>30) and ((v7(v25.Kingsbane)>(144 -(4 + 110))) or  not IsPlayerSpell(v25.KingsbaneTalent))) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then local v116=584 -(57 + 527) ;while true do if (v116==(1427 -(41 + 1386))) then v20("Shiv");return true;end end end end end;local v68=function() if (v3(v25.Ambush) and  not v12(v25.DeathstalkersMarkDebuff) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and  not v11(v25.DarkestNightBuff) and (v5("player",v25.SubterfugeBuff)>(103 -(17 + 86))) and (v5("player",v25.SubterfugeBuff)<=v23())) then local v89=0;while true do if (v89==(0 + 0)) then v20("Ambush","Glow");return true;end end end if (v3(v25.Ambush) and  not v12(v25.DeathstalkersMarkDebuff) and IsPlayerSpell(v25.DeathstalkersMarkTalent) and (v35<v27.EffectiveSpendCp) and (v12(v25.Rupture) or (v47<=1) or  not IsPlayerSpell(v25.SubterfugeTalent))) then local v90=0 -0 ;while true do if (v90==0) then v20("Ambush");return true;end end end if (v3(v25.Shiv) and IsPlayerSpell(v25.KingsbaneTalent) and v12(v25.KingsbaneDebuff) and (v6("target",v25.KingsbaneDebuff)<(23 -15)) and ( not v12(v25.ShivDebuff) or (v6("target",v25.ShivDebuff)<(167 -(122 + 44)))) and v11(v25.EnvenomBuff)) then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then v21("Shiv");elseif (aura_env.config[tostring(v25.Shiv)]~=true) then v20("Shiv");return true;end end if (v3(v25.Envenom) and (v35>=v27.EffectiveSpendCp) and v12(v25.Kingsbane) and (v5("player",v25.Envenom)<=(5 -2)) and (v12(v25.DeathstalkersMarkDebuff) or v11(v25.ColdBlood) or (v11(v25.DarkestNightBuff) and (v35>=7)))) then v20("Envenom");return true;end if (v3(v25.Envenom) and (v35>=v27.EffectiveSpendCp) and (v5("player",v25.MasterAssassinBuff)< -1) and (v47<2) and (v12(v25.DeathstalkersMarkDebuff) or v11(v25.ColdBlood) or (v11(v25.DarkestNightBuff) and (v35>=7)))) then local v91=0 -0 ;while true do if (v91==(0 + 0)) then v20("Envenom");return true;end end end if (v3(v25.CrimsonTempest) and (v47>=aura_env.config['CrimsonTempestThreshold']) and (v35>=3) and (v6("target",v25.CrimsonTempest)<=(1 + 1)) and  not v11(v25.DarkestNightBuff) and (v27.ScentSaturation or (v9(v25.ScentOfBloodBuff)>=12)) and (((v17(0 -0 ,125 -(30 + 35) ) -v6("target",v25.CrimsonTempest))>6) or IsPlayerSpell(v25.SuddenDemiseTalent))) then local v92=0 + 0 ;while true do if (v92==(1257 -(1043 + 214))) then v20("Crimson Tempest");return true;end end end v27.DeathmarkConditionInStealthed=v12(v25.Rupture) and (v27.DeathmarkKingsbaneCondition or ((v47>(3 -2)) and (v35>=v27.EffectiveSpendCp) and v27.ScentSaturation and (v12(v25.CrimsonTempest) or ( not IsPlayerSpell(v25.CrimsonTempest)==true)))) and  not v12(v25.Deathmark) and ( not IsPlayerSpell(v25.MasterAssassinTalent) or v12(v25.Garrote)) ;if (v3(v25.Deathmark) and ((v27.DeathmarkConditionInStealthed and (v17(1212 -(323 + 889) ,161 -101 )>=(590 -(361 + 219)))) or (v18(380 -(53 + 267) ,v46)<=(5 + 15)))) then if ((aura_env.config[tostring(v25.Deathmark)]==true) and aura_env.FlagKTrigCD) then v21("Deathmark","Quick");elseif (aura_env.config[tostring(v25.Deathmark)]~=true) then v20("Deathmark");return true;end end if v67() then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v25.Shiv)]~=true) then return true;end end if (v3(v25.Kingsbane) and (((v12(v25.ShivDebuff) or (v7(v25.Shiv)<6)) and (v11(v25.Envenom) or (v47>1)) and v12(v25.Deathmark)) or (v18(473 -(15 + 398) ,v46)<=(997 -(18 + 964))))) then if ((aura_env.config[tostring(v25.Kingsbane)]==true) and aura_env.FlagKTrigCD) then v21("Kingsbane");elseif (aura_env.config[tostring(v25.Kingsbane)]~=true) then local v117=0 -0 ;while true do if (v117==0) then v20("Kingsbane");return true;end end end end if (v3(v25.Kingsbane) and (((v12(v25.ShivDebuff) or (v7(v25.Shiv)<(4 + 2))) and (v11(v25.Envenom) or (v47>1)) and (v7(v25.Deathmark)>=50) and  not v12(v25.Deathmark)) or (v18(60,v46)<=(10 + 5)))) then if ((aura_env.config[tostring(v25.Kingsbane)]==true) and aura_env.FlagKTrigCD) then v21("Kingsbane","Quick");elseif (aura_env.config[tostring(v25.Kingsbane)]~=true) then v20("Kingsbane");return true;end end if (v3(v25.Rupture) and (v35>=v27.EffectiveSpendCp) and v11(v25.IndiscriminateCarnageBuff) and (v53>0) and ((IsPlayerSpell(v25.CausticSpatterTalent) and  not v12(v25.CausticSpatterDebuff) and  not v12(v25.RuptureDebuff)) or  not v11(v25.DarkestNightBuff)) and ( not v27.RegenSaturated or  not v27.ScentSaturation or (( not IsPlayerSpell(v25.DashingScoundrelTalent) or  not IsPlayerSpell(v25.PoisonBombTalent)) and v11(v25.IndiscriminateCarnageBuff) and  not v12(v25.Rupture)) or (v49<v47)) and ((v17(0,910 -(20 + 830) )>(12 + 3)) or IsPlayerSpell(v25.SuddenDemiseTalent))) then local v93=126 -(116 + 10) ;while true do if ((0 + 0)==v93) then v20("Rupture");return true;end end end if (v3(v25.Garrote) and v38 and ((v52>(738 -(542 + 196))) or  not v12(v25.Garrote) or (v51>(0 -0)) or (v11(v25.IndiscriminateCarnageBuff) and (v48<v47))) and  not (v47<2) and (((v17(0 + 0 ,60) -v6("target",v25.Garrote))>(2 + 0)) or IsPlayerSpell(v25.SuddenDemiseTalent)) and ((v32-v35)>(2 -((v11(v25.DarkestNightBuff) and (1 + 1)) or (0 -0))))) then v20("Garrote");return true;end if (v3(v25.Garrote) and v38 and ( not v12(v25.Garrote) or (v51>(0 -0)) or v19(v25.Garrote)) and ((v32-v35)>=((1552 -(1126 + 425)) + ((407 -(118 + 287)) * ((IsPlayerSpell(v25.ShroudedSuffocationTalent) and (3 -2)) or 0))))) then local v94=1121 -(118 + 1003) ;while true do if (v94==0) then v20("Garrote");return true;end end end if (v3(v25.Garrote) and v38 and ((v32-v35)>=(1 + ((5 -3) * ((IsPlayerSpell(v25.ShroudedSuffocationTalent) and (378 -(142 + 235))) or (0 -0))))) and (v5("player",v25.IndiscriminateCarnageBuff)<=v23()) and (v47>(2 + 4))) then v20("Garrote");return true;end if (v3(v25.Garrote) and v38 and ((v32-v35)>=((978 -(553 + 424)) + ((3 -1) * ((IsPlayerSpell(v25.ShroudedSuffocationTalent) and 1) or (0 + 0))))) and (v5("player",v25.IndiscriminateCarnageBuff)<=v23()) and (v47<=6) and (v7(v25.Vanish)>(17 + 0)) and  not v11(v25.VanishBuff)) then local v95=0 + 0 ;while true do if (v95==(0 + 0)) then v20("Garrote");return true;end end end end;local v69=function() if (v3(v25.Vanish) and v12(v25.DeathmarkDebuff) and (v11(v25.ColdBloodBuff1) or v11(v25.ColdBloodBuff2)) and (v9(v25.FateboundCoinTailsBuff)>=1) and (v9(v25.FateboundCoinHeadsBuff)>=(1 + 0))) then if ((aura_env.config[tostring(v25.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v25.Vanish)]~=true) then v20("Vanish");return true;end end if (v3(v25.Vanish) and  not IsPlayerSpell(v25.MasterAssassinTalent) and  not IsPlayerSpell(v25.IndiscriminateCarnageTalent) and IsPlayerSpell(v25.ImprovedGarroteTalent) and v3(v25.Garrote) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=1) or v19(v25.Garrote)) and (v12(v25.Deathmark) or (v7(v25.Deathmark)<(8 -4))) and ((v32-v35)>=min(v47,11 -7 ))) then if ((aura_env.config[tostring(v25.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v25.Vanish)]~=true) then v20("Vanish");return true;end end if (v3(v25.Vanish) and IsPlayerSpell(v25.IndiscriminateCarnageTalent) and IsPlayerSpell(v25.ImprovedGarroteTalent) and v3(v25.Garrote) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=(2 -1)) or v19(v25.Garrote)) and (v47>2) and ((v17(0 + 0 ,60) -v6("target",v25.Vanish))>(72 -57))) then if ((aura_env.config[tostring(v25.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v25.Vanish)]~=true) then local v118=0;while true do if (v118==(753 -(239 + 514))) then v20("Vanish");return true;end end end end if (v3(v25.Vanish) and IsPlayerSpell(v25.MasterAssassinTalent) and v12(v25.Deathmark) and (v6("target",v25.Kingsbane)<=(6 + (3 * ((IsPlayerSpell(v25.SubterfugeTalent) and 2) or (0 + 0)))))) then if ((aura_env.config[tostring(v25.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v25.Vanish)]~=true) then v20("Vanish");return true;end end if (v3(v25.Vanish) and IsPlayerSpell(v25.ImprovedGarroteTalent) and v3(v25.Garrote) and ( not v12(v25.Garrote) or (aura_env.GarroteSnapshots[UnitGUID("target")]<=1) or v19(v25.Garrote)) and (v12(v25.Deathmark))) then if ((aura_env.config[tostring(v25.Vanish)]==true) and aura_env.FlagKTrigCD) then v21("Vanish");elseif (aura_env.config[tostring(v25.Vanish)]~=true) then local v119=1329 -(797 + 532) ;while true do if (v119==(0 + 0)) then v20("Vanish");return true;end end end end end;local v70=function() v27.DeathmarkKingsbaneCondition=(v7(v25.Kingsbane)<=(1 + 1)) and v11(v25.EnvenomBuff) ;v27.DeathmarkCondition=v12(v25.RuptureDebuff) and (v27.DeathmarkKingsbaneCondition or ((v47>(2 -1)) and (v5("player",v25.SliceAndDiceBuff)>(1207 -(373 + 829)))) or ( not IsPlayerSpell(v25.KingsbaneTalent) and v12(v25.CrimsonTempestDebuff))) and  not v12(v25.DeathmarkDebuff) ;if ( not v12(v25.ShivDebuff) and (( not v11(v25.DarkestNightBuff) and (v47<(733 -(476 + 255)))) or (v11(v25.DarkestNightBuff) and (v47>(1131 -(369 + 761)))))) then if v67() then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v25.Shiv)]~=true) then return true;end end end if (v3(v25.Deathmark) and ((v27.DeathmarkCondition and (v17(0,35 + 25 )>=(18 -8))) or (v18(113 -53 ,v46)<=(258 -(64 + 174))))) then if ((aura_env.config[tostring(v25.Deathmark)]==true) and aura_env.FlagKTrigCD) then v21("Deathmark");elseif (aura_env.config[tostring(v25.Deathmark)]~=true) then v20("Deathmark");return true;end end if ( not v12(v25.ShivDebuff) and  not v11(v25.DarkestNightBuff) and (v47>(1 + 0))) then if v67() then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v25.Shiv)]~=true) then return true;end end end if (v3(v25.Kingsbane) and (((v12(v25.ShivDebuff) or (v7(v25.Shiv)<(8 -2))) and (v11(v25.Envenom) or (v47>(337 -(144 + 192)))) and ((v7(v25.Deathmark)>=((266 -(42 + 174)) -((12 + 3) * (((v28>=4) and IsPlayerSpell(v25.HandOfFateTalent) and (1 + 0)) or 0)))) or v12(v25.Deathmark))) or (v18(26 + 34 ,v46)<=(1519 -(363 + 1141))))) then if ((aura_env.config[tostring(v25.Kingsbane)]==true) and aura_env.FlagKTrigCD) then v21("Kingsbane");elseif (aura_env.config[tostring(v25.Kingsbane)]~=true) then v20("Kingsbane");return true;end end if (( not v37 and (abs(v5("player",v25.MasterAssassinBuff))==0)) or (IsPlayerSpell(v25.IndiscriminateCarnageTalent) and  not IsPlayerSpell(v25.ImprovedGarroteTalent) and  not v27.ScentSaturation and (v49<v47) and (v47>=(1583 -(1183 + 397))))) then if v69() then if ((aura_env.config[tostring(v25.Shiv)]==true) and aura_env.FlagKTrigCD) then elseif (aura_env.config[tostring(v25.Shiv)]~=true) then return true;end end end end;if (v37 or v11(v25.IndiscriminateCarnageBuff) or v38 or (abs(v5("player",v25.MasterAssassinBuff))>(0 -0))) then if v68() then return true;end end if v70() then return true;end if v65() then return true;end if  not (v47<(2 + 0)) then if v64() then return true;end end if v66() then return true;end v20("Clear");v21("Clear");end;