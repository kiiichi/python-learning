function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.FullGCD;local v24=aura_env.ids;aura_env.OutOfRange=false;local v26=WeakAuras.GetNumSetItemsEquipped(5002 -3131 );local v27=UnitPower("player",Enum.PowerType.Focus);local v28=UnitPowerMax("player",Enum.PowerType.Focus);local v29=v11(v24.HowlBearBuff) or v11(v24.HowlBoarBuff) or v11(v24.HowlWyvernBuff) ;local v30=0 + 0 ;local v31=40;for v35=1,40 do local v36=350 -(87 + 263) ;local v37;while true do if (v36==(180 -(67 + 113))) then v37="nameplate"   .. v35 ;if (UnitExists(v37) and  not UnitIsFriend("player",v37) and WeakAuras.CheckRange(v37,v31,"<=") and (UnitAffectingCombat(v37) or aura_env.config['BypassCombatRequirement'])) then v30=v30 + 1 ;end break;end end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v30);WeakAuras.ScanEvents("K_NEARBY_Wounds",TargetsWithFesteringWounds);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then local v44=0 + 0 ;while true do if (v44==(1 -0)) then v21("Clear",nil);return;end if (v44==(438 -(145 + 293))) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v44=2 -1 ;end end end end local v32={};if (v3(v24.CallOfTheWild) and (v14(v24.BarbedShot)<(1 + 0)) and  not v3(v24.BestialWrath)) then v32.CallOfTheWild=true;end WeakAuras.ScanEvents("K_TRIGED_EXTRA",v32,nil);local v33=function() if v3(v24.BestialWrath) then if ((aura_env.config[tostring(v24.BestialWrath)]==true) and aura_env.FlagKTrigCD) then v21("Bestial Wrath");elseif (aura_env.config[tostring(v24.BestialWrath)]~=true) then v20("Bestial Wrath");return true;end end if (v3(v24.KillShot) and (FindSpellOverrideByID(v24.KillShot)==v24.BlackArrow) and v5("player",v24.BeastCleaveBuff) and v11(v24.WitheringFireBuff)) then v20("Black Arrow");return true;end if (v3(v24.BarbedShot) and ((v16(v24.BarbedShot)<=WeakAuras.gcdDuration()) or (math.floor(v14(v24.BarbedShot))>math.floor(v14(v24.KillCommand))) or (IsPlayerSpell(v24.CallOfTheWild) and v3(v24.CallOfTheWild)) or (v29 and (v16(v24.BarbedShot)<(31 -23))))) then v20("Barbed Shot");return true;end if (v3(v24.Multishot) and  not (v5("pet",v24.BeastCleavePetBuff)>WeakAuras.gcdDuration()) and ( not IsPlayerSpell(v24.BloodyFrenzyTalent) or true)) then local v40=1486 -(998 + 488) ;while true do if (v40==(952 -(802 + 150))) then v20("Multishot");return true;end end end if (v3(v24.KillShot) and (FindSpellOverrideByID(v24.KillShot)==v24.BlackArrow) and (v5("player",v24.BeastCleaveBuff))) then v20("Black Arrow");return true;end if v3(v24.Bloodshed) then if ((aura_env.config[tostring(v24.Bloodshed)]==true) and aura_env.FlagKTrigCD) then v21("Bloodshed");elseif (aura_env.config[tostring(v24.Bloodshed)]~=true) then v20("Bloodshed");return true;end end if (v3(v24.KillCommandSummon) and v29) then if ((aura_env.config[tostring(v24.KillCommandSummon)]==true) and aura_env.FlagKTrigCD) then v21("Kill Command Summon");elseif (aura_env.config[tostring(v24.KillCommandSummon)]~=true) then v20("Kill Command Summon");return true;end end if (v3(v24.ExplosiveShot) and (IsPlayerSpell(v24.ThunderingHoovesTalent))) then local v41=0 + 0 ;while true do if (v41==0) then v20("Explosive Shot");return true;end end end if (v3(v24.KillCommand) and  not v29) then v20("Kill Command");return true;end if (v3(v24.CobraShot) and (((((v28-v27)/GetPowerRegen()) * WeakAuras.gcdDuration())<(WeakAuras.gcdDuration() + (v23() * (774 -(201 + 571))))) or (v9(v24.HogstriderBuff)>(7 -4)))) then local v42=0 -0 ;while true do if (v42==(0 + 0)) then v20("Cobra Shot");return true;end end end if v3(v24.ExplosiveShot) then local v43=0;while true do if (v43==(997 -(915 + 82))) then v20("Explosive Shot");return true;end end end end;local v34=function() local v38=0 -0 ;while true do if (v38==4) then if v3(v24.CobraShot) then local v45=0;while true do if (v45==(0 -0)) then v20("Cobra Shot");return true;end end end break;end if (v38==(2 + 1)) then if (v3(v24.KillShot) and (FindSpellOverrideByID(v24.KillShot)==v24.BlackArrow)) then local v46=0 -0 ;while true do if (v46==(859 -(814 + 45))) then v20("Black Arrow");return true;end end end if (v3(v24.ExplosiveShot) and (IsPlayerSpell(v24.ThunderingHoovesTalent))) then v20("Explosive Shot");return true;end v38=1191 -(1069 + 118) ;end if (v38==(0 -0)) then if v3(v24.BestialWrath) then if ((aura_env.config[tostring(v24.BestialWrath)]==true) and aura_env.FlagKTrigCD) then v21("Bestial Wrath");elseif (aura_env.config[tostring(v24.BestialWrath)]~=true) then v20("Bestial Wrath");return true;end end if (v3(v24.KillShot) and (FindSpellOverrideByID(v24.KillShot)==v24.BlackArrow) and (v11(v24.WitheringFireBuff))) then local v47=0 -0 ;while true do if (v47==(0 + 0)) then v20("Black Arrow");return true;end end end v38=1;end if (v38==(887 -(261 + 624))) then if (v3(v24.KillCommandSummon) and v29) then if ((aura_env.config[tostring(v24.KillCommandSummon)]==true) and aura_env.FlagKTrigCD) then v21("Kill Command Summon");elseif (aura_env.config[tostring(v24.KillCommandSummon)]~=true) then local v50=0 -0 ;while true do if (v50==(1080 -(1020 + 60))) then v20("Kill Command Summon");return true;end end end end if (v3(v24.KillCommand) and  not v29) then local v48=0 + 0 ;while true do if (v48==(791 -(368 + 423))) then v20("Kill Command");return true;end end end v38=1426 -(630 + 793) ;end if (v38==1) then if (v3(v24.BarbedShot) and ((v16(v24.BarbedShot)<=WeakAuras.gcdDuration()) or (math.floor(v14(v24.BarbedShot))>math.floor(v14(v24.KillCommand))) or (IsPlayerSpell(v24.CallOfTheWild) and v3(v24.CallOfTheWild)) or (v29 and (v16(v24.BarbedShot)<(26 -18))))) then local v49=0 -0 ;while true do if (v49==(0 -0)) then v20("Barbed Shot");return true;end end end if v3(v24.Bloodshed) then if ((aura_env.config[tostring(v24.Bloodshed)]==true) and aura_env.FlagKTrigCD) then v21("Bloodshed");elseif (aura_env.config[tostring(v24.Bloodshed)]~=true) then v20("Bloodshed");return true;end end v38=20 -(10 + 8) ;end end end;if ((v30<(6 -4)) or ( not IsPlayerSpell(v24.BeastCleaveTalent) and (v30<(11 -8)))) then if v34() then return true;end end if ((v30>(444 -(416 + 26))) or (IsPlayerSpell(v24.BeastCleaveTalent) and (v30>(767 -(745 + 21))))) then if v33() then return true;end end v20("Clear");end;