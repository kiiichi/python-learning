function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.ids;aura_env.OutOfRange=false;local v25=WeakAuras.GetNumSetItemsEquipped(172 + 1747 );local v26=0 -0 ;local v27=select(5 -3 ,GetRuneCooldown(1263 -(1091 + 171) ));local v28={};for v49=1 -0 ,5 + 1  do local v50=997 -(915 + 82) ;local v51;local v52;local v53;while true do if (v50==(2 -1)) then table.insert(v28,v51);break;end if (v50==0) then v51,v52,v53=GetRuneCooldown(v49);if v53 then v26=v26 + 1 + 0 ;end v50=1 -0 ;end end end table.sort(v28);local v29=function(v54) if (v28[v54]==(1187 -(1069 + 118))) then return 698 -(208 + 490) ;end return (v28[v54] + v27) -GetTime() ;end;local v30=UnitPower("player",Enum.PowerType.RunicPower);local v31=UnitPowerMax("player",Enum.PowerType.RunicPower);local v32=10;local v33=0 -0 ;for v55=1 -0 ,7 + 33  do local v56=0 -0 ;local v57;while true do if (v56==(0 + 0)) then v57="nameplate"   .. v55 ;if (UnitExists(v57) and  not UnitIsFriend("player",v57) and WeakAuras.CheckRange(v57,v32,"<=")) then v33=v33 + 1 + 0 ;end break;end end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v33);WeakAuras.ScanEvents("K_NEARBY_Wounds",TargetsWithFesteringWounds);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v21("Clear",nil);return;end end local v34={};v34.TwoHandCheck=select(9,C_Item.GetItemInfo(GetInventoryItemLink("player",807 -(368 + 423) )))=="INVTYPE_2HWEAPON" ;v34.StPlanning=v33<=(3 -2) ;v34.AddsRemain=v33>=(204 -(14 + 188)) ;v34.SendingCds=v34.StPlanning or v34.AddsRemain ;v34.CooldownCheck=(IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrostBuff)) or  not IsPlayerSpell(v23.PillarOfFrost) or (v18(78 -(10 + 8) ,v32)<(76 -56)) ;v34.FwfBuffs=((v5("player",v23.PillarOfFrost)<(max(1.5/((443 -(416 + 26)) + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 + 0 ) * (3 + 0))) or (v11(v23.UnholyStrengthBuff) and (v5("player",v23.UnholyStrengthBuff)<(max((1.5 -0)/((1 -0) + ((438.01 -(145 + 293)) * UnitSpellHaste("player"))) ,430.75 -(44 + 386) ) * (1489 -(998 + 488))))) or (IsPlayerSpell(v23.BonegrinderTalent) and v11(v23.BonegrinderFrostBuff) and (v5("player",v23.BonegrinderFrostBuff)<(max((1.5 + 0)/(1 + 0 + ((772.01 -(201 + 571)) * UnitSpellHaste("player"))) ,1138.75 -(116 + 1022) ) * (12 -9))))) and ((v33>(1 + 0)) or (v10(v23.RazoriceDebuff)==(18 -13)) or IsPlayerSpell(v23.ShatteringBladeTalent)) ;v34.RunePooling=IsPlayerSpell(v23.ReapersMarkTalent) and (v7(v23.ReapersMark)<(21 -15)) and (v26<(862 -(814 + 45))) and v34.SendingCds ;v34.RpPooling=IsPlayerSpell(v23.BreathOfSindragosaTalent) and (v7(v23.BreathOfSindragosa)<((9 -5) * WeakAuras.gcdDuration())) and (v30<(4 + 56 + ((13 + 22 + (5 * ((v11(v23.IcyOnslaughtBuff) and (286 -(134 + 151))) or (885 -(261 + 624))))) -(10 * v26)))) and v34.SendingCds ;v34.FrostscythePrio=(4 -1) + (((v25>=(1084 -(1020 + 60))) and  not (IsPlayerSpell(v23.CleavingStrikesTalent) and (v11(v23.RemorselessWinterBuff1) or v11(v23.RemorselessWinterBuff2))) and (3 -2)) or (0 -0)) ;v34.BreathOfSindragosaCheck=IsPlayerSpell(v23.BreathOfSindragosaTalent) and ((v7(v23.BreathOfSindragosa)>(1443 -(630 + 793))) or (v3(v23.BreathOfSindragosa) and (v30>=((203 -143) -((94 -74) * ((IsPlayerSpell(v23.ReapersMarkTalent) and (1 + 0)) or (0 -0))))))) ;local v45={};if (v3(v23.EmpowerRuneWeapon) and ((v26<2) or ( not v11(v23.KillingMachineBuff) and (v30<((815 -(162 + 618)) + (((IsPlayerSpell(v23.IcyOnslaughtTalent) and (1748 -(760 + 987))) or (1913 -(1789 + 124))) * v9(v23.IcyOnslaughtBuff) * (771 -(745 + 21)))))))) then v45.EmpowerRuneWeapon=true;end if (v3(v23.EmpowerRuneWeapon) and (v16(v23.EmpowerRuneWeapon)<=(3 + 3)) and (v9(v23.KillingMachineBuff)<((1 -0) + ((IsPlayerSpell(v23.KillingStreakTalent) and (2 -1)) or (0 -0))))) then v45.EmpowerRuneWeapon=true;end if (v3(v23.PillarOfFrost) and (( not IsPlayerSpell(v23.BreathOfSindragosaTalent) and v34.SendingCds and ( not IsPlayerSpell(v23.ReapersMarkTalent) or (v26>=(7 -5)))) or (v18(1 + 59 ,v32)<(16 + 4)))) then v45.PillarOfFrost=true;end if (v3(v23.PillarOfFrost) and IsPlayerSpell(v23.BreathOfSindragosaTalent) and v34.SendingCds and v34.BreathOfSindragosaCheck and ( not IsPlayerSpell(v23.ReapersMarkTalent) or (v26>=(1 + 1)))) then v45.PillarOfFrost=true;end if (v3(v23.BreathOfSindragosa) and  not v11(v23.BreathOfSindragosaBuff) and (v11(v23.PillarOfFrostBuff) or (v18(1115 -(87 + 968) ,v32)<(88 -68)))) then v45.BreathOfSindragosa=true;end WeakAuras.ScanEvents("K_TRIGED_EXTRA",v45,nil);local v46=function() if (v3(v23.Frostscythe) and ((v9(v23.KillingMachineBuff)==(1386 -(746 + 638))) or (v11(v23.KillingMachineBuff) and (v26>=3))) and (v33>=v34.FrostscythePrio)) then local v64=0 + 0 ;while true do if (v64==(0 + 0)) then v20("Frostscythe");return true;end end end if (v3(v23.Obliterate) and ((v9(v23.KillingMachineBuff)==(343 -(218 + 123))) or (v11(v23.KillingMachineBuff) and (v26>=(1584 -(1535 + 46)))))) then local v65=0 + 0 ;while true do if (v65==(0 -0)) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and ((v11(v23.RimeBuff) and IsPlayerSpell(v23.FrostboundWillTalent)) or  not v12(v23.FrostFeverDebuff))) then local v66=0;while true do if (v66==(1413 -(447 + 966))) then v20("Howling Blast");return true;end end end if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==(13 -8)) and v11(v23.FrostbaneBuff)) then local v67=1817 -(1703 + 114) ;while true do if (v67==(701 -(376 + 325))) then v20("Frost Strike");return true;end end end if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==(8 -3)) and IsPlayerSpell(v23.ShatteringBladeTalent) and (v33<(15 -10)) and  not v34.RpPooling and  not IsPlayerSpell(v23.FrostbaneTalent)) then local v68=0 + 0 ;while true do if (v68==0) then v20("Frost Strike");return true;end end end if (v3(v23.Frostscythe) and v11(v23.KillingMachineBuff) and  not v34.RunePooling and (v33>=v34.FrostscythePrio)) then v20("Frostscythe");return true;end if (v3(v23.Obliterate) and v11(v23.KillingMachineBuff) and  not v34.RunePooling) then v20("Obliterate");return true;end if (v3(v23.HowlingBlast) and (v11(v23.RimeBuff))) then local v69=1467 -(899 + 568) ;while true do if (v69==(0 -0)) then v20("Howling Blast");return true;end end end if (v3(v23.GlacialAdvance) and  not v34.RpPooling) then v20("Glacial Advance");return true;end if (v3(v23.Frostscythe) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) and (v33>=v34.FrostscythePrio)) then local v70=0 -0 ;while true do if (v70==(14 -(9 + 5))) then v20("Frostscythe");return true;end end end if (v3(v23.Obliterate) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff))) then local v71=603 -(268 + 335) ;while true do if (v71==(376 -(85 + 291))) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and  not v11(v23.KillingMachineBuff) and IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) then local v72=0;while true do if (v72==(1265 -(243 + 1022))) then v20("Howling Blast");return true;end end end end;local v47=function() if (v3(v23.RemorselessWinter) and  not IsPlayerSpell(v23.FrozenDominionTalent) and v34.SendingCds and ((v33>(3 -2)) or IsPlayerSpell(v23.GatheringStormTalent) or ((v9(v23.GatheringStormBuff)==(9 + 1)) and (v5("player",v23.GatheringStormBuff)<(WeakAuras.gcdDuration() * (1182 -(1123 + 57)))))) and (v18(871 -(569 + 242) ,v32)>(28 -18))) then if ((aura_env.config[tostring(v23.RemorselessWinter)]==true) and aura_env.FlagKTrigCD) then v21("Remorseless Winter");elseif (aura_env.config[tostring(v23.RemorselessWinter)]~=true) then v20("Remorseless Winter");return true;end end if (v3(v23.FrostwyrmsFury) and IsPlayerSpell(v23.RidersChampionTalent) and IsPlayerSpell(v23.ApocalypseNowTalent) and v34.SendingCds and ((v7(v23.PillarOfFrost)<WeakAuras.gcdDuration()) or (v18(4 + 56 ,v32)<(1044 -(706 + 318)))) and  not IsPlayerSpell(v23.BreathOfSindragosaTalent)) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v76=1251 -(721 + 530) ;while true do if (v76==(0 + 0)) then v20("Frostwyrms Fury");return true;end end end end if (v3(v23.FrostwyrmsFury) and IsPlayerSpell(v23.RidersChampionTalent) and IsPlayerSpell(v23.ApocalypseNowTalent) and v34.SendingCds and ((v7(v23.PillarOfFrost)<WeakAuras.gcdDuration()) or (v18(314 -(163 + 91) ,v32)<(1950 -(1869 + 61)))) and IsPlayerSpell(v23.BreathOfSindragosaTalent) and (v30>=(17 + 43))) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v77=0;while true do if (v77==(0 -0)) then v20("Frostwyrms Fury");return true;end end end end if (v3(v23.ReapersMark) and (v11(v23.PillarOfFrost) or (v7(v23.PillarOfFrost)>(7 -2)) or (v18(54 + 6 ,v32)<(3 + 17)))) then if ((aura_env.config[tostring(v23.ReapersMark)]==true) and aura_env.FlagKTrigCD) then v21("Reapers Mark");elseif (aura_env.config[tostring(v23.ReapersMark)]~=true) then v20("Reapers Mark");return true;end end if (v3(v23.FrostwyrmsFury) and (( not IsPlayerSpell(v23.ApocalypseNowTalent) and (v33<=(701 -(271 + 429))) and ((IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and  not IsPlayerSpell(v23.ObliterationTalent)) or  not IsPlayerSpell(v23.PillarOfFrost)) and v34.FwfBuffs) or (v18(10 + 0 ,v32)<(3 -0)))) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then v20("Frostwyrms Fury");return true;end end if (v3(v23.FrostwyrmsFury) and  not IsPlayerSpell(v23.ApocalypseNowTalent) and (v33>=(1088 -(461 + 625))) and IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and v34.FwfBuffs) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v78=0 + 0 ;while true do if (v78==(1474 -(1329 + 145))) then v20("Frostwyrms Fury");return true;end end end end if (v3(v23.FrostwyrmsFury) and  not IsPlayerSpell(v23.ApocalypseNowTalent) and IsPlayerSpell(v23.ObliterationTalent) and ((IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and  not v34.TwoHandCheck) or ( not v11(v23.PillarOfFrost) and v34.TwoHandCheck and (v7(v23.PillarOfFrost)>(1171 -(418 + 753)))) or  not IsPlayerSpell(v23.PillarOfFrost)) and v34.FwfBuffs) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then v20("Frostwyrms Fury");return true;end end if v3(v23.RaiseDead) then if ((aura_env.config[tostring(v23.RaiseDead)]==true) and aura_env.FlagKTrigCD) then v21("Raise Dead");elseif (aura_env.config[tostring(v23.RaiseDead)]~=true) then v20("Raise Dead");return true;end end if (v3(v23.SoulReaper) and IsPlayerSpell(v23.ReaperOfSoulsTalent) and v11(v23.ReaperOfSoulsBuff) and (v9(v23.KillingMachineBuff)<(973 -(140 + 831)))) then local v73=0 + 0 ;while true do if (v73==(0 + 0)) then v20("Soul Reaper");return true;end end end end;local v48=function() local v58=0 + 0 ;while true do if (v58==(533 -(406 + 123))) then if (v3(v23.HowlingBlast) and  not v11(v23.KillingMachineBuff) and IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) then local v74=1850 -(1409 + 441) ;while true do if (v74==(1769 -(1749 + 20))) then v20("Howling Blast");return true;end end end break;end if (v58==(720 -(15 + 703))) then if (v3(v23.FrostStrike) and  not IsPlayerSpell(v23.ShatteringBladeTalent) and  not v34.RpPooling and ((v31-v30)<(14 + 16))) then v20("Frost Strike");return true;end if (v3(v23.Obliterate) and v11(v23.KillingMachineBuff) and  not v34.RunePooling) then v20("Obliterate");return true;end v58=441 -(262 + 176) ;end if (v58==3) then if (v3(v23.FrostStrike) and  not v34.RpPooling) then v20("Frost Strike");return true;end if (v3(v23.Obliterate) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff))) then v20("Obliterate");return true;end v58=1725 -(345 + 1376) ;end if (v58==(688 -(198 + 490))) then if (v3(v23.Obliterate) and ((v9(v23.KillingMachineBuff)==(5 -3)) or (v11(v23.KillingMachineBuff) and (v26>=(13 -10))))) then v20("Obliterate");return true;end if (v3(v23.HowlingBlast) and v11(v23.RimeBuff) and IsPlayerSpell(v23.FrostboundWillTalent)) then local v75=0 + 0 ;while true do if (v75==(0 + 0)) then v20("Howling Blast");return true;end end end v58=1;end if (v58==1) then if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==(11 -6)) and IsPlayerSpell(v23.ShatteringBladeTalent) and  not v34.RpPooling) then v20("Frost Strike");return true;end if (v3(v23.HowlingBlast) and (v11(v23.RimeBuff))) then v20("Howling Blast");return true;end v58=2;end end end;if v47() then return true;end if (v33>=(1209 -(696 + 510))) then v46();return true;end if v48() then return true;end v20("Clear");end;