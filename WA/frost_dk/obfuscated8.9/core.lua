function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.ids;aura_env.OutOfRange=false;local v25=WeakAuras.GetNumSetItemsEquipped(5362 -3443 );local v26=285 -(134 + 151) ;local v27=select(3 -1 ,GetRuneCooldown(1884 -(1668 + 215) ));local v28={};for v49=1 + 0 ,20 -14  do local v50=0 + 0 ;local v51;local v52;local v53;while true do if (v50==(1 -0)) then table.insert(v28,v51);break;end if (v50==(0 -0)) then v51,v52,v53=GetRuneCooldown(v49);if v53 then v26=v26 + (1825 -(1195 + 629)) ;end v50=519 -(114 + 404) ;end end end table.sort(v28);local v29=function(v54) local v55=241 -(187 + 54) ;while true do if (v55==(488 -(106 + 382))) then if (v28[v54]==(411 -(306 + 105))) then return 0 -0 ;end return (v28[v54] + v27) -GetTime() ;end end end;local v30=UnitPower("player",Enum.PowerType.RunicPower);local v31=UnitPowerMax("player",Enum.PowerType.RunicPower);local v32=21 -11 ;local v33=427 -(166 + 261) ;for v56=508 -(289 + 218) ,1676 -(1373 + 263)  do local v57=1344 -(1213 + 131) ;local v58;while true do if (v57==(0 + 0)) then v58="nameplate"   .. v56 ;if (UnitExists(v58) and  not UnitIsFriend("player",v58) and WeakAuras.CheckRange(v58,v32,"<=")) then v33=v33 + 1 ;end break;end end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v33);WeakAuras.ScanEvents("K_NEARBY_Wounds",TargetsWithFesteringWounds);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v21("Clear",nil);return;end end local v34={};v34.TwoHandCheck=select(6 + 3 ,C_Item.GetItemInfo(GetInventoryItemLink("player",58 -42 )))=="INVTYPE_2HWEAPON" ;v34.StPlanning=v33<=(3 -2) ;v34.AddsRemain=v33>=(2 -0) ;v34.SendingCds=v34.StPlanning or v34.AddsRemain ;v34.CooldownCheck=(IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrostBuff)) or  not IsPlayerSpell(v23.PillarOfFrost) or (v18(919 -(814 + 45) ,v32)<(49 -29)) ;v34.FwfBuffs=((v5("player",v23.PillarOfFrost)<(max((1.5 + 0)/((1 -0) + ((341.01 -(218 + 123)) * UnitSpellHaste("player"))) ,0.75 + 0 ) * (888 -(261 + 624)))) or (v11(v23.UnholyStrengthBuff) and (v5("player",v23.UnholyStrengthBuff)<(max((1.5 -0)/((1081 -(1020 + 60)) + ((560.01 -(306 + 254)) * UnitSpellHaste("player"))) ,1423.75 -(630 + 793) ) * (9 -6)))) or (IsPlayerSpell(v23.BonegrinderTalent) and v11(v23.BonegrinderFrostBuff) and (v5("player",v23.BonegrinderFrostBuff)<(max((4.5 -3)/(1 + 0 + ((1467.01 -(899 + 568)) * UnitSpellHaste("player"))) ,0.75 -0 ) * (1750 -(760 + 987)))))) and ((v33>(1914 -(1789 + 124))) or (v10(v23.RazoriceDebuff)==(771 -(745 + 21))) or IsPlayerSpell(v23.ShatteringBladeTalent)) ;v34.RunePooling=IsPlayerSpell(v23.ReapersMarkTalent) and (v7(v23.ReapersMark)<6) and (v26<(2 + 1)) and v34.SendingCds ;v34.RpPooling=IsPlayerSpell(v23.BreathOfSindragosaTalent) and (v7(v23.BreathOfSindragosa)<((10 -6) * WeakAuras.gcdDuration())) and (v30<((235 -175) + ((1 + 34 + ((4 + 1) * ((v11(v23.IcyOnslaughtBuff) and (1056 -(87 + 968))) or (0 -0)))) -((10 + 0) * v26)))) and v34.SendingCds ;v34.FrostscythePrio=3 + (((v25>=(8 -4)) and  not (IsPlayerSpell(v23.CleavingStrikesTalent) and v11(v23.RemorselessWinterBuff)) and (1414 -(447 + 966))) or (0 -0)) ;v34.BreathOfSindragosaCheck=IsPlayerSpell(v23.BreathOfSindragosaTalent) and ((v7(v23.BreathOfSindragosa)>(1837 -(1703 + 114))) or (v3(v23.BreathOfSindragosa) and (v30>=((4 + 56) -((721 -(376 + 325)) * ((IsPlayerSpell(v23.ReapersMarkTalent) and 1) or (0 -0))))))) ;local v45={};if (v3(v23.EmpowerRuneWeapon) and ((v26<(1253 -(721 + 530))) or ( not v11(v23.KillingMachineBuff) and (v30<((107 -72) + (((IsPlayerSpell(v23.IcyOnslaughtTalent) and (1 + 0)) or (0 -0)) * v9(v23.IcyOnslaughtBuff) * (19 -(9 + 5)))))))) then v45.EmpowerRuneWeapon=true;end if (v3(v23.EmpowerRuneWeapon) and (v16(v23.EmpowerRuneWeapon)<=(382 -(85 + 291))) and (v9(v23.KillingMachineBuff)<((1266 -(243 + 1022)) + ((IsPlayerSpell(v23.KillingStreakTalent) and (3 -2)) or (1086 -(461 + 625)))))) then v45.EmpowerRuneWeapon=true;end if (v3(v23.PillarOfFrost) and (( not IsPlayerSpell(v23.BreathOfSindragosaTalent) and v34.SendingCds and ( not IsPlayerSpell(v23.ReapersMarkTalent) or (v26>=(2 + 0)))) or (v18(1240 -(1123 + 57) ,v32)<(2 + 18)))) then v45.PillarOfFrost=true;end if (v3(v23.PillarOfFrost) and IsPlayerSpell(v23.BreathOfSindragosaTalent) and v34.SendingCds and v34.BreathOfSindragosaCheck and ( not IsPlayerSpell(v23.ReapersMarkTalent) or (v26>=2))) then v45.PillarOfFrost=true;end if (v3(v23.BreathOfSindragosa) and  not v11(v23.BreathOfSindragosaBuff) and (v11(v23.PillarOfFrostBuff) or (v18(49 + 11 ,v32)<(274 -(163 + 91))))) then v45.BreathOfSindragosa=true;end WeakAuras.ScanEvents("K_TRIGED_EXTRA",v45,nil);local v46=function() local v59=1930 -(1869 + 61) ;while true do if (v59==2) then if (v3(v23.GlacialAdvance) and  not v34.RpPooling) then v20("Glacial Advance");return true;end if (v3(v23.Frostscythe) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) and (v33>=v34.FrostscythePrio)) then local v72=0;while true do if (v72==0) then v20("Frostscythe");return true;end end end if (v3(v23.Obliterate) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff))) then local v73=0 + 0 ;while true do if (v73==(0 + 0)) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and  not v11(v23.KillingMachineBuff) and IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) then local v74=0 -0 ;while true do if (v74==(0 -0)) then v20("Howling Blast");return true;end end end break;end if (v59==1) then if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==(1 + 4)) and IsPlayerSpell(v23.ShatteringBladeTalent) and (v33<(6 -1)) and  not v34.RpPooling and  not IsPlayerSpell(v23.FrostbaneTalent)) then v20("Frost Strike");return true;end if (v3(v23.Frostscythe) and v11(v23.KillingMachineBuff) and  not v34.RunePooling and (v33>=v34.FrostscythePrio)) then local v75=0 + 0 ;while true do if (v75==0) then v20("Frostscythe");return true;end end end if (v3(v23.Obliterate) and v11(v23.KillingMachineBuff) and  not v34.RunePooling) then v20("Obliterate");return true;end if (v3(v23.HowlingBlast) and (v11(v23.RimeBuff))) then local v76=0 + 0 ;while true do if (v76==(1474 -(1329 + 145))) then v20("Howling Blast");return true;end end end v59=1 + 1 ;end if (v59==(971 -(140 + 831))) then if (v3(v23.Frostscythe) and ((v9(v23.KillingMachineBuff)==(4 -2)) or (v11(v23.KillingMachineBuff) and (v26>=(1853 -(1409 + 441))))) and (v33>=v34.FrostscythePrio)) then local v77=718 -(15 + 703) ;while true do if (v77==(0 + 0)) then v20("Frostscythe");return true;end end end if (v3(v23.Obliterate) and ((v9(v23.KillingMachineBuff)==(440 -(262 + 176))) or (v11(v23.KillingMachineBuff) and (v26>=(1724 -(345 + 1376)))))) then local v78=688 -(198 + 490) ;while true do if (v78==(0 -0)) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and ((v11(v23.RimeBuff) and IsPlayerSpell(v23.FrostboundWillTalent)) or  not v12(v23.FrostFeverDebuff))) then local v79=0 -0 ;while true do if (v79==(0 -0)) then v20("Howling Blast");return true;end end end if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==(119 -(4 + 110))) and v11(v23.FrostbaneBuff)) then local v80=584 -(57 + 527) ;while true do if (v80==(1206 -(696 + 510))) then v20("Frost Strike");return true;end end end v59=104 -(17 + 86) ;end end end;local v47=function() if (v3(v23.RemorselessWinter) and  not IsPlayerSpell(v23.FrozenDominionTalent) and v34.SendingCds and ((v33>(1 + 0)) or IsPlayerSpell(v23.GatheringStormTalent) or ((v9(v23.GatheringStormBuff)==(22 -12)) and (v5("player",v23.GatheringStormBuff)<(WeakAuras.gcdDuration() * (3 -1))))) and (v18(173 -113 ,v32)>(1272 -(1091 + 171)))) then if ((aura_env.config[tostring(v23.RemorselessWinter)]==true) and aura_env.FlagKTrigCD) then v21("Remorseless Winter");elseif (aura_env.config[tostring(v23.RemorselessWinter)]~=true) then local v81=0 + 0 ;while true do if (v81==(0 -0)) then v20("Remorseless Winter");return true;end end end end if (v3(v23.FrostwyrmsFury) and IsPlayerSpell(v23.RidersChampionTalent) and IsPlayerSpell(v23.ApocalypseNowTalent) and v34.SendingCds and ((v7(v23.PillarOfFrost)<WeakAuras.gcdDuration()) or (v18(198 -138 ,v32)<20)) and  not IsPlayerSpell(v23.BreathOfSindragosaTalent)) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v82=374 -(123 + 251) ;while true do if (v82==(0 -0)) then v20("Frostwyrms Fury");return true;end end end end if (v3(v23.FrostwyrmsFury) and IsPlayerSpell(v23.RidersChampionTalent) and IsPlayerSpell(v23.ApocalypseNowTalent) and v34.SendingCds and ((v7(v23.PillarOfFrost)<WeakAuras.gcdDuration()) or (v18(758 -(208 + 490) ,v32)<20)) and IsPlayerSpell(v23.BreathOfSindragosaTalent) and (v30>=60)) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then v20("Frostwyrms Fury");return true;end end if (v3(v23.ReapersMark) and (v11(v23.PillarOfFrost) or (v7(v23.PillarOfFrost)>(1 + 4)) or (v18(6 + 54 ,v32)<(9 + 11)))) then if ((aura_env.config[tostring(v23.ReapersMark)]==true) and aura_env.FlagKTrigCD) then v21("Reapers Mark");elseif (aura_env.config[tostring(v23.ReapersMark)]~=true) then local v83=0;while true do if ((0 + 0)==v83) then v20("Reapers Mark");return true;end end end end if (v3(v23.FrostwyrmsFury) and (( not IsPlayerSpell(v23.ApocalypseNowTalent) and (v33<=(1258 -(1043 + 214))) and ((IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and  not IsPlayerSpell(v23.ObliterationTalent)) or  not IsPlayerSpell(v23.PillarOfFrost)) and v34.FwfBuffs) or (v18(846 -(660 + 176) ,v32)<(1215 -(323 + 889))))) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v84=0 + 0 ;while true do if (v84==(202 -(14 + 188))) then v20("Frostwyrms Fury");return true;end end end end if (v3(v23.FrostwyrmsFury) and  not IsPlayerSpell(v23.ApocalypseNowTalent) and (v33>=(677 -(534 + 141))) and IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and v34.FwfBuffs) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v85=0 + 0 ;while true do if (v85==(0 + 0)) then v20("Frostwyrms Fury");return true;end end end end if (v3(v23.FrostwyrmsFury) and  not IsPlayerSpell(v23.ApocalypseNowTalent) and IsPlayerSpell(v23.ObliterationTalent) and ((IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and  not v34.TwoHandCheck) or ( not v11(v23.PillarOfFrost) and v34.TwoHandCheck and (v7(v23.PillarOfFrost)>(0 + 0))) or  not IsPlayerSpell(v23.PillarOfFrost)) and v34.FwfBuffs) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v86=0 -0 ;while true do if (v86==(0 -0)) then v20("Frostwyrms Fury");return true;end end end end if v3(v23.RaiseDead) then if ((aura_env.config[tostring(v23.RaiseDead)]==true) and aura_env.FlagKTrigCD) then v21("Raise Dead");elseif (aura_env.config[tostring(v23.RaiseDead)]~=true) then v20("Raise Dead");return true;end end if (v3(v23.SoulReaper) and IsPlayerSpell(v23.ReaperOfSoulsTalent) and v11(v23.ReaperOfSoulsBuff) and (v9(v23.KillingMachineBuff)<(5 -3))) then local v66=0 + 0 ;while true do if ((0 -0)==v66) then v20("Soul Reaper");return true;end end end end;local v48=function() if (v3(v23.Obliterate) and ((v9(v23.KillingMachineBuff)==(2 + 0)) or (v11(v23.KillingMachineBuff) and (v26>=(399 -(115 + 281)))))) then local v67=0 + 0 ;while true do if (v67==(0 -0)) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and v11(v23.RimeBuff) and IsPlayerSpell(v23.FrostboundWillTalent)) then local v68=850 -(20 + 830) ;while true do if (v68==(0 + 0)) then v20("Howling Blast");return true;end end end if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==(5 + 0)) and IsPlayerSpell(v23.ShatteringBladeTalent) and  not v34.RpPooling) then local v69=0 -0 ;while true do if (v69==0) then v20("Frost Strike");return true;end end end if (v3(v23.HowlingBlast) and (v11(v23.RimeBuff))) then v20("Howling Blast");return true;end if (v3(v23.FrostStrike) and  not IsPlayerSpell(v23.ShatteringBladeTalent) and  not v34.RpPooling and ((v31-v30)<30)) then v20("Frost Strike");return true;end if (v3(v23.Obliterate) and v11(v23.KillingMachineBuff) and  not v34.RunePooling) then local v70=0;while true do if (v70==(738 -(542 + 196))) then v20("Obliterate");return true;end end end if (v3(v23.FrostStrike) and  not v34.RpPooling) then local v71=0 -0 ;while true do if (v71==(0 + 0)) then v20("Frost Strike");return true;end end end if (v3(v23.Obliterate) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff))) then v20("Obliterate");return true;end if (v3(v23.HowlingBlast) and  not v11(v23.KillingMachineBuff) and IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) then v20("Howling Blast");return true;end end;if v47() then return true;end if (v33>=(870 -(550 + 317))) then local v65=0 -0 ;while true do if (v65==(0 -0)) then v46();return true;end end end if v48() then return true;end v20("Clear");end;