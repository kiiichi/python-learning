function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.ids;aura_env.OutOfRange=false;local v25=WeakAuras.GetNumSetItemsEquipped(1919);local v26=1530 -(568 + 962) ;local v27=select(5 -3 ,GetRuneCooldown(2 -1 ));local v28={};for v49=1,6 do local v50=0 + 0 ;local v51;local v52;local v53;while true do if (v50==(1955 -(508 + 1446))) then table.insert(v28,v51);break;end if (v50==(0 + 0)) then v51,v52,v53=GetRuneCooldown(v49);if v53 then v26=v26 + (998 -(915 + 82)) ;end v50=1;end end end table.sort(v28);local v29=function(v54) if (v28[v54]==(0 -0)) then return 0;end return (v28[v54] + v27) -GetTime() ;end;local v30=UnitPower("player",Enum.PowerType.RunicPower);local v31=UnitPowerMax("player",Enum.PowerType.RunicPower);local v32=6 + 4 ;local v33=0 -0 ;for v55=1188 -(1069 + 118) ,90 -50  do local v56="nameplate"   .. v55 ;if (UnitExists(v56) and  not UnitIsFriend("player",v56) and WeakAuras.CheckRange(v56,v32,"<=")) then v33=v33 + (1 -0) ;end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v33);WeakAuras.ScanEvents("K_NEARBY_Wounds",TargetsWithFesteringWounds);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then local v68=0 + 0 ;while true do if (v68==(0 -0)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v68=1 + 0 ;end if (v68==(792 -(368 + 423))) then v21("Clear",nil);return;end end end end local v34={};v34.TwoHandCheck=select(28 -19 ,C_Item.GetItemInfo(GetInventoryItemLink("player",34 -(10 + 8) )))=="INVTYPE_2HWEAPON" ;v34.StPlanning=v33<=(3 -2) ;v34.AddsRemain=v33>=(444 -(416 + 26)) ;v34.SendingCds=v34.StPlanning or v34.AddsRemain ;v34.CooldownCheck=(IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrostBuff)) or  not IsPlayerSpell(v23.PillarOfFrost) or (v18(60,v32)<20) ;v34.FwfBuffs=((v5("player",v23.PillarOfFrost)<(max((3.5 -2)/(1 + ((0.01 + 0) * UnitSpellHaste("player"))) ,0.75 -0 ) * 3)) or (v11(v23.UnholyStrengthBuff) and (v5("player",v23.UnholyStrengthBuff)<(max(1.5/((439 -(145 + 293)) + (0.01 * UnitSpellHaste("player"))) ,430.75 -(44 + 386) ) * 3))) or (IsPlayerSpell(v23.BonegrinderTalent) and v11(v23.BonegrinderFrostBuff) and (v5("player",v23.BonegrinderFrostBuff)<(max((1487.5 -(998 + 488))/(1 + 0 + ((0.01 + 0) * UnitSpellHaste("player"))) ,772.75 -(201 + 571) ) * (1141 -(116 + 1022)))))) and ((v33>(4 -3)) or (v10(v23.RazoriceDebuff)==(3 + 2)) or IsPlayerSpell(v23.ShatteringBladeTalent)) ;v34.RunePooling=IsPlayerSpell(v23.ReapersMarkTalent) and (v7(v23.ReapersMark)<6) and (v26<(10 -7)) and v34.SendingCds ;v34.RpPooling=IsPlayerSpell(v23.BreathOfSindragosaTalent) and (v7(v23.BreathOfSindragosa)<((14 -10) * WeakAuras.gcdDuration())) and (v30<((919 -(814 + 45)) + (((86 -51) + ((1 + 4) * ((v11(v23.IcyOnslaughtBuff) and (1 + 0)) or (885 -(261 + 624))))) -(10 * v26)))) and v34.SendingCds ;v34.FrostscythePrio=3 + (((v25>=(6 -2)) and IsPlayerSpell(v23.RidersChampionTalent) and  not (IsPlayerSpell(v23.CleavingStrikesTalent) and v11(v23.RemorselessWinterBuff)) and (1081 -(1020 + 60))) or 0) ;v34.BreathOfSindragosaCheck=IsPlayerSpell(v23.BreathOfSindragosaTalent) and ((v7(v23.BreathOfSindragosa)>(1443 -(630 + 793))) or (v3(v23.BreathOfSindragosa) and (v30>=((203 -143) -((94 -74) * ((IsPlayerSpell(v23.ReapersMarkTalent) and (1 + 0)) or (0 -0))))))) ;local v45={};if (v3(v23.EmpowerRuneWeapon) and ((v26<(1749 -(760 + 987))) or ( not v11(v23.KillingMachineBuff) and (v30<((1948 -(1789 + 124)) + (((IsPlayerSpell(v23.IcyOnslaughtTalent) and 1) or (766 -(745 + 21))) * v9(v23.IcyOnslaughtBuff) * (2 + 3))))))) then v45.EmpowerRuneWeapon=true;end if (v3(v23.EmpowerRuneWeapon) and (v16(v23.EmpowerRuneWeapon)<=(16 -10)) and (v9(v23.KillingMachineBuff)<((3 -2) + ((IsPlayerSpell(v23.KillingStreakTalent) and 1) or (0 + 0))))) then v45.EmpowerRuneWeapon=true;end if (v3(v23.PillarOfFrost) and (( not IsPlayerSpell(v23.BreathOfSindragosaTalent) and v34.SendingCds and ( not IsPlayerSpell(v23.ReapersMarkTalent) or (v26>=2))) or (v18(48 + 12 ,v32)<20))) then v45.PillarOfFrost=true;end if (v3(v23.PillarOfFrost) and IsPlayerSpell(v23.BreathOfSindragosaTalent) and v34.SendingCds and v34.BreathOfSindragosaCheck and ( not IsPlayerSpell(v23.ReapersMarkTalent) or (v26>=(1057 -(87 + 968))))) then v45.PillarOfFrost=true;end if (v3(v23.BreathOfSindragosa) and  not v11(v23.BreathOfSindragosaBuff) and (v11(v23.PillarOfFrostBuff) or (v18(264 -204 ,v32)<20))) then v45.BreathOfSindragosa=true;end WeakAuras.ScanEvents("K_TRIGED_EXTRA",v45,nil);local v46=function() local v57=0;while true do if (v57==1) then if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==5) and IsPlayerSpell(v23.ShatteringBladeTalent) and (v33<(5 + 0)) and  not v34.RpPooling and  not IsPlayerSpell(v23.FrostbaneTalent)) then local v69=0 -0 ;while true do if ((1413 -(447 + 966))==v69) then v20("Frost Strike");return true;end end end if (v3(v23.Frostscythe) and v11(v23.KillingMachineBuff) and  not v34.RunePooling and (v33>=v34.FrostscythePrio)) then local v70=0 -0 ;while true do if (v70==0) then v20("Frostscythe");return true;end end end if (v3(v23.Obliterate) and v11(v23.KillingMachineBuff) and  not v34.RunePooling) then v20("Obliterate");return true;end if (v3(v23.HowlingBlast) and (v11(v23.RimeBuff))) then v20("Howling Blast");return true;end v57=1819 -(1703 + 114) ;end if (v57==2) then if (v3(v23.GlacialAdvance) and  not v34.RpPooling) then v20("Glacial Advance");return true;end if (v3(v23.Frostscythe) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) and (v33>=v34.FrostscythePrio)) then v20("Frostscythe");return true;end if (v3(v23.Obliterate) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff))) then local v71=701 -(376 + 325) ;while true do if ((0 -0)==v71) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and  not v11(v23.KillingMachineBuff) and IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) then local v72=0 -0 ;while true do if (v72==(0 + 0)) then v20("Howling Blast");return true;end end end break;end if (v57==(0 -0)) then if (v3(v23.Frostscythe) and ((v9(v23.KillingMachineBuff)==(16 -(9 + 5))) or (v11(v23.KillingMachineBuff) and (v26>=(379 -(85 + 291))))) and (v33>=v34.FrostscythePrio)) then local v73=1265 -(243 + 1022) ;while true do if (v73==(0 -0)) then v20("Frostscythe");return true;end end end if (v3(v23.Obliterate) and ((v9(v23.KillingMachineBuff)==2) or (v11(v23.KillingMachineBuff) and (v26>=3)))) then v20("Obliterate");return true;end if (v3(v23.HowlingBlast) and ((v11(v23.RimeBuff) and IsPlayerSpell(v23.FrostboundWillTalent)) or  not v12(v23.FrostFeverDebuff))) then local v74=0 + 0 ;while true do if ((1180 -(1123 + 57))==v74) then v20("Howling Blast");return true;end end end if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==(5 + 0)) and v11(v23.FrostbaneBuff)) then v20("Frost Strike");return true;end v57=255 -(163 + 91) ;end end end;local v47=function() if (v3(v23.RemorselessWinter) and  not IsPlayerSpell(v23.FrozenDominionTalent) and v34.SendingCds and ((v33>(1931 -(1869 + 61))) or IsPlayerSpell(v23.GatheringStormTalent) or ((v9(v23.GatheringStormBuff)==(3 + 7)) and (v5("player",v23.GatheringStormBuff)<(WeakAuras.gcdDuration() * (6 -4))))) and (v18(60,v32)>(15 -5))) then if ((aura_env.config[tostring(v23.RemorselessWinter)]==true) and aura_env.FlagKTrigCD) then v21("Remorseless Winter");elseif (aura_env.config[tostring(v23.RemorselessWinter)]~=true) then local v75=0;while true do if (v75==(0 + 0)) then v20("Remorseless Winter");return true;end end end end if (v3(v23.FrostwyrmsFury) and IsPlayerSpell(v23.RidersChampionTalent) and IsPlayerSpell(v23.ApocalypseNowTalent) and v34.SendingCds and ((v7(v23.PillarOfFrost)<WeakAuras.gcdDuration()) or (v18(82 -22 ,v32)<(19 + 1))) and  not IsPlayerSpell(v23.BreathOfSindragosaTalent)) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then v20("Frostwyrms Fury");return true;end end if (v3(v23.FrostwyrmsFury) and IsPlayerSpell(v23.RidersChampionTalent) and IsPlayerSpell(v23.ApocalypseNowTalent) and v34.SendingCds and ((v7(v23.PillarOfFrost)<WeakAuras.gcdDuration()) or (v18(1534 -(1329 + 145) ,v32)<20)) and IsPlayerSpell(v23.BreathOfSindragosaTalent) and (v30>=60)) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v76=971 -(140 + 831) ;while true do if ((1850 -(1409 + 441))==v76) then v20("Frostwyrms Fury");return true;end end end end if (v3(v23.ReapersMark) and (v11(v23.PillarOfFrost) or (v7(v23.PillarOfFrost)>(723 -(15 + 703))) or (v18(28 + 32 ,v32)<20))) then if ((aura_env.config[tostring(v23.ReapersMark)]==true) and aura_env.FlagKTrigCD) then v21("Reapers Mark");elseif (aura_env.config[tostring(v23.ReapersMark)]~=true) then local v77=438 -(262 + 176) ;while true do if (v77==(1721 -(345 + 1376))) then v20("Reapers Mark");return true;end end end end if (v3(v23.FrostwyrmsFury) and (( not IsPlayerSpell(v23.ApocalypseNowTalent) and (v33<=(689 -(198 + 490))) and ((IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and  not IsPlayerSpell(v23.ObliterationTalent)) or  not IsPlayerSpell(v23.PillarOfFrost)) and v34.FwfBuffs) or (v18(44 -34 ,v32)<(6 -3)))) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then v20("Frostwyrms Fury");return true;end end if (v3(v23.FrostwyrmsFury) and  not IsPlayerSpell(v23.ApocalypseNowTalent) and (v33>=(1208 -(696 + 510))) and IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and v34.FwfBuffs) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v78=0 -0 ;while true do if (v78==(1262 -(1091 + 171))) then v20("Frostwyrms Fury");return true;end end end end if (v3(v23.FrostwyrmsFury) and  not IsPlayerSpell(v23.ApocalypseNowTalent) and IsPlayerSpell(v23.ObliterationTalent) and ((IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and  not v34.TwoHandCheck) or ( not v11(v23.PillarOfFrost) and v34.TwoHandCheck and (v7(v23.PillarOfFrost)>(0 + 0))) or  not IsPlayerSpell(v23.PillarOfFrost)) and v34.FwfBuffs) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v79=0 -0 ;while true do if (v79==0) then v20("Frostwyrms Fury");return true;end end end end if v3(v23.RaiseDead) then if ((aura_env.config[tostring(v23.RaiseDead)]==true) and aura_env.FlagKTrigCD) then v21("Raise Dead");elseif (aura_env.config[tostring(v23.RaiseDead)]~=true) then v20("Raise Dead");return true;end end if (v3(v23.SoulReaper) and IsPlayerSpell(v23.ReaperOfSoulsTalent) and v11(v23.ReaperOfSoulsBuff) and (v9(v23.KillingMachineBuff)<(6 -4))) then v20("Soul Reaper");return true;end end;local v48=function() if (v3(v23.Obliterate) and ((v11(v23.KillingMachineBuff)==(376 -(123 + 251))) or (v11(v23.KillingMachineBuff) and (v26<=(14 -11))))) then local v63=698 -(208 + 490) ;while true do if (v63==(0 + 0)) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and v11(v23.RimeBuff) and IsPlayerSpell(v23.FrostboundWillTalent)) then local v64=0 + 0 ;while true do if (v64==(836 -(660 + 176))) then v20("Howling Blast");return true;end end end if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==5) and IsPlayerSpell(v23.ShatteringBladeTalent) and  not v34.RpPooling) then local v65=0 + 0 ;while true do if (v65==(202 -(14 + 188))) then v20("Frost Strike");return true;end end end if (v3(v23.HowlingBlast) and (v11(v23.RimeBuff))) then v20("Howling Blast");return true;end if (v3(v23.FrostStrike) and  not IsPlayerSpell(v23.ShatteringBladeTalent) and  not v34.RpPooling and ((v31-v30)<(705 -(534 + 141)))) then local v66=0;while true do if (v66==0) then v20("Frost Strike");return true;end end end if (v3(v23.Obliterate) and v11(v23.KillingMachineBuff) and  not v34.RunePooling) then v20("Obliterate");return true;end if (v3(v23.FrostStrike) and  not v34.RpPooling) then v20("Frost Strike");return true;end if (v3(v23.Obliterate) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff))) then local v67=0 + 0 ;while true do if (v67==(0 + 0)) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and  not v11(v23.KillingMachineBuff) and IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) then v20("Howling Blast");return true;end end;if v47() then return true;end if (v33>=(3 + 0)) then v46();return true;end if v48() then return true;end v20("Clear");end;