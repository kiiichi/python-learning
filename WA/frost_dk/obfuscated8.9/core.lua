function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.ids;aura_env.OutOfRange=false;local v25=WeakAuras.GetNumSetItemsEquipped(1919);local v26=0;local v27=select(2,GetRuneCooldown(1 -0 ));local v28={};for v49=491 -(59 + 431) ,733 -(433 + 294)  do local v50,v51,v52=GetRuneCooldown(v49);if v52 then v26=v26 + (1847 -(1228 + 618)) ;end table.insert(v28,v50);end table.sort(v28);local v29=function(v53) local v54=0 -0 ;while true do if (v54==(0 -0)) then if (v28[v53]==0) then return 0;end return (v28[v53] + v27) -GetTime() ;end end end;local v30=UnitPower("player",Enum.PowerType.RunicPower);local v31=UnitPowerMax("player",Enum.PowerType.RunicPower);local v32=10;local v33=952 -(802 + 150) ;for v55=2 -1 ,72 -32  do local v56="nameplate"   .. v55 ;if (UnitExists(v56) and  not UnitIsFriend("player",v56) and WeakAuras.CheckRange(v56,v32,"<=")) then v33=v33 + 1 ;end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v33);WeakAuras.ScanEvents("K_NEARBY_Wounds",TargetsWithFesteringWounds);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then local v68=0 + 0 ;while true do if (v68==(998 -(915 + 82))) then v21("Clear",nil);return;end if (v68==(0 -0)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v68=1;end end end end local v34={};v34.TwoHandCheck=select(6 + 3 ,C_Item.GetItemInfo(GetInventoryItemLink("player",20 -4 )))=="INVTYPE_2HWEAPON" ;v34.StPlanning=v33<=(1188 -(1069 + 118)) ;v34.AddsRemain=v33>=(4 -2) ;v34.SendingCds=v34.StPlanning or v34.AddsRemain ;v34.CooldownCheck=(IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrostBuff)) or  not IsPlayerSpell(v23.PillarOfFrost) or (v18(131 -71 ,v32)<(4 + 16)) ;v34.FwfBuffs=((v5("player",v23.PillarOfFrost)<(max(1.5/(1 + ((0.01 -0) * UnitSpellHaste("player"))) ,0.75 + 0 ) * (794 -(368 + 423)))) or (v11(v23.UnholyStrengthBuff) and (v5("player",v23.UnholyStrengthBuff)<(max(1.5/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75 -0 ) * (21 -(10 + 8))))) or (IsPlayerSpell(v23.BonegrinderTalent) and v11(v23.BonegrinderFrostBuff) and (v5("player",v23.BonegrinderFrostBuff)<(max(1.5/(1 + (0.01 * UnitSpellHaste("player"))) ,0.75) * (11 -8))))) and ((v33>(443 -(416 + 26))) or (v10(v23.RazoriceDebuff)==(15 -10)) or IsPlayerSpell(v23.ShatteringBladeTalent)) ;v34.RunePooling=IsPlayerSpell(v23.ReapersMarkTalent) and (v7(v23.ReapersMark)<(3 + 3)) and (v26<3) and v34.SendingCds ;v34.RpPooling=IsPlayerSpell(v23.BreathOfSindragosaTalent) and (v7(v23.BreathOfSindragosa)<(4 * WeakAuras.gcdDuration())) and (v30<((106 -46) + ((35 + (5 * ((v11(v23.IcyOnslaughtBuff) and (439 -(145 + 293))) or (430 -(44 + 386))))) -(10 * v26)))) and v34.SendingCds ;v34.FrostscythePrio=3 + (((v25>=(1490 -(998 + 488))) and IsPlayerSpell(v23.RidersChampionTalent) and  not (IsPlayerSpell(v23.CleavingStrikesTalent) and v11(v23.RemorselessWinterBuff)) and (1 + 0)) or (0 + 0)) ;v34.BreathOfSindragosaCheck=IsPlayerSpell(v23.BreathOfSindragosaTalent) and ((v7(v23.BreathOfSindragosa)>20) or (v3(v23.BreathOfSindragosa) and (v30>=((832 -(201 + 571)) -((1158 -(116 + 1022)) * ((IsPlayerSpell(v23.ReapersMarkTalent) and (4 -3)) or (0 + 0))))))) ;local v45={};if (v3(v23.EmpowerRuneWeapon) and ((v26<(7 -5)) or ( not v11(v23.KillingMachineBuff) and (v30<((124 -89) + (((IsPlayerSpell(v23.IcyOnslaughtTalent) and (860 -(814 + 45))) or (0 -0)) * v9(v23.IcyOnslaughtBuff) * 5)))))) then v45.EmpowerRuneWeapon=true;end if (v3(v23.EmpowerRuneWeapon) and (v16(v23.EmpowerRuneWeapon)<=(1 + 5)) and (v9(v23.KillingMachineBuff)<(1 + 0 + ((IsPlayerSpell(v23.KillingStreakTalent) and 1) or (885 -(261 + 624)))))) then v45.EmpowerRuneWeapon=true;end if (v3(v23.PillarOfFrost) and (( not IsPlayerSpell(v23.BreathOfSindragosaTalent) and v34.SendingCds and ( not IsPlayerSpell(v23.ReapersMarkTalent) or (v26>=(3 -1)))) or (v18(1140 -(1020 + 60) ,v32)<(1443 -(630 + 793))))) then v45.PillarOfFrost=true;end if (v3(v23.PillarOfFrost) and IsPlayerSpell(v23.BreathOfSindragosaTalent) and v34.SendingCds and v34.BreathOfSindragosaCheck and ( not IsPlayerSpell(v23.ReapersMarkTalent) or (v26>=2))) then v45.PillarOfFrost=true;end if (v3(v23.BreathOfSindragosa) and  not v11(v23.BreathOfSindragosaBuff) and (v11(v23.PillarOfFrostBuff) or (v18(203 -143 ,v32)<20))) then v45.BreathOfSindragosa=true;end WeakAuras.ScanEvents("K_TRIGED_EXTRA",v45,nil);local v46=function() local v57=0 -0 ;while true do if (v57==2) then if (v3(v23.Obliterate) and v11(v23.KillingMachineBuff) and  not v34.RunePooling) then local v69=0;while true do if ((0 + 0)==v69) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and (v11(v23.RimeBuff))) then v20("Howling Blast");return true;end if (v3(v23.GlacialAdvance) and  not v34.RpPooling) then local v70=0;while true do if (0==v70) then v20("Glacial Advance");return true;end end end v57=9 -6 ;end if (v57==(1750 -(760 + 987))) then if (v3(v23.Frostscythe) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) and (v33>=v34.FrostscythePrio)) then v20("Frostscythe");return true;end if (v3(v23.Obliterate) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff))) then v20("Obliterate");return true;end if (v3(v23.HowlingBlast) and  not v11(v23.KillingMachineBuff) and IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) then v20("Howling Blast");return true;end break;end if (v57==1) then if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==(1918 -(1789 + 124))) and v11(v23.FrostbaneBuff)) then v20("Frost Strike");return true;end if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==5) and IsPlayerSpell(v23.ShatteringBladeTalent) and (v33<(771 -(745 + 21))) and  not v34.RpPooling and  not IsPlayerSpell(v23.FrostbaneTalent)) then v20("Frost Strike");return true;end if (v3(v23.Frostscythe) and v11(v23.KillingMachineBuff) and  not v34.RunePooling and (v33>=v34.FrostscythePrio)) then v20("Frostscythe");return true;end v57=2;end if ((0 + 0)==v57) then if (v3(v23.Frostscythe) and ((v9(v23.KillingMachineBuff)==(5 -3)) or (v11(v23.KillingMachineBuff) and (v26>=(11 -8)))) and (v33>=v34.FrostscythePrio)) then v20("Frostscythe");return true;end if (v3(v23.Obliterate) and ((v9(v23.KillingMachineBuff)==(1 + 1)) or (v11(v23.KillingMachineBuff) and (v26>=3)))) then v20("Obliterate");return true;end if (v3(v23.HowlingBlast) and ((v11(v23.RimeBuff) and IsPlayerSpell(v23.FrostboundWillTalent)) or  not v12(v23.FrostFeverDebuff))) then v20("Howling Blast");return true;end v57=1 + 0 ;end end end;local v47=function() if (v3(v23.RemorselessWinter) and  not IsPlayerSpell(v23.FrozenDominionTalent) and v34.SendingCds and ((v33>(1056 -(87 + 968))) or IsPlayerSpell(v23.GatheringStormTalent) or ((v9(v23.GatheringStormBuff)==10) and (v5("player",v23.GatheringStormBuff)<(WeakAuras.gcdDuration() * (8 -6))))) and (v18(60,v32)>10)) then if ((aura_env.config[tostring(v23.RemorselessWinter)]==true) and aura_env.FlagKTrigCD) then v21("Remorseless Winter");elseif (aura_env.config[tostring(v23.RemorselessWinter)]~=true) then v20("Remorseless Winter");return true;end end if (v3(v23.FrostwyrmsFury) and IsPlayerSpell(v23.RidersChampionTalent) and IsPlayerSpell(v23.ApocalypseNowTalent) and v34.SendingCds and ((v7(v23.PillarOfFrost)<WeakAuras.gcdDuration()) or (v18(60,v32)<(19 + 1))) and  not IsPlayerSpell(v23.BreathOfSindragosaTalent)) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then v20("Frostwyrms Fury");return true;end end if (v3(v23.FrostwyrmsFury) and IsPlayerSpell(v23.RidersChampionTalent) and IsPlayerSpell(v23.ApocalypseNowTalent) and v34.SendingCds and ((v7(v23.PillarOfFrost)<WeakAuras.gcdDuration()) or (v18(135 -75 ,v32)<20)) and IsPlayerSpell(v23.BreathOfSindragosaTalent) and (v30>=(1473 -(447 + 966)))) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then v20("Frostwyrms Fury");return true;end end if (v3(v23.ReapersMark) and (v11(v23.PillarOfFrost) or (v7(v23.PillarOfFrost)>(13 -8)) or (v18(1877 -(1703 + 114) ,v32)<(721 -(376 + 325))))) then if ((aura_env.config[tostring(v23.ReapersMark)]==true) and aura_env.FlagKTrigCD) then v21("Reapers Mark");elseif (aura_env.config[tostring(v23.ReapersMark)]~=true) then local v71=0 -0 ;while true do if (v71==(0 -0)) then v20("Reapers Mark");return true;end end end end if (v3(v23.FrostwyrmsFury) and (( not IsPlayerSpell(v23.ApocalypseNowTalent) and (v33<=(1 + 0)) and ((IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and  not IsPlayerSpell(v23.ObliterationTalent)) or  not IsPlayerSpell(v23.PillarOfFrost)) and v34.FwfBuffs) or (v18(22 -12 ,v32)<3))) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v72=14 -(9 + 5) ;while true do if (0==v72) then v20("Frostwyrms Fury");return true;end end end end if (v3(v23.FrostwyrmsFury) and  not IsPlayerSpell(v23.ApocalypseNowTalent) and (v33>=(378 -(85 + 291))) and IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and v34.FwfBuffs) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then local v73=0;while true do if (v73==0) then v20("Frostwyrms Fury");return true;end end end end if (v3(v23.FrostwyrmsFury) and  not IsPlayerSpell(v23.ApocalypseNowTalent) and IsPlayerSpell(v23.ObliterationTalent) and ((IsPlayerSpell(v23.PillarOfFrost) and v11(v23.PillarOfFrost) and  not v34.TwoHandCheck) or ( not v11(v23.PillarOfFrost) and v34.TwoHandCheck and (v7(v23.PillarOfFrost)>(1265 -(243 + 1022)))) or  not IsPlayerSpell(v23.PillarOfFrost)) and v34.FwfBuffs) then if ((aura_env.config[tostring(v23.FrostwyrmsFury)]==true) and aura_env.FlagKTrigCD) then v21("Frostwyrms Fury");elseif (aura_env.config[tostring(v23.FrostwyrmsFury)]~=true) then v20("Frostwyrms Fury");return true;end end if v3(v23.RaiseDead) then if ((aura_env.config[tostring(v23.RaiseDead)]==true) and aura_env.FlagKTrigCD) then v21("Raise Dead");elseif (aura_env.config[tostring(v23.RaiseDead)]~=true) then local v74=0 -0 ;while true do if (v74==(0 + 0)) then v20("Raise Dead");return true;end end end end if (v3(v23.SoulReaper) and IsPlayerSpell(v23.ReaperOfSoulsTalent) and v11(v23.ReaperOfSoulsBuff) and (v9(v23.KillingMachineBuff)<(1182 -(1123 + 57)))) then local v63=0 + 0 ;while true do if (0==v63) then v20("Soul Reaper");return true;end end end end;local v48=function() if (v3(v23.Obliterate) and ((v9(v23.KillingMachineBuff)==(256 -(163 + 91))) or (v11(v23.KillingMachineBuff) and (v26>=(1933 -(1869 + 61)))))) then local v64=0;while true do if (v64==(0 + 0)) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and v11(v23.RimeBuff) and IsPlayerSpell(v23.FrostboundWillTalent)) then v20("Howling Blast");return true;end if (v3(v23.FrostStrike) and (v10(v23.RazoriceDebuff)==(17 -12)) and IsPlayerSpell(v23.ShatteringBladeTalent) and  not v34.RpPooling) then v20("Frost Strike");return true;end if (v3(v23.HowlingBlast) and (v11(v23.RimeBuff))) then v20("Howling Blast");return true;end if (v3(v23.FrostStrike) and  not IsPlayerSpell(v23.ShatteringBladeTalent) and  not v34.RpPooling and ((v31-v30)<(46 -16))) then local v65=0;while true do if (v65==(0 + 0)) then v20("Frost Strike");return true;end end end if (v3(v23.Obliterate) and v11(v23.KillingMachineBuff) and  not v34.RunePooling) then v20("Obliterate");return true;end if (v3(v23.FrostStrike) and  not v34.RpPooling) then v20("Frost Strike");return true;end if (v3(v23.Obliterate) and  not v34.RunePooling and  not (IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff))) then local v66=0;while true do if (v66==(0 -0)) then v20("Obliterate");return true;end end end if (v3(v23.HowlingBlast) and  not v11(v23.KillingMachineBuff) and IsPlayerSpell(v23.ObliterationTalent) and v11(v23.PillarOfFrostBuff)) then local v67=0;while true do if (v67==0) then v20("Howling Blast");return true;end end end end;if v47() then return true;end if (v33>=(3 + 0)) then v46();return true;end if v48() then return true;end v20("Clear");end;