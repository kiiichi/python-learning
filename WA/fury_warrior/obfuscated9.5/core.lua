function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.FullGCD;local v24=aura_env.ids;aura_env.OutOfRange=false;local v26={};local v27=WeakAuras.GetNumSetItemsEquipped(1879);local v28=UnitPower("player",Enum.PowerType.Rage);local v29=UnitPowerMax("player",Enum.PowerType.Rage);local v30=0 + 0 ;local v31=25;for v39=1 + 0 ,812 -(201 + 571)  do local v40="nameplate"   .. v39 ;if (UnitExists(v40) and  not UnitIsFriend("player",v40) and WeakAuras.CheckRange(v40,v31,"<=")) then v30=v30 + 1 ;end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v30);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then local v57=1138 -(116 + 1022) ;while true do if (v57==(4 -3)) then v21("Clear",nil);return;end if (v57==(0 + 0)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v57=1;end end end end v26={};v26.StPlanning=v30<=(3 -2) ;v26.AddsRemain=v30>=(7 -5) ;v26.ExecutePhase=(IsPlayerSpell(v24.MassacreTalent) and (((UnitHealth("target")/UnitHealthMax("target")) * (959 -(814 + 45)))<(86 -51))) or (((UnitHealth("target")/UnitHealthMax("target")) * 100)<(1 + 1)) ;local v35={};if (v3(v24.Recklessness) and (( not IsPlayerSpell(v24.AngerManagementTalent) and IsPlayerSpell(v24.TitansTormentTalent)) or IsPlayerSpell(v24.AngerManagementTalent) or  not IsPlayerSpell(v24.TitansTormentTalent))) then v35.Recklessness=true;end if v3(v24.Avatar) then v35.Avatar=true;end if ((aura_env.config['SavingCD']==false) and (v18(22 + 38 ,925 -(261 + 624) )<=aura_env.config['SavingCDTime'])) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",v35,"Saving");elseif ((aura_env.config['SavingCD']==true) and (v18(106 -46 ,1120 -(1020 + 60) )<=aura_env.config['SavingCDTime'])) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});else WeakAuras.ScanEvents("K_TRIGED_EXTRA",v35,nil);end local v36=(v9(v24.MeatCleaverBuff)==(1423 -(630 + 793))) or ((v9(v24.MeatCleaverBuff)==(3 -2)) and ((aura_env.ListenSpellInMeatCleaver==v24.Execute) or (aura_env.ListenSpellInMeatCleaver==v24.Onslaught) or (aura_env.ListenSpellInMeatCleaver==v24.Rampage) or (aura_env.ListenSpellInMeatCleaver==v24.RagingBlow) or (aura_env.ListenSpellInMeatCleaver==v24.Bloodthirst))) ;local v37=function() if (v3(v24.Execute) and ((v7(v24.ExecuteMassacre)==0) or  not IsPlayerSpell(v24.ExecuteMassacreTalent)) and v11(v24.AshenJuggernautBuff) and (v5("player",v24.AshenJuggernautBuff)<v23())) then local v45=0 -0 ;while true do if (v45==(0 + 0)) then v20("Execute");return true;end end end if (v3(v24.Execute) and ((v7(v24.ExecuteMassacre)==(0 -0)) or  not IsPlayerSpell(v24.ExecuteMassacreTalent)) and (v5("player",v24.SuddenDeathBuff)<2) and  not v26.ExecutePhase) then local v46=0;while true do if (v46==(1747 -(760 + 987))) then v20("Execute");return true;end end end if (v3(v24.Bladestorm) and v11(v24.EnrageBuff) and ((IsPlayerSpell(v24.RecklessAbandonTalent) and (v7(v24.Avatar)>=(1937 -(1789 + 124)))) or (IsPlayerSpell(v24.AngerManagementTalent) and (v7(v24.Recklessness)>=(781 -(745 + 21))) and (v11(v24.Avatar) or (v7(v24.Avatar)>=(3 + 5)))))) then if ((aura_env.config[tostring(v24.Bladestorm)]==true) and aura_env.FlagKTrigCD) then v21("Bladestorm");elseif (aura_env.config[tostring(v24.Bladestorm)]~=true) then local v67=0;while true do if (v67==0) then v20("Bladestorm");return true;end end end end if (v3(v24.ThunderousRoar) and (v30>(2 -1)) and v11(v24.EnrageBuff)) then if ((aura_env.config[tostring(v24.ThunderousRoar)]==true) and aura_env.FlagKTrigCD) then v21("Thunderous Roar");elseif (aura_env.config[tostring(v24.ThunderousRoar)]~=true) then local v68=0 -0 ;while true do if (v68==0) then v20("Thunderous Roar");return true;end end end end if (v3(v24.ChampionsSpear) and v3(v24.Bladestorm) and (v3(v24.Avatar) or v3(v24.Recklessness) or v11(v24.Avatar) or v11(v24.RecklessnessBuff)) and v11(v24.EnrageBuff)) then if ((aura_env.config[tostring(v24.ChampionsSpear)]==true) and aura_env.FlagKTrigCD) then v21("Champions Spear");elseif (aura_env.config[tostring(v24.ChampionsSpear)]~=true) then local v69=0;while true do if (v69==0) then v20("Champions Spear");return true;end end end end if (v3(v24.OdynsFury) and (v30>(1 + 0)) and IsPlayerSpell(v24.TitanicRageTalent) and v36) then if ((aura_env.config[tostring(v24.OdynsFury)]==true) and aura_env.FlagKTrigCD) then v21("Odyns Fury");elseif (aura_env.config[tostring(v24.OdynsFury)]~=true) then local v70=0 + 0 ;while true do if (v70==(1055 -(87 + 968))) then v20("Odyns Fury");return true;end end end end if (v3(v24.Bladestorm) and v11(v24.EnrageBuff) and ((IsPlayerSpell(v24.RecklessAbandonTalent) and (v7(v24.Avatar)>=24)) or (IsPlayerSpell(v24.AngerManagementTalent) and (v7(v24.Recklessness)>=15) and (v11(v24.Avatar) or (v7(v24.Avatar)>=(35 -27)))))) then if ((aura_env.config[tostring(v24.Bladestorm)]==true) and aura_env.FlagKTrigCD) then v21("Bladestorm");elseif (aura_env.config[tostring(v24.Bladestorm)]~=true) then local v71=0 + 0 ;while true do if (v71==(0 -0)) then v20("Bladestorm");return true;end end end end if (v3(v24.Whirlwind) and (v30>=(1415 -(447 + 966))) and IsPlayerSpell(v24.MeatCleaverTalent) and v36) then v20("Whirlwind");return true;end if (v3(v24.Onslaught) and IsPlayerSpell(v24.TenderizeTalent) and v11(v24.BrutalFinishBuff)) then v20("Onslaught");return true;end if (v3(v24.Rampage) and (v5("player",v24.EnrageBuff)<v23())) then local v47=0;while true do if (v47==(0 -0)) then v20("Rampage");return true;end end end if (v3(v24.Execute) and ((v7(v24.ExecuteMassacre)==0) or  not IsPlayerSpell(v24.ExecuteMassacreTalent)) and (v9(v24.SuddenDeathBuff)==(1819 -(1703 + 114))) and v11(v24.EnrageBuff)) then local v48=701 -(376 + 325) ;while true do if ((0 -0)==v48) then v20("Execute");return true;end end end if (v3(v24.Execute) and ((v7(v24.ExecuteMassacre)==(0 -0)) or  not IsPlayerSpell(v24.ExecuteMassacreTalent)) and (v10(v24.MarkedForExecutionDebuff)>(1 + 0)) and v11(v24.EnrageBuff)) then v20("Execute");return true;end if (v3(v24.OdynsFury) and (v30>(2 -1)) and  not IsPlayerSpell(v24.TitanicRageTalent)) then if ((aura_env.config[tostring(v24.OdynsFury)]==true) and aura_env.FlagKTrigCD) then v21("Odyns Fury");elseif (aura_env.config[tostring(v24.OdynsFury)]~=true) then local v72=14 -(9 + 5) ;while true do if (v72==(376 -(85 + 291))) then v20("Odyns Fury");return true;end end end end if (v3(v24.RagingBlow) and (FindSpellOverrideByID(v24.RagingBlow)==v24.CrushingBlow) and ((C_Spell.GetSpellCharges(v24.RagingBlow).currentCharges==(1267 -(243 + 1022))) or (v11(v24.BrutalFinishBuff) and ( not v12(v24.ChampionsMightDebuff) or (v12(v24.ChampionsMightDebuff) and (v6("target",v24.ChampionsMightDebuff)>WeakAuras.gcdDuration())))))) then v20("Crushing Blow");return true;end if (v3(v24.Bloodthirst) and (FindSpellOverrideByID(v24.Bloodthirst)==v24.Bloodbath) and ((v9(v24.BloodcrazeBuff)>=(3 -2)) or (IsPlayerSpell(v24.UproarTalent) and (v6("target",v24.BloodbathDotDebuff)<(33 + 7)) and IsPlayerSpell(v24.BloodborneTalent)) or (v11(v24.EnrageBuff) and (v5("player",v24.EnrageBuff)<v23())))) then v20("Bloodbath");return true;end if (v3(v24.RagingBlow) and (((v30>=(1188 -(1123 + 57))) and (v27>=(4 + 0))) or (v11(v24.BrutalFinishBuff) and (v9(v24.SlaughteringStrikesBuff)<5) and ( not v12(v24.ChampionsMightDebuff) or (v12(v24.ChampionsMightDebuff) and (v6("target",v24.ChampionsMightDebuff)>WeakAuras.gcdDuration())))))) then v20("Raging Blow");return true;end if (v3(v24.Rampage) and (v28>(369 -(163 + 91)))) then local v49=0;while true do if (v49==(1930 -(1869 + 61))) then v20("Rampage");return true;end end end if (v3(v24.Execute) and ((v7(v24.ExecuteMassacre)==(0 + 0)) or  not IsPlayerSpell(v24.ExecuteMassacreTalent)) and v26.ExecutePhase and v12(v24.MarkedForExecutionDebuff) and v11(v24.EnrageBuff) and (v30>(3 -2))) then local v50=0;while true do if (v50==(0 -0)) then v20("Execute");return true;end end end if (v3(v24.Bloodthirst) and (((((UnitHealth("target")/UnitHealthMax("target")) * (14 + 86))<(47 -12)) and IsPlayerSpell(v24.ViciousContemptTalent) and v11(v24.BrutalFinishBuff) and v11(v24.EnrageBuff) and (v9(v24.BloodcrazeBuff)>=5) and (v30==(1 + 0))) or ( not (v27>=(1478 -(1329 + 145))) and (v30>(975 -(140 + 831)))))) then local v51=1850 -(1409 + 441) ;while true do if (v51==0) then v20("Bloodthirst");return true;end end end if (v3(v24.RagingBlow) and (FindSpellOverrideByID(v24.RagingBlow)==v24.CrushingBlow)) then local v52=0;while true do if (v52==(718 -(15 + 703))) then v20("Crushing Blow");return true;end end end if (v3(v24.Bloodthirst) and (FindSpellOverrideByID(v24.Bloodthirst)==v24.Bloodbath)) then v20("Bloodbath");return true;end if (v3(v24.RagingBlow) and (v11(v24.OpportunistBuff))) then local v53=0 + 0 ;while true do if (v53==(438 -(262 + 176))) then v20("Raging Blow");return true;end end end if (v3(v24.Bloodthirst) and (((UnitHealth("target")/UnitHealthMax("target")) * 100)<(1756 -(345 + 1376))) and IsPlayerSpell(v24.ViciousContemptTalent) and (v9(v24.BloodcrazeBuff)>=4)) then local v54=688 -(198 + 490) ;while true do if (v54==(0 -0)) then v20("Bloodthirst");return true;end end end if (v3(v24.RagingBlow) and (v14(v24.RagingBlow)==(4 -2))) then v20("Raging Blow");return true;end if (v3(v24.Onslaught) and (IsPlayerSpell(v24.TenderizeTalent))) then v20("Onslaught");return true;end if v3(v24.RagingBlow) then v20("Raging Blow");return true;end if v3(v24.Rampage) then local v55=0;while true do if (v55==0) then v20("Rampage");return true;end end end if (v3(v24.OdynsFury) and (v11(v24.EnrageBuff) or IsPlayerSpell(v24.TitanicRageTalent))) then if ((aura_env.config[tostring(v24.OdynsFury)]==true) and aura_env.FlagKTrigCD) then v21("Odyns Fury");elseif (aura_env.config[tostring(v24.OdynsFury)]~=true) then v20("Odyns Fury");return true;end end if (v3(v24.Execute) and ((v7(v24.ExecuteMassacre)==(1206 -(696 + 510))) or  not IsPlayerSpell(v24.ExecuteMassacreTalent)) and (v11(v24.SuddenDeathBuff))) then v20("Execute");return true;end if v3(v24.Bloodthirst) then v20("Bloodthirst");return true;end if v3(v24.ThunderousRoar) then if ((aura_env.config[tostring(v24.ThunderousRoar)]==true) and aura_env.FlagKTrigCD) then v21("Thunderous Roar");elseif (aura_env.config[tostring(v24.ThunderousRoar)]~=true) then local v73=0 -0 ;while true do if (v73==(1262 -(1091 + 171))) then v20("Thunderous Roar");return true;end end end end if v3(v24.WreckingThrow) then local v56=0 + 0 ;while true do if (v56==(0 -0)) then v20("Wrecking Throw");return true;end end end if v3(v24.Whirlwind) then v20("Whirlwind");return true;end end;local v38=function() local v41=0 -0 ;while true do if (v41==7) then if (v3(v24.ChampionsSpear) and  not IsPlayerSpell(v24.ChampionsMightTalent)) then if ((aura_env.config[tostring(v24.ChampionsSpear)]==true) and aura_env.FlagKTrigCD) then v21("Champions Spear");elseif (aura_env.config[tostring(v24.ChampionsSpear)]~=true) then v20("Champions Spear");return true;end end if (v3(v24.Execute) and ((v7(v24.ExecuteMassacre)==(374 -(123 + 251))) or  not IsPlayerSpell(v24.ExecuteMassacreTalent))) then v20("Execute");return true;end if v3(v24.WreckingThrow) then local v58=0 -0 ;while true do if (v58==(698 -(208 + 490))) then v20("Wrecking Throw");return true;end end end v41=1 + 7 ;end if (v41==(1 + 0)) then if (v3(v24.ThunderClap) and v36 and IsPlayerSpell(v24.MeatCleaverTalent) and (v30>=(838 -(660 + 176)))) then v20("Thunder Clap");return true;end if ((v7(v24.ThunderClap)==(0 + 0)) and aura_env.config[tostring(v24.ThunderClap)] and (FindSpellOverrideByID(v24.ThunderClap)==v24.ThunderBlast) and v11(v24.EnrageBuff) and IsPlayerSpell(v24.MeatCleaverTalent)) then local v59=202 -(14 + 188) ;while true do if (v59==(675 -(534 + 141))) then v20("Thunder Blast");return true;end end end if (v3(v24.Rampage) and ( not v11(v24.EnrageBuff) or (IsPlayerSpell(v24.Bladestorm) and (v7(v24.Bladestorm)<=v23()) and  not v12(v24.ChampionsMightDebuff)))) then local v60=0 + 0 ;while true do if (0==v60) then v20("Rampage");return true;end end end v41=2 + 0 ;end if (v41==(4 + 0)) then if (v3(v24.Bloodthirst) and IsPlayerSpell(v24.ViciousContemptTalent) and (((UnitHealth("target")/UnitHealthMax("target")) * (210 -110))<(55 -20))) then local v61=0 -0 ;while true do if ((0 + 0)==v61) then v20("Bloodthirst");return true;end end end if (v3(v24.Rampage) and (v28>=(64 + 36))) then v20("Rampage");return true;end if v3(v24.Bloodthirst) then v20("Bloodthirst");return true;end v41=401 -(115 + 281) ;end if (v41==(0 -0)) then if v3(v24.Ravager) then if ((aura_env.config[tostring(v24.Ravager)]==true) and aura_env.FlagKTrigCD) then v21("Ravager");elseif (aura_env.config[tostring(v24.Ravager)]~=true) then local v74=0 + 0 ;while true do if (v74==0) then v20("Ravager");return true;end end end end if (v3(v24.ThunderousRoar) and (v30>(2 -1)) and v11(v24.EnrageBuff)) then if ((aura_env.config[tostring(v24.ThunderousRoar)]==true) and aura_env.FlagKTrigCD) then v21("Thunderous Roar");elseif (aura_env.config[tostring(v24.ThunderousRoar)]~=true) then v20("Thunderous Roar");return true;end end if (v3(v24.ChampionsSpear) and v11(v24.EnrageBuff) and IsPlayerSpell(v24.ChampionsMightTalent)) then if ((aura_env.config[tostring(v24.ChampionsSpear)]==true) and aura_env.FlagKTrigCD) then v21("Champions Spear");elseif (aura_env.config[tostring(v24.ChampionsSpear)]~=true) then local v75=0 -0 ;while true do if (v75==0) then v20("Champions Spear");return true;end end end end v41=1;end if (v41==6) then if ((v7(v24.ThunderClap)==0) and aura_env.config[tostring(v24.ThunderClap)] and (FindSpellOverrideByID(v24.ThunderClap)==v24.ThunderBlast) and  not IsPlayerSpell(v24.MeatCleaverTalent)) then v20("Thunder Blast");return true;end if v3(v24.ThunderousRoar) then if ((aura_env.config[tostring(v24.ThunderousRoar)]==true) and aura_env.FlagKTrigCD) then v21("Thunderous Roar");elseif (aura_env.config[tostring(v24.ThunderousRoar)]~=true) then local v76=867 -(550 + 317) ;while true do if (v76==(0 -0)) then v20("Thunderous Roar");return true;end end end end if (v3(v24.OdynsFury) and (v11(v24.EnrageBuff) or IsPlayerSpell(v24.TitanicRageTalent))) then if ((aura_env.config[tostring(v24.OdynsFury)]==true) and aura_env.FlagKTrigCD) then v21("Odyns Fury");elseif (aura_env.config[tostring(v24.OdynsFury)]~=true) then local v77=0;while true do if (v77==0) then v20("Odyns Fury");return true;end end end end v41=9 -2 ;end if (v41==(13 -8)) then if (v3(v24.OdynsFury) and (v30>1) and (v11(v24.EnrageBuff) or IsPlayerSpell(v24.TitanicRageTalent))) then if ((aura_env.config[tostring(v24.OdynsFury)]==true) and aura_env.FlagKTrigCD) then v21("Odyns Fury");elseif (aura_env.config[tostring(v24.OdynsFury)]~=true) then v20("Odyns Fury");return true;end end if v3(v24.RagingBlow) then v20("Raging Blow");return true;end if v3(v24.Rampage) then local v62=285 -(134 + 151) ;while true do if (v62==0) then v20("Rampage");return true;end end end v41=1671 -(970 + 695) ;end if (v41==(5 -2)) then if (v3(v24.Rampage) and (v28>=(2105 -(582 + 1408))) and IsPlayerSpell(v24.RecklessAbandonTalent) and v11(v24.RecklessnessBuff) and (v9(v24.SlaughteringStrikesBuff)>=3)) then local v63=0;while true do if (v63==0) then v20("Rampage");return true;end end end if (v3(v24.RagingBlow) and (FindSpellOverrideByID(v24.RagingBlow)==v24.CrushingBlow)) then local v64=0 -0 ;while true do if (v64==(0 -0)) then v20("Crushing Blow");return true;end end end if (v3(v24.Onslaught) and (IsPlayerSpell(v24.TenderizeTalent))) then local v65=0 -0 ;while true do if (v65==(1824 -(1195 + 629))) then v20("Onslaught");return true;end end end v41=5 -1 ;end if (v41==8) then if v3(v24.ThunderClap) then local v66=241 -(187 + 54) ;while true do if (v66==0) then v20("Thunder Clap");return true;end end end if v3(v24.Whirlwind) then v20("Whirlwind");return true;end break;end if (v41==2) then if (v3(v24.Execute) and ((v7(v24.ExecuteMassacre)==(780 -(162 + 618))) or  not IsPlayerSpell(v24.ExecuteMassacreTalent)) and IsPlayerSpell(v24.AshenJuggernautTalent) and (v5("player",v24.AshenJuggernautBuff)<=v23())) then v20("Execute");return true;end if (v3(v24.Bladestorm) and v11(v24.EnrageBuff) and IsPlayerSpell(v24.UnhingedTalent)) then if ((aura_env.config[tostring(v24.Bladestorm)]==true) and aura_env.FlagKTrigCD) then v21("Bladestorm");elseif (aura_env.config[tostring(v24.Bladestorm)]~=true) then local v78=0;while true do if (v78==(0 + 0)) then v20("Bladestorm");return true;end end end end if (v3(v24.Bloodthirst) and (FindSpellOverrideByID(v24.Bloodthirst)==v24.Bloodbath)) then v20("Bloodbath");return true;end v41=3;end end end;if IsPlayerSpell(v24.SlayersDominanceTalent) then local v44=0 + 0 ;while true do if (v44==(0 -0)) then v37();return true;end end end if IsPlayerSpell(v24.LightningStrikesTalent) then v38();return true;end v20("Clear");v21("Clear");end;