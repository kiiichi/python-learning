function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;local v22=aura_env.KTrigTinyCD;aura_env.FlagKTrigCD=true;local v24=aura_env.FullGCD;local v25=aura_env.ids;aura_env.OutOfRange=false;local v27={};local v28=WeakAuras.GetNumSetItemsEquipped(2350 -(259 + 160) );local v29=UnitPower("player",Enum.PowerType.Rage);local v30=UnitPowerMax("player",Enum.PowerType.Rage);local v31=543 -(215 + 328) ;local v32=3 + 22 ;for v40=1 + 0 ,80 -40  do local v41="nameplate"   .. v40 ;if (UnitExists(v41) and  not UnitIsFriend("player",v41) and WeakAuras.CheckRange(v41,v32,"<=")) then v31=v31 + 1 + 0 ;end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v31);if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v21("Clear",nil);return;end end v27={};v27.StPlanning=v31<=1 ;v27.AddsRemain=v31>=(7 -5) ;v27.ExecutePhase=(IsPlayerSpell(v25.MassacreTalent) and (((UnitHealth("target")/UnitHealthMax("target")) * (542 -(416 + 26)))<(111 -76))) or (((UnitHealth("target")/UnitHealthMax("target")) * (41 + 59))<(2 + 0)) ;local v36={};if (v3(v25.Recklessness) and (( not IsPlayerSpell(v25.AngerManagementTalent) and IsPlayerSpell(v25.TitansTormentTalent)) or IsPlayerSpell(v25.AngerManagementTalent) or  not IsPlayerSpell(v25.TitansTormentTalent))) then v36.Recklessness=true;end if v3(v25.Avatar) then v36.Avatar=true;end if ((aura_env.config['SavingCD']==false) and (v18(26 + 34 ,39 + 1 )<=aura_env.config['SavingCDTime'])) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",v36,"Saving");elseif ((aura_env.config['SavingCD']==true) and (v18(60,84 -44 )<=aura_env.config['SavingCDTime'])) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});else WeakAuras.ScanEvents("K_TRIGED_EXTRA",v36,nil);end local v37=(v9(v25.MeatCleaverBuff)==(0 -0)) or ((v9(v25.MeatCleaverBuff)==(2 -1)) and ((aura_env.ListenSpellInMeatCleaver==v25.Execute) or (aura_env.ListenSpellInMeatCleaver==v25.Onslaught) or (aura_env.ListenSpellInMeatCleaver==v25.Rampage) or (aura_env.ListenSpellInMeatCleaver==v25.RagingBlow) or (aura_env.ListenSpellInMeatCleaver==v25.Bloodthirst))) ;local v38=function() if (v3(v25.Execute) and ((v7(v25.ExecuteMassacre)==(438 -(145 + 293))) or  not IsPlayerSpell(v25.ExecuteMassacreTalent)) and v11(v25.AshenJuggernautBuff) and (v5("player",v25.AshenJuggernautBuff)<v24())) then local v46=430 -(44 + 386) ;while true do if (v46==0) then v20("Execute");return true;end end end if (v3(v25.Execute) and ((v7(v25.ExecuteMassacre)==(0 + 0)) or  not IsPlayerSpell(v25.ExecuteMassacreTalent)) and (v5("player",v25.SuddenDeathBuff)<(1488 -(998 + 488))) and  not v27.ExecutePhase) then v20("Execute");return true;end if (v3(v25.Bladestorm) and v11(v25.EnrageBuff) and ((IsPlayerSpell(v25.RecklessAbandonTalent) and (v7(v25.Avatar)>=(420 -(115 + 281)))) or (IsPlayerSpell(v25.AngerManagementTalent) and (v7(v25.Recklessness)>=(5 + 10)) and (v11(v25.Avatar) or (v7(v25.Avatar)>=(7 + 1)))))) then if ((aura_env.config[tostring(v25.Bladestorm)]==true) and aura_env.FlagKTrigCD) then v21("Bladestorm");elseif (aura_env.config[tostring(v25.Bladestorm)]~=true) then local v68=772 -(201 + 571) ;while true do if (v68==(1138 -(116 + 1022))) then v20("Bladestorm");return true;end end end end if (v3(v25.ThunderousRoar) and (v31>(868 -(550 + 317))) and v11(v25.EnrageBuff)) then if ((aura_env.config[tostring(v25.ThunderousRoar)]==true) and aura_env.FlagKTrigCD) then v21("Thunderous Roar");elseif (aura_env.config[tostring(v25.ThunderousRoar)]~=true) then local v69=0 -0 ;while true do if (v69==(0 + 0)) then v20("Thunderous Roar");return true;end end end end if (v3(v25.ChampionsSpear) and v3(v25.Bladestorm) and (v3(v25.Avatar) or v3(v25.Recklessness) or v11(v25.Avatar) or v11(v25.RecklessnessBuff)) and v11(v25.EnrageBuff)) then if ((aura_env.config[tostring(v25.ChampionsSpear)]==true) and aura_env.FlagKTrigCD) then v21("Champions Spear");elseif (aura_env.config[tostring(v25.ChampionsSpear)]~=true) then v20("Champions Spear");return true;end end if (v3(v25.OdynsFury) and (v31>(3 -2)) and IsPlayerSpell(v25.TitanicRageTalent) and v37) then if ((aura_env.config[tostring(v25.OdynsFury)]==true) and aura_env.FlagKTrigCD) then v21("Odyns Fury");elseif (aura_env.config[tostring(v25.OdynsFury)]~=true) then v20("Odyns Fury");return true;end end if (v3(v25.Bladestorm) and v11(v25.EnrageBuff) and ((IsPlayerSpell(v25.RecklessAbandonTalent) and (v7(v25.Avatar)>=(85 -61))) or (IsPlayerSpell(v25.AngerManagementTalent) and (v7(v25.Recklessness)>=(21 -6)) and (v11(v25.Avatar) or (v7(v25.Avatar)>=(867 -(814 + 45))))))) then if ((aura_env.config[tostring(v25.Bladestorm)]==true) and aura_env.FlagKTrigCD) then v21("Bladestorm");elseif (aura_env.config[tostring(v25.Bladestorm)]~=true) then v20("Bladestorm");return true;end end if (v3(v25.Whirlwind) and (v31>=(4 -2)) and IsPlayerSpell(v25.MeatCleaverTalent) and v37) then local v47=0 + 0 ;while true do if (v47==(0 + 0)) then v20("Whirlwind");return true;end end end if (v3(v25.Onslaught) and IsPlayerSpell(v25.TenderizeTalent) and v11(v25.BrutalFinishBuff)) then local v48=885 -(261 + 624) ;while true do if ((0 -0)==v48) then v20("Onslaught");return true;end end end if (v3(v25.Rampage) and (v5("player",v25.EnrageBuff)<v24())) then v20("Rampage");return true;end if (v3(v25.Execute) and ((v7(v25.ExecuteMassacre)==(1080 -(1020 + 60))) or  not IsPlayerSpell(v25.ExecuteMassacreTalent)) and (v9(v25.SuddenDeathBuff)==(1425 -(630 + 793))) and v11(v25.EnrageBuff) and  not v11(v25.BrutalFinishBuff)) then v20("Execute");return true;end if (v3(v25.Execute) and ((v7(v25.ExecuteMassacre)==(0 -0)) or  not IsPlayerSpell(v25.ExecuteMassacreTalent)) and (v10(v25.MarkedForExecutionDebuff)>=aura_env.config['MarkedForExecutionDebuffStacks']) and v11(v25.EnrageBuff)) then local v49=0 -0 ;while true do if (v49==(0 -0)) then v20("Execute");return true;end end end if (v3(v25.OdynsFury) and (v31>(4 -3)) and  not IsPlayerSpell(v25.TitanicRageTalent)) then if ((aura_env.config[tostring(v25.OdynsFury)]==true) and aura_env.FlagKTrigCD) then v21("Odyns Fury");elseif (aura_env.config[tostring(v25.OdynsFury)]~=true) then local v70=0 + 0 ;while true do if (v70==(0 -0)) then v20("Odyns Fury");return true;end end end end if (v3(v25.RagingBlow) and (FindSpellOverrideByID(v25.RagingBlow)==v25.CrushingBlow) and ((C_Spell.GetSpellCharges(v25.RagingBlow).currentCharges==(243 -(187 + 54))) or (v11(v25.BrutalFinishBuff) and ( not v12(v25.ChampionsMightDebuff) or (v12(v25.ChampionsMightDebuff) and (v6("target",v25.ChampionsMightDebuff)>WeakAuras.gcdDuration())))))) then local v50=1747 -(760 + 987) ;while true do if (v50==(1913 -(1789 + 124))) then v20("Crushing Blow");return true;end end end if (v3(v25.Bloodthirst) and (FindSpellOverrideByID(v25.Bloodthirst)==v25.Bloodbath) and ((v9(v25.BloodcrazeBuff)>=(767 -(745 + 21))) or (IsPlayerSpell(v25.UproarTalent) and (v6("target",v25.BloodbathDotDebuff)<(14 + 26)) and IsPlayerSpell(v25.BloodborneTalent)) or (v11(v25.EnrageBuff) and (v5("player",v25.EnrageBuff)<v24())))) then v20("Bloodbath");return true;end if (v3(v25.RagingBlow) and (((v31>=(21 -13)) and (v28>=(15 -11))) or (v11(v25.BrutalFinishBuff) and (v9(v25.SlaughteringStrikesBuff)<(4 + 1)) and ( not v12(v25.ChampionsMightDebuff) or (v12(v25.ChampionsMightDebuff) and (v6("target",v25.ChampionsMightDebuff)>WeakAuras.gcdDuration())))))) then v20("Raging Blow");return true;end if (v3(v25.Rampage) and (v29>(1 + 114))) then local v51=0;while true do if (v51==(0 + 0)) then v20("Rampage");return true;end end end if (v3(v25.Execute) and ((v7(v25.ExecuteMassacre)==(1055 -(87 + 968))) or  not IsPlayerSpell(v25.ExecuteMassacreTalent)) and v27.ExecutePhase and v12(v25.MarkedForExecutionDebuff) and v11(v25.EnrageBuff) and (v31>(4 -3))) then local v52=0 + 0 ;while true do if (v52==(1000 -(451 + 549))) then v20("Execute");return true;end end end if (v3(v25.Bloodthirst) and (((((UnitHealth("target")/UnitHealthMax("target")) * (226 -126))<(54 -19)) and IsPlayerSpell(v25.ViciousContemptTalent) and v11(v25.BrutalFinishBuff) and v11(v25.EnrageBuff) and (v9(v25.BloodcrazeBuff)>=(1418 -(447 + 966))) and (v31==(2 -1))) or ( not (v28>=(1821 -(1703 + 114))) and (v31>(705 -(376 + 325)))))) then v20("Bloodthirst");return true;end if (v3(v25.RagingBlow) and (FindSpellOverrideByID(v25.RagingBlow)==v25.CrushingBlow)) then v20("Crushing Blow");return true;end if (v3(v25.Bloodthirst) and (FindSpellOverrideByID(v25.Bloodthirst)==v25.Bloodbath)) then local v53=0;while true do if (v53==(0 -0)) then v20("Bloodbath");return true;end end end if (v3(v25.RagingBlow) and (v11(v25.OpportunistBuff))) then local v54=0;while true do if ((0 -0)==v54) then v20("Raging Blow");return true;end end end if (v3(v25.Bloodthirst) and (((UnitHealth("target")/UnitHealthMax("target")) * (307 -207))<(11 + 24)) and IsPlayerSpell(v25.ViciousContemptTalent) and (v9(v25.BloodcrazeBuff)>=(8 -4))) then local v55=14 -(9 + 5) ;while true do if (v55==(0 + 0)) then v20("Bloodthirst");return true;end end end if (v3(v25.RagingBlow) and (v14(v25.RagingBlow)==(1 + 1))) then v20("Raging Blow");return true;end if (v3(v25.Onslaught) and (IsPlayerSpell(v25.TenderizeTalent))) then v20("Onslaught");return true;end if v3(v25.RagingBlow) then local v56=0;while true do if ((376 -(85 + 291))==v56) then v20("Raging Blow");return true;end end end if v3(v25.Rampage) then v20("Rampage");return true;end if (v3(v25.OdynsFury) and (v11(v25.EnrageBuff) or IsPlayerSpell(v25.TitanicRageTalent))) then if ((aura_env.config[tostring(v25.OdynsFury)]==true) and aura_env.FlagKTrigCD) then v21("Odyns Fury");elseif (aura_env.config[tostring(v25.OdynsFury)]~=true) then local v71=0;while true do if ((1265 -(243 + 1022))==v71) then v20("Odyns Fury");return true;end end end end if (v3(v25.Execute) and ((v7(v25.ExecuteMassacre)==(0 -0)) or  not IsPlayerSpell(v25.ExecuteMassacreTalent)) and (v11(v25.SuddenDeathBuff))) then local v57=0 + 0 ;while true do if (v57==0) then v20("Execute");return true;end end end if v3(v25.Bloodthirst) then local v58=0 + 0 ;while true do if (v58==(1180 -(1123 + 57))) then v20("Bloodthirst");return true;end end end if v3(v25.ThunderousRoar) then if ((aura_env.config[tostring(v25.ThunderousRoar)]==true) and aura_env.FlagKTrigCD) then v21("Thunderous Roar");elseif (aura_env.config[tostring(v25.ThunderousRoar)]~=true) then v20("Thunderous Roar");return true;end end if v3(v25.WreckingThrow) then v20("Wrecking Throw");return true;end if v3(v25.Whirlwind) then v20("Whirlwind");return true;end end;local v39=function() if v3(v25.Ravager) then if ((aura_env.config[tostring(v25.Ravager)]==true) and aura_env.FlagKTrigCD) then v21("Ravager");elseif (aura_env.config[tostring(v25.Ravager)]~=true) then v20("Ravager");return true;end end if (v3(v25.ThunderousRoar) and (v31>(1 + 0)) and v11(v25.EnrageBuff)) then if ((aura_env.config[tostring(v25.ThunderousRoar)]==true) and aura_env.FlagKTrigCD) then v21("Thunderous Roar");elseif (aura_env.config[tostring(v25.ThunderousRoar)]~=true) then local v72=254 -(163 + 91) ;while true do if (v72==(1467 -(899 + 568))) then v20("Thunderous Roar");return true;end end end end if (v3(v25.ChampionsSpear) and v11(v25.EnrageBuff) and IsPlayerSpell(v25.ChampionsMightTalent)) then if ((aura_env.config[tostring(v25.ChampionsSpear)]==true) and aura_env.FlagKTrigCD) then v21("Champions Spear");elseif (aura_env.config[tostring(v25.ChampionsSpear)]~=true) then local v73=1930 -(1869 + 61) ;while true do if (v73==(0 -0)) then v20("Champions Spear");return true;end end end end if (v3(v25.ThunderClap) and v37 and IsPlayerSpell(v25.MeatCleaverTalent) and (v31>=(605 -(268 + 335)))) then local v59=0 + 0 ;while true do if (v59==0) then v20("Thunder Clap");return true;end end end if ((v7(v25.ThunderClap)==0) and aura_env.config[tostring(v25.ThunderClap)] and (FindSpellOverrideByID(v25.ThunderClap)==v25.ThunderBlast) and v11(v25.EnrageBuff) and IsPlayerSpell(v25.MeatCleaverTalent)) then v20("Thunder Blast");return true;end if (v3(v25.Rampage) and ( not v11(v25.EnrageBuff) or (IsPlayerSpell(v25.Bladestorm) and (v7(v25.Bladestorm)<=v24()) and  not v12(v25.ChampionsMightDebuff)))) then local v60=0 -0 ;while true do if (v60==(0 -0)) then v20("Rampage");return true;end end end if (v3(v25.Execute) and ((v7(v25.ExecuteMassacre)==(0 + 0)) or  not IsPlayerSpell(v25.ExecuteMassacreTalent)) and IsPlayerSpell(v25.AshenJuggernautTalent) and (v5("player",v25.AshenJuggernautBuff)<=v24())) then local v61=0 -0 ;while true do if (v61==(0 + 0)) then v20("Execute");return true;end end end if (v3(v25.Bladestorm) and v11(v25.EnrageBuff) and IsPlayerSpell(v25.UnhingedTalent)) then if ((aura_env.config[tostring(v25.Bladestorm)]==true) and aura_env.FlagKTrigCD) then v21("Bladestorm");elseif (aura_env.config[tostring(v25.Bladestorm)]~=true) then local v74=1474 -(1329 + 145) ;while true do if (v74==(0 + 0)) then v20("Bladestorm");return true;end end end end if (v3(v25.Bloodthirst) and (FindSpellOverrideByID(v25.Bloodthirst)==v25.Bloodbath)) then v20("Bloodbath");return true;end if (v3(v25.Rampage) and (v29>=(1086 -(140 + 831))) and IsPlayerSpell(v25.RecklessAbandonTalent) and v11(v25.RecklessnessBuff) and (v9(v25.SlaughteringStrikesBuff)>=(1853 -(1409 + 441)))) then local v62=718 -(15 + 703) ;while true do if (v62==(0 + 0)) then v20("Rampage");return true;end end end if (v3(v25.RagingBlow) and (FindSpellOverrideByID(v25.RagingBlow)==v25.CrushingBlow)) then local v63=438 -(262 + 176) ;while true do if (v63==0) then v20("Crushing Blow");return true;end end end if (v3(v25.Onslaught) and (IsPlayerSpell(v25.TenderizeTalent))) then v20("Onslaught");return true;end if (v3(v25.Bloodthirst) and IsPlayerSpell(v25.ViciousContemptTalent) and (((UnitHealth("target")/UnitHealthMax("target")) * (1821 -(345 + 1376)))<(723 -(198 + 490)))) then v20("Bloodthirst");return true;end if (v3(v25.Rampage) and (v29>=(441 -341))) then v20("Rampage");return true;end if v3(v25.Bloodthirst) then v20("Bloodthirst");return true;end if (v3(v25.OdynsFury) and (v31>(2 -1)) and (v11(v25.EnrageBuff) or IsPlayerSpell(v25.TitanicRageTalent))) then if ((aura_env.config[tostring(v25.OdynsFury)]==true) and aura_env.FlagKTrigCD) then v21("Odyns Fury");elseif (aura_env.config[tostring(v25.OdynsFury)]~=true) then v20("Odyns Fury");return true;end end if v3(v25.RagingBlow) then v20("Raging Blow");return true;end if v3(v25.Rampage) then local v64=700 -(271 + 429) ;while true do if (v64==(1206 -(696 + 510))) then v20("Rampage");return true;end end end if ((v7(v25.ThunderClap)==(0 -0)) and aura_env.config[tostring(v25.ThunderClap)] and (FindSpellOverrideByID(v25.ThunderClap)==v25.ThunderBlast) and  not IsPlayerSpell(v25.MeatCleaverTalent)) then local v65=0;while true do if (v65==(1262 -(1091 + 171))) then v20("Thunder Blast");return true;end end end if v3(v25.ThunderousRoar) then if ((aura_env.config[tostring(v25.ThunderousRoar)]==true) and aura_env.FlagKTrigCD) then v21("Thunderous Roar");elseif (aura_env.config[tostring(v25.ThunderousRoar)]~=true) then local v75=1288 -(993 + 295) ;while true do if (0==v75) then v20("Thunderous Roar");return true;end end end end if (v3(v25.OdynsFury) and (v11(v25.EnrageBuff) or IsPlayerSpell(v25.TitanicRageTalent))) then if ((aura_env.config[tostring(v25.OdynsFury)]==true) and aura_env.FlagKTrigCD) then v21("Odyns Fury");elseif (aura_env.config[tostring(v25.OdynsFury)]~=true) then v20("Odyns Fury");return true;end end if (v3(v25.ChampionsSpear) and  not IsPlayerSpell(v25.ChampionsMightTalent)) then if ((aura_env.config[tostring(v25.ChampionsSpear)]==true) and aura_env.FlagKTrigCD) then v21("Champions Spear");elseif (aura_env.config[tostring(v25.ChampionsSpear)]~=true) then local v76=0;while true do if (v76==(0 + 0)) then v20("Champions Spear");return true;end end end end if (v3(v25.Execute) and ((v7(v25.ExecuteMassacre)==(0 + 0)) or  not IsPlayerSpell(v25.ExecuteMassacreTalent))) then v20("Execute");return true;end if v3(v25.WreckingThrow) then local v66=0 -0 ;while true do if (v66==(0 -0)) then v20("Wrecking Throw");return true;end end end if v3(v25.ThunderClap) then v20("Thunder Clap");return true;end if v3(v25.Whirlwind) then local v67=374 -(123 + 251) ;while true do if (v67==(0 -0)) then v20("Whirlwind");return true;end end end end;if IsPlayerSpell(v25.SlayersDominanceTalent) then local v44=698 -(208 + 490) ;while true do if ((0 + 0)==v44) then v38();return true;end end end if IsPlayerSpell(v25.LightningStrikesTalent) then local v45=0 + 0 ;while true do if (v45==0) then v39();return true;end end end v20("Clear");v21("Clear");end;