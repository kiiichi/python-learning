function() if (aura_env.LastUpdate and (aura_env.LastUpdate>(GetTime() -aura_env.config['UpdateFrequency']))) then return;end aura_env.LastUpdate=GetTime();local v2=GetTime();local v3=aura_env.OffCooldown;local v4=aura_env.OffCooldownNotCasting;local v5=aura_env.GetRemainingAuraDuration;local v6=aura_env.GetRemainingDebuffDuration;local v7=aura_env.GetRemainingSpellCooldown;local v8=aura_env.IsCasting;local v9=aura_env.GetPlayerStacks;local v10=aura_env.GetTargetStacks;local v11=aura_env.PlayerHasBuff;local v12=aura_env.TargetHasDebuff;local v13=aura_env.HasBloodlust;local v14=aura_env.GetSpellChargesFractional;local v15=aura_env.GetTimeToNextCharge;local v16=aura_env.GetTimeToFullCharges;local v17=aura_env.TargetTimeToXPct;local v18=aura_env.FightRemains;local v19=aura_env.IsAuraRefreshable;local v20=aura_env.KTrig;local v21=aura_env.KTrigCD;aura_env.FlagKTrigCD=true;local v23=aura_env.ids;aura_env.OutOfRange=false;local v25={};local v26=WeakAuras.GetNumSetItemsEquipped(1689);local v27=UnitPower("player",Enum.PowerType.HolyPower);local v28=0 + 0 ;local v29=22 -14 ;for v39=1,24 + 16  do local v40=0 -0 ;local v41;while true do if (v40==(1187 -(1069 + 118))) then v41="nameplate"   .. v39 ;if (UnitExists(v41) and  not UnitIsFriend("player",v41) and WeakAuras.CheckRange(v41,v29,"<=")) then v28=v28 + 1 ;end break;end end end WeakAuras.ScanEvents("K_NEARBY_ENEMIES",v28);WeakAuras.ScanEvents("K_NEARBY_Wounds",TargetsWithFesteringWounds);local v30=max(aura_env.TemplarStrikeExpires-GetTime() ,0 -0 );local v31=(IsPlayerSpell(v23.Crusade) and  not IsPlayerSpell(v23.RadiantGloryTalent) and v7(v23.Crusade)) or (0 -0) ;local v32=(IsPlayerSpell(v23.AvengingWrath) and  not IsPlayerSpell(v23.RadiantGloryTalent) and  not IsPlayerSpell(v23.Crusade) and v7(v23.AvengingWrath)) or 0 ;local v33=(IsPlayerSpell(v23.Crusade) and  not IsPlayerSpell(v23.RadiantGloryTalent) and (v7(v23.Crusade)==0)) or false ;local v34=(IsPlayerSpell(v23.AvengingWrath) and  not IsPlayerSpell(v23.RadiantGloryTalent) and  not IsPlayerSpell(v23.Crusade) and (v7(v23.AvengingWrath)==0)) or false ;if IsPlayerSpell(v23.RadiantGloryTalent) then v23.CrusadeBuff=v23.RadiantGloryCrusadeBuff;end if IsPlayerSpell(v23.RadiantGloryTalent) then v23.AvengingWrathBuff=v23.RadiantGloryAvangeningWrathBuff;end if aura_env.config['NeedTarget'] then if ((UnitExists("target")==false) or (UnitCanAttack("player","target")==false)) then WeakAuras.ScanEvents("K_TRIGED_EXTRA",{});v20("Clear",nil);v21("Clear",nil);return;end end if (C_Item.IsItemInRange(2802 + 13312 ,"target")==false) then aura_env.OutOfRange=true;end local v35={};if (v34 and ((v27>=(4 -1)) or ((v27>=(2 + 0)) and IsPlayerSpell(v23.DivineAuxiliaryTalent) and ((v7(v23.ExecutionSentence)==0) or (v7(v23.FinalReckoning)==(791 -(368 + 423))))))) then v35.AvengingWrath=true;end if (v33 and (v27>=3)) then v35.Crusade=true;end WeakAuras.ScanEvents("K_TRIGED_EXTRA",v35,nil);local v36=function() local v42=0 -0 ;while true do if (v42==0) then if (v3(v23.ExecutionSentence) and (( not v11(v23.CrusadeBuff) and (v31>(33 -(10 + 8)))) or (v9(v23.CrusadeBuff)==(38 -28)) or (v32<(442.75 -(416 + 26))) or (v32>15) or IsPlayerSpell(v23.RadiantGloryTalent)) and ((v27>=(9 -6)) or ((v27>=2) and (IsPlayerSpell(v23.DivineAuxiliaryTalent) or IsPlayerSpell(v23.RadiantGloryTalent)))) and ((v7(v23.DivineHammer)>(3 + 2)) or v11(v23.DivineHammerBuff) or  not IsPlayerSpell(v23.DivineHammer)) and (((v17(0 -0 ,498 -(145 + 293) )>(438 -(44 + 386))) and  not IsPlayerSpell(v23.ExecutionersWillTalent)) or (v17(1486 -(998 + 488) ,20 + 40 )>(10 + 2))) and (v7(v23.WakeOfAshes)<WeakAuras.gcdDuration())) then if ((aura_env.config[tostring(v23.ExecutionSentence)]==true) and aura_env.FlagKTrigCD) then v21("Execution Sentence");elseif (aura_env.config[tostring(v23.ExecutionSentence)]~=true) then local v64=772 -(201 + 571) ;while true do if (v64==(1138 -(116 + 1022))) then v20("Execution Sentence");return true;end end end end if (v3(v23.FinalReckoning) and ((v27>=(12 -9)) or ((v27>=2) and (IsPlayerSpell(v23.DivineAuxiliaryTalent) or IsPlayerSpell(v23.RadiantGloryTalent)))) and (( not IsPlayerSpell(v23.Crusade) and (v32>10)) or ((v31>0) and ( not v11(v23.CrusadeBuff) or (v9(v23.CrusadeBuff)>=10))) or (IsPlayerSpell(v23.RadiantGloryTalent) and (v11(v23.AvengingWrathBuff) or (IsPlayerSpell(v23.Crusade) and (v7(v23.WakeOfAshes)<WeakAuras.gcdDuration())))))) then if ((aura_env.config[tostring(v23.FinalReckoning)]==true) and aura_env.FlagKTrigCD) then v21("Final Reckoning");elseif (aura_env.config[tostring(v23.FinalReckoning)]~=true) then v20("Final Reckoning");return true;end end break;end end end;local v37=function() local v43=0;while true do if (v43==(0 + 0)) then v25.DsCastable=((v28>=(7 -5)) or v11(v23.EmpyreanPowerBuff) or ( not IsPlayerSpell(v23.FinalVerdict) and IsPlayerSpell(v23.TempestOfTheLightbringerTalent))) and  not v11(v23.EmpyreanLegacyBuff) and  not (v11(v23.DivineArbiterBuff) and (v9(v23.DivineArbiterBuff)>(85 -61))) ;if ((FindSpellOverrideByID(v23.WakeOfAshes)==v23.HammerOfLight) and ((FindSpellOverrideByID(v23.WakeOfAshes)==v23.HammerOfLight) or  not IsPlayerSpell(v23.DivineHammer) or v11(v23.DivineHammerBuff) or (v7(v23.DivineHammer)>(869 -(814 + 45))))) then v20("Hammer of Light");return true;end v43=1;end if (v43==1) then if (v3(v23.DivineHammer) and  not v11(v23.DivineHammerBuff)) then if ((aura_env.config[tostring(v23.DivineHammer)]==true) and aura_env.FlagKTrigCD) then v21("Divine Hammer");elseif (aura_env.config[tostring(v23.DivineHammer)]~=true) then local v65=0 -0 ;while true do if (v65==(0 + 0)) then v20("Divine Hammer");return true;end end end end if (v3(v23.DivineStorm) and v25.DsCastable and (FindSpellOverrideByID(v23.WakeOfAshes)~=v23.HammerOfLight) and ((v7(v23.DivineHammer)>(0 + 0)) or v11(v23.DivineHammerBuff) or  not IsPlayerSpell(v23.DivineHammer)) and ( not IsPlayerSpell(v23.Crusade) or (v7(v23.Crusade)>(WeakAuras.gcdDuration() * (888 -(261 + 624)))) or (v11(v23.CrusadeBuff) and (v9(v23.CrusadeBuff)<(17 -7))) or IsPlayerSpell(v23.RadiantGloryTalent))) then local v61=1080 -(1020 + 60) ;while true do if (v61==(1423 -(630 + 793))) then v20("Divine Storm");return true;end end end v43=6 -4 ;end if (v43==(9 -7)) then if (v3(v23.JusticarsVengeance) and ( not IsPlayerSpell(v23.Crusade) or (v7(v23.Crusade)>(WeakAuras.gcdDuration() * (2 + 1))) or (v11(v23.CrusadeBuff) and (v9(v23.CrusadeBuff)<10)) or IsPlayerSpell(v23.RadiantGloryTalent)) and (FindSpellOverrideByID(v23.WakeOfAshes)~=v23.HammerOfLight) and ((v7(v23.DivineHammer)>0) or v11(v23.DivineHammerBuff) or  not IsPlayerSpell(v23.DivineHammer))) then v20("Justicars Vengeance");return true;end if (v3(v23.TemplarsVerdict) and ( not IsPlayerSpell(v23.Crusade) or (v7(v23.Crusade)>(WeakAuras.gcdDuration() * 3)) or (v11(v23.CrusadeBuff) and (v9(v23.CrusadeBuff)<(34 -24))) or IsPlayerSpell(v23.RadiantGloryTalent)) and (FindSpellOverrideByID(v23.WakeOfAshes)~=v23.HammerOfLight) and ((v7(v23.DivineHammer)>(1747 -(760 + 987))) or v11(v23.DivineHammerBuff) or  not IsPlayerSpell(v23.DivineHammer))) then local v62=1913 -(1789 + 124) ;while true do if (v62==(766 -(745 + 21))) then v20("Templars Verdict");return true;end end end break;end end end;local v38=function() if (((v27==(2 + 3)) or ((v27==(10 -6)) and v11(v23.DivineResonanceBuff)) or v11(v23.AllInBuff)) and (v7(v23.WakeOfAshes)>(0 -0))) then if v37() then return true;end end if ((FindSpellOverrideByID(v23.TemplarStrike)==v23.TemplarSlash) and (v30<(WeakAuras.gcdDuration() * (1 + 1)))) then local v51=0;while true do if (v51==(0 + 0)) then v20("Templar Slash");return true;end end end if (v3(v23.BladeOfJustice) and  not v12(v23.ExpurgationDebuff) and IsPlayerSpell(v23.HolyFlamesTalent) and (v7(v23.DivineToll)>0)) then local v52=0;while true do if (v52==(1055 -(87 + 968))) then v20("Blade of Justice");return true;end end end if (v3(v23.WakeOfAshes) and (FindSpellOverrideByID(v23.WakeOfAshes)~=v23.HammerOfLight) and ( not IsPlayerSpell(v23.LightsGuidanceTalent) or ((v27>=(8 -6)) and IsPlayerSpell(v23.LightsGuidanceTalent))) and ((v32>6) or (v7(v23.Crusade)>6) or IsPlayerSpell(v23.RadiantGloryTalent)) and ( not IsPlayerSpell(v23.ExecutionSentence) or (v7(v23.ExecutionSentence)>(4 + 0)) or (v17(0,135 -75 )<8))) then if ((aura_env.config[tostring(v23.WakeOfAshes)]==true) and aura_env.FlagKTrigCD) then v21("Wake of Ashes");elseif (aura_env.config[tostring(v23.WakeOfAshes)]~=true) then local v63=0;while true do if (v63==(1413 -(447 + 966))) then v20("Wake of Ashes");return true;end end end end if (v3(v23.DivineToll) and (v27<=(5 -3)) and ((v32>15) or (v7(v23.Crusade)>(1832 -(1703 + 114))) or IsPlayerSpell(v23.RadiantGloryTalent) or (v18(761 -(376 + 325) ,v29)<8))) then if ((aura_env.config[tostring(v23.DivineToll)]==true) and aura_env.FlagKTrigCD) then v21("Divine Toll");elseif (aura_env.config[tostring(v23.DivineToll)]~=true) then v20("Divine Toll");return true;end end if v37() then return true;end if ((FindSpellOverrideByID(v23.TemplarStrike)==v23.TemplarSlash) and (v30<WeakAuras.gcdDuration()) and (v28>=2)) then v20("Templar Slash");return true;end if (v3(v23.BladeOfJustice) and (v28>=(2 -0)) and IsPlayerSpell(v23.BladeOfVengeanceTalent)) then local v53=0 -0 ;while true do if (0==v53) then v20("Blade of Justice");return true;end end end if (v3(v23.HammerOfWrath) and ((v28<(1 + 1)) or  not IsPlayerSpell(v23.BlessedChampionTalent)) and v11(v23.BlessingOfAnsheBuff)) then v20("Hammer of Wrath");return true;end if v3(v23.TemplarStrike) then local v54=0 -0 ;while true do if (v54==(14 -(9 + 5))) then v20("Templar Strike");return true;end end end if v3(v23.Judgment) then local v55=0;while true do if ((376 -(85 + 291))==v55) then v20("Judgment");return true;end end end if v3(v23.BladeOfJustice) then local v56=0;while true do if (v56==(1265 -(243 + 1022))) then v20("Blade of Justice");return true;end end end if (v3(v23.HammerOfWrath) and ((v28<2) or  not IsPlayerSpell(v23.BlessedChampionTalent))) then v20("Hammer of Wrath");return true;end if (FindSpellOverrideByID(v23.TemplarStrike)==v23.TemplarSlash) then local v57=0;while true do if (v57==(0 -0)) then v20("Templar Slash");return true;end end end if (v3(v23.CrusaderStrike) and  not IsPlayerSpell(v23.TemplarStrikesTalent) and  not IsPlayerSpell(v23.CrusadingStrikesTalent)) then local v58=0 + 0 ;while true do if (v58==(1180 -(1123 + 57))) then v20("Crusader Strike");return true;end end end if v3(v23.HammerOfWrath) then local v59=0;while true do if (v59==(0 + 0)) then v20("Hammer of Wrath");return true;end end end end;if v36() then return true;end if v38() then return true;end v20("Clear");v21("Clear");end;