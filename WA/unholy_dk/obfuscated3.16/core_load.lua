WeakAuras.WatchGCD();aura_env.DamageTaken={};aura_env.LastSec=10 -5 ;aura_env.BasePercentage=0.25;aura_env.MinHealPercentage=490.07 -(59 + 431) ;aura_env.exclude={[243964 -(433 + 294) ]=true};aura_env.ArmyExpiration=0;aura_env.GargoyleExpiration=1846 -(1228 + 618) ;aura_env.ApocalypseExpiration=0;aura_env.AbominationExpiration=0 -0 ;aura_env.ids={AbominationLimb=1523297 -1140028 ,Apocalypse=276651 -(802 + 150) ,ArmyOfTheDead=42650,DarkArbiter=558253 -350904 ,DarkTransformation=115295 -51735 ,DeathAndDecay=31493 + 11772 ,DeathCoil=48538 -(915 + 82) ,Defile=152280,Epidemic=207317,FesteringStrike=243368 -157420 ,Outbreak=45192 + 32383 ,RaiseAbomination=598909 -143514 ,RaiseDead=46584,ScourgeStrike=55090,SoulReaper=344481 -(1069 + 118) ,SummonGargoyle=111633 -62427 ,UnholyAssault=453438 -246149 ,VampiricStrike=433895,VileContagion=67850 + 322429 ,ApocalypseTalent=489861 -214162 ,BurstingSoresTalent=207264,CoilOfDevastationTalent=390270,CommanderOfTheDeadTalent=387137 + 3122 ,DoomedBiddingTalent=455386,EbonFeverTalent=208060 -(368 + 423) ,FestermightTalent=1186644 -809054 ,FrenziedBloodthirstTalent=434093 -(10 + 8) ,GiftOfTheSanlaynTalent=1670066 -1235914 ,HarbingerOfDoomTalent=276465 -(416 + 26) ,HungeringThirstTalent=1417774 -973737 ,ImprovedDeathCoilTalent=377580,ImprovedDeathStrikeTalent=160622 + 213655 ,MenacingMagusTalent=455135,MorbidityTalent=668123 -290531 ,PlaguebringerTalent=390613 -(145 + 293) ,RaiseAbominationTalent=455395,RottenTouchTalent=390705 -(44 + 386) ,SuperstrainTalent=391769 -(998 + 488) ,UnholyBlightTalent=146281 + 314167 ,UnholyGroundTalent=374265,VampiricStrikeTalent=355288 + 78613 ,AFeastOfSoulsBuff=441633 -(201 + 571) ,BloodPlagueDebuff=56216 -(116 + 1022) ,ChainsOfIceTrollbaneSlowDebuff=1851929 -1407103 ,CommanderOfTheDeadBuff=229074 + 161186 ,DarkTransformationBuff=232037 -168477 ,DeathAndDecayBuff=668634 -480344 ,DeathRotDebuff=378399 -(814 + 45) ,EssenceOfTheBloodQueenBuff=1069176 -635251 ,FesteringScytheBuff=24687 + 433441 ,FesteringWoundDebuff=68657 + 125653 ,FestermightBuff=378476 -(261 + 624) ,FrostFeverDebuff=97909 -42814 ,GiftOfTheSanlaynBuff=435233 -(1020 + 60) ,InflictionOfSorrowBuff=460049,RottenTouchDebuff=391699 -(630 + 793) ,RunicCorruptionBuff=174380 -122920 ,SuddenDoomBuff=81340,VirulentPlagueDebuff=907118 -715531 ,WinningStreakBuff=479224 + 737589 };aura_env.OutOfRange=false;aura_env.KTrig=function(v33,...) local v34=0;while true do if (v34==(3 -2)) then if aura_env.FlagKTrigCD then WeakAuras.ScanEvents("K_TRIGED_CD","Clear",...);end aura_env.FlagKTrigCD=flase;break;end if (v34==(1747 -(760 + 987))) then WeakAuras.ScanEvents("K_TRIGED",v33,...);WeakAuras.ScanEvents("K_OUT_OF_RANGE",aura_env.OutOfRange);v34=1;end end end;aura_env.KTrigCD=function(v35,...) WeakAuras.ScanEvents("K_TRIGED_CD",v35,...);WeakAuras.ScanEvents("K_OUT_OF_RANGE",aura_env.OutOfRange);aura_env.FlagKTrigCD=false;end;aura_env.OffCooldown=function(v37) if (v37==nil) then local v109=a<b ;end if  not IsPlayerSpell(v37) then return false;end local v38,v39=C_Spell.IsSpellUsable(v37);if ( not v38 or v39) then return false;end local v40=C_Spell.GetSpellCooldown(v37).duration;local v41=(v40==nil) or (v40==(1913 -(1789 + 124))) or (v40==WeakAuras.gcdDuration()) ;if  not v41 then return false;end local v42,v43=C_SpellBook.FindSpellBookSlotForSpell(v37);local v44=v42 and C_SpellBook.IsSpellBookItemInRange(v42,v43,"target") ;if (v44==false) then aura_env.OutOfRange=true;end return true;end;aura_env.IsCasting=function(v45) return select(9,UnitCastingInfo("player"))==v45 ;end;aura_env.OffCooldownNotCasting=function(v46) return aura_env.OffCooldown(v46) and  not aura_env.IsCasting(v46) ;end;aura_env.GetStacks=function(v47,v48,v49) local v50=766 -(745 + 21) ;local v51;local v52;while true do if (v50==(0 + 0)) then v51,v51,v52=WA_GetUnitAura(v47,v48,v49);if (v52==nil) then v52=0;end v50=2 -1 ;end if (v50==(3 -2)) then return v52;end end end;aura_env.GetPlayerStacks=function(v53) return aura_env.GetStacks("player",v53);end;aura_env.GetTargetStacks=function(v54) return aura_env.GetStacks("target",v54,"PLAYER|HARMFUL");end;aura_env.GetRemainingAuraDuration=function(v55,v56,v57) if (v56==nil) then local v111=a<b ;end if (v57==nil) then v57="PLAYER";end local v58=WA_GetUnitAura(v55,v56,v57);if (v58==nil) then return 0;end local v59=select(1 + 5 ,WA_GetUnitAura(v55,v56,v57));if (v59==nil) then return 0;end return v59-GetTime() ;end;aura_env.GetRemainingDebuffDuration=function(v60,v61) return aura_env.GetRemainingAuraDuration(v60,v61,"HARMFUL|PLAYER");end;aura_env.GetSpellChargesFractional=function(v62) local v63=0;local v64;local v65;local v66;while true do if ((1 + 0)==v63) then if (v64.cooldownStartTime==(1055 -(87 + 968))) then return v65;end v66=(GetTime() -v64.cooldownStartTime)/v64.cooldownDuration ;v63=8 -6 ;end if (v63==0) then v64=C_Spell.GetSpellCharges(v62);v65=v64.currentCharges;v63=1 + 0 ;end if (v63==2) then return v65 + v66 ;end end end;aura_env.GetTimeToNextCharge=function(v67) local v68=0 -0 ;local v69;local v70;local v71;while true do if (v68==(1414 -(447 + 966))) then if (v70==(0 -0)) then return 0;end v71=(v69.cooldownStartTime + v69.cooldownDuration) -GetTime() ;v68=1819 -(1703 + 114) ;end if (v68==(701 -(376 + 325))) then v69=C_Spell.GetSpellCharges(v67);v70=v69.maxCharges-v69.currentCharges ;v68=1 -0 ;end if (v68==(5 -3)) then return v71;end end end;aura_env.GetTimeToFullCharges=function(v72) local v73=0;local v74;local v75;local v76;while true do if (v73==2) then if (v75>(1 + 0)) then v76=v76 + (v74.cooldownDuration * (v75-(2 -1))) ;end return v76;end if (v73==1) then if (v75==(14 -(9 + 5))) then return 376 -(85 + 291) ;end v76=(v74.cooldownStartTime + v74.cooldownDuration) -GetTime() ;v73=1267 -(243 + 1022) ;end if (v73==0) then v74=C_Spell.GetSpellCharges(v72);v75=v74.maxCharges-v74.currentCharges ;v73=3 -2 ;end end end;aura_env.TargetTimeToXPct=function(v77,v78) if (v78==nil) then local v112=a<b ;end if (HeroLib==nil) then return v78;end return HeroLib.Unit.Target:TimeToX(v77);end;aura_env.FightRemains=function(v79,v80) if (v79==nil) then local v113=a<b ;end if (HeroLib==nil) then return v79;end return HeroLib.FightRemains(HeroLib.Unit.Player:GetEnemiesInRange(v80));end;aura_env.IsAuraRefreshable=function(v81,v82) local v83=0 + 0 ;local v84;local v85;local v86;local v87;local v88;while true do if (v83==1) then v85,v85,v85,v85,v86,v87=WA_GetUnitAura(v82,v81,v84);if (v86==nil) then return true;end v83=1182 -(1123 + 57) ;end if (0==v83) then v84="";if (v82~="player") then local v120=0 + 0 ;while true do if (v120==(254 -(163 + 91))) then v82="target";v84="HARMFUL|PLAYER";break;end end end v83=1;end if (v83==(1932 -(1869 + 61))) then v88=v87-GetTime() ;return (v88/v86)<(0.3 + 0) ;end end end;aura_env.GetRemainingSpellCooldown=function(v89) if (v89==nil) then local v114=a<b ;end local v90=C_Spell.GetSpellCharges(v89);if (v90 and (C_Spell.GetSpellCharges(v89).currentCharges>=(3 -2))) then return 0 -0 ;end local v91=C_Spell.GetSpellCooldown(v89);local v92=(v91.startTime + v91.duration) -GetTime() ;if ((v91.duration==0) or (v91.duration==WeakAuras.gcdDuration())) then v92=0;end return v92;end;aura_env.HasBloodlust=function() return WA_GetUnitBuff("player",387 + 2438 ) or WA_GetUnitBuff("player",264667) or WA_GetUnitBuff("player",110424 -30071 ) or WA_GetUnitBuff("player",30228 + 1954 ) or WA_GetUnitBuff("player",390386) or WA_GetUnitBuff("player",388014 -(1329 + 145) ) ;end;aura_env.PlayerHasBuff=function(v93) return WA_GetUnitBuff("player",v93)~=nil ;end;aura_env.PetHasBuff=function(v94) return WA_GetUnitBuff("pet",v94)~=nil ;end;aura_env.TargetHasDebuff=function(v95) return WA_GetUnitDebuff("target",v95,"PLAYER|HARMFUL")~=nil ;end;aura_env.CalcDeathStrikeHeal=function() local v96=1;local v97=GetTime();local v98=971 -(140 + 831) ;while aura_env.DamageTaken[v96] do local v106=1850 -(1409 + 441) ;local v107;local v108;while true do if (v106==(718 -(15 + 703))) then v107=aura_env.DamageTaken[v96][1];v108=aura_env.DamageTaken[v96][2];v106=1;end if (v106==1) then if (v97>(v107 + aura_env.LastSec)) then table.remove(aura_env.DamageTaken,v96);else local v121=0;while true do if (v121==0) then v98=v98 + v108 ;v96=v96 + 1 ;break;end end end break;end end end local v99=aura_env.BasePercentage;local v100=aura_env.MinHealPercentage;if IsPlayerSpell(aura_env.ids.ImprovedDeathStrikeTalent) then local v115=0 + 0 ;while true do if (v115==(438 -(262 + 176))) then v99=v99 * (1722.05 -(345 + 1376)) ;v100=v100 * (689.05 -(198 + 490)) ;break;end end end local v101=1 + ((GetCombatRatingBonus(29) + GetVersatilityBonus(30))/100) ;local v102=(4 -3) + ((select(38 -22 ,WA_GetUnitBuff("player",48994 -(696 + 510) )) or (0 -0))/(1362 -(1091 + 171))) ;local v103=1 + 0 + (0.04 * (select(9 -6 ,WA_GetUnitBuff("player",215044 -150200 )) or 0)) ;local v104=v98 * v99 ;local v105=v104/UnitHealthMax("player") ;v105=math.max(v100,v105);v105=v105 * v101 * v102 * v103 ;v104=v105 * UnitHealthMax("player") ;return v104;end;