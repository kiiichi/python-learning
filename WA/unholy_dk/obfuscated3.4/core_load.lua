WeakAuras.WatchGCD();aura_env.DamageTaken={};aura_env.LastSec=5;aura_env.BasePercentage=0.25 + 0 ;aura_env.MinHealPercentage=0.07 -0 ;aura_env.exclude={[241292 + 1945 ]=true};aura_env.ArmyExpiration=0;aura_env.GargoyleExpiration=791 -(368 + 423) ;aura_env.ApocalypseExpiration=0 -0 ;aura_env.AbominationExpiration=18 -(10 + 8) ;aura_env.ids={RaiseAbomination=1751783 -1296388 ,AbominationLimb=383269,Apocalypse=276141 -(416 + 26) ,ArmyOfTheDead=42650,DarkArbiter=662048 -454699 ,DarkTransformation=27277 + 36283 ,DeathAndDecay=76554 -33289 ,DeathCoil=47979 -(145 + 293) ,Defile=152280,Epidemic=207747 -(44 + 386) ,FesteringStrike=85948,Outbreak=79061 -(998 + 488) ,RaiseDead=14800 + 31784 ,ScourgeStrike=55090,SoulReaper=281097 + 62197 ,SummonGargoyle=49206,UnholyAssault=208061 -(201 + 571) ,VileContagion=391417 -(116 + 1022) ,VampiricStrike=1806421 -1372526 ,VampiricStrikeTalent=433901,Morbidity=377592,DoomedBidding=455386,CoilOfDevastation=390270,ImprovedDeathCoil=221631 + 155949 ,GiftOfTheSanlayn=1584954 -1150802 ,RottenTouch=1385900 -995625 ,BurstingSores=208123 -(814 + 45) ,EbonFever=510703 -303434 ,Superstrain=21031 + 369252 ,CommanderOfTheDead=137893 + 252366 ,Plaguebringer=391060 -(261 + 624) ,ImprovedDeathStrike=374277,UnholyBlight=460448,UnholyGround=665105 -290840 ,MenacingMagusTalent=455135,FrenziedBloodthirstTalent=435155 -(1020 + 60) ,HungeringThirstTalent=445460 -(630 + 793) ,HarbingerOfDoomTalent=935349 -659326 ,AFeastOfSouls=440861,ChainsOfIceTrollbaneSlow=2106143 -1661317 ,VirulentPlague=75454 + 116133 ,FesteringWound=669017 -474707 ,EssenceOfTheBloodQueen=433925,GiftOfTheSanlaynBuff=435900 -(760 + 987) ,RottenTouchDebuff=390276,CommanderOfTheDeadBuff=392173 -(1789 + 124) ,InflictionOfSorrow=460049,DeathAndDecayBuff=189056 -(745 + 21) ,RunicCorruption=51460,FrostFever=18951 + 36144 ,BloodPlague=151554 -96476 ,SuddenDoom=319057 -237717 ,Festermight=3088 + 374503 ,DeathRot=296415 + 81125 ,FesteringScythe=458123,WinningStreakBuff=1217868 -(87 + 968) };aura_env.OutOfRange=false;aura_env.KTrig=function(v33,...) local v34=0 -0 ;while true do if (1==v34) then if aura_env.FlagKTrigCD then WeakAuras.ScanEvents("K_TRIGED_CD","Clear",...);end aura_env.FlagKTrigCD=flase;break;end if (v34==0) then WeakAuras.ScanEvents("K_TRIGED",v33,...);WeakAuras.ScanEvents("K_OUT_OF_RANGE",aura_env.OutOfRange);v34=1;end end end;aura_env.KTrigCD=function(v35,...) local v36=0 + 0 ;while true do if (v36==0) then WeakAuras.ScanEvents("K_TRIGED_CD",v35,...);WeakAuras.ScanEvents("K_OUT_OF_RANGE",aura_env.OutOfRange);v36=2 -1 ;end if (v36==(1414 -(447 + 966))) then aura_env.FlagKTrigCD=false;break;end end end;aura_env.OffCooldown=function(v37) if (v37==nil) then local v109=a<b ;end if  not IsPlayerSpell(v37) then return false;end local v38,v39=C_Spell.IsSpellUsable(v37);if ( not v38 or v39) then return false;end local v40=C_Spell.GetSpellCooldown(v37).duration;local v41=(v40==nil) or (v40==(0 -0)) or (v40==WeakAuras.gcdDuration()) ;if  not v41 then return false;end local v42,v43=C_SpellBook.FindSpellBookSlotForSpell(v37);local v44=v42 and C_SpellBook.IsSpellBookItemInRange(v42,v43,"target") ;if (v44==false) then local v110=1817 -(1703 + 114) ;while true do if (v110==(701 -(376 + 325))) then aura_env.OutOfRange=true;return false;end end end return true;end;aura_env.IsCasting=function(v45) return select(9,UnitCastingInfo("player"))==v45 ;end;aura_env.OffCooldownNotCasting=function(v46) return aura_env.OffCooldown(v46) and  not aura_env.IsCasting(v46) ;end;aura_env.GetStacks=function(v47,v48,v49) local v50=0;local v51;local v52;while true do if (v50==1) then return v52;end if (v50==(0 -0)) then v51,v51,v52=WA_GetUnitAura(v47,v48,v49);if (v52==nil) then v52=0;end v50=2 -1 ;end end end;aura_env.GetPlayerStacks=function(v53) return aura_env.GetStacks("player",v53);end;aura_env.GetTargetStacks=function(v54) return aura_env.GetStacks("target",v54,"PLAYER|HARMFUL");end;aura_env.GetRemainingAuraDuration=function(v55,v56,v57) if (v56==nil) then local v111=a<b ;end if (v57==nil) then v57="PLAYER";end local v58=WA_GetUnitAura(v55,v56,v57);if (v58==nil) then return 0 + 0 ;end local v59=select(12 -6 ,WA_GetUnitAura(v55,v56,v57));if (v59==nil) then return 14 -(9 + 5) ;end return v59-GetTime() ;end;aura_env.GetRemainingDebuffDuration=function(v60,v61) return aura_env.GetRemainingAuraDuration(v60,v61,"HARMFUL|PLAYER");end;aura_env.GetSpellChargesFractional=function(v62) local v63=376 -(85 + 291) ;local v64;local v65;local v66;while true do if (v63==2) then return v65 + v66 ;end if (v63==(1266 -(243 + 1022))) then if (v64.cooldownStartTime==(0 -0)) then return v65;end v66=(GetTime() -v64.cooldownStartTime)/v64.cooldownDuration ;v63=2;end if (v63==(0 + 0)) then v64=C_Spell.GetSpellCharges(v62);v65=v64.currentCharges;v63=1181 -(1123 + 57) ;end end end;aura_env.GetTimeToNextCharge=function(v67) local v68=0 + 0 ;local v69;local v70;local v71;while true do if (v68==1) then if (v70==(254 -(163 + 91))) then return 1930 -(1869 + 61) ;end v71=(v69.cooldownStartTime + v69.cooldownDuration) -GetTime() ;v68=2;end if (v68==(0 + 0)) then v69=C_Spell.GetSpellCharges(v67);v70=v69.maxCharges-v69.currentCharges ;v68=1;end if ((6 -4)==v68) then return v71;end end end;aura_env.GetTimeToFullCharges=function(v72) local v73=C_Spell.GetSpellCharges(v72);local v74=v73.maxCharges-v73.currentCharges ;if (v74==(0 -0)) then return 0 + 0 ;end local v75=(v73.cooldownStartTime + v73.cooldownDuration) -GetTime() ;if (v74>(1 -0)) then v75=v75 + (v73.cooldownDuration * (v74-(1 + 0))) ;end return v75;end;aura_env.TargetTimeToXPct=function(v76,v77) local v78=1474 -(1329 + 145) ;while true do if (v78==(971 -(140 + 831))) then if (v77==nil) then local v121=a<b ;end if (HeroLib==nil) then return v77;end v78=1851 -(1409 + 441) ;end if (v78==1) then return HeroLib.Unit.Target:TimeToX(v76);end end end;aura_env.FightRemains=function(v79,v80) local v81=718 -(15 + 703) ;while true do if (v81==(1 + 0)) then return HeroLib.FightRemains(HeroLib.Unit.Player:GetEnemiesInRange(v80));end if (v81==0) then if (v79==nil) then local v122=a<b ;end if (HeroLib==nil) then return v79;end v81=439 -(262 + 176) ;end end end;aura_env.IsAuraRefreshable=function(v82,v83) local v84="";if (v83~="player") then local v112=1721 -(345 + 1376) ;while true do if (v112==(688 -(198 + 490))) then v83="target";v84="HARMFUL|PLAYER";break;end end end local v85,v85,v85,v85,v86,v87=WA_GetUnitAura(v83,v82,v84);if (v86==nil) then return true;end local v88=v87-GetTime() ;return (v88/v86)<(0.3 -0) ;end;aura_env.GetRemainingSpellCooldown=function(v89) if (v89==nil) then local v113=a<b ;end local v90=C_Spell.GetSpellCharges(v89);if (v90 and (C_Spell.GetSpellCharges(v89).currentCharges>=1)) then return 0 -0 ;end local v91=C_Spell.GetSpellCooldown(v89);local v92=(v91.startTime + v91.duration) -GetTime() ;if ((v91.duration==(1206 -(696 + 510))) or (v91.duration==WeakAuras.gcdDuration())) then v92=0 -0 ;end return v92;end;aura_env.HasBloodlust=function() return WA_GetUnitBuff("player",4087 -(1091 + 171) ) or WA_GetUnitBuff("player",264667) or WA_GetUnitBuff("player",12931 + 67422 ) or WA_GetUnitBuff("player",101319 -69137 ) or WA_GetUnitBuff("player",390386) or WA_GetUnitBuff("player",1281895 -895355 ) ;end;aura_env.PlayerHasBuff=function(v93) return WA_GetUnitBuff("player",v93)~=nil ;end;aura_env.PetHasBuff=function(v94) return WA_GetUnitBuff("pet",v94)~=nil ;end;aura_env.TargetHasDebuff=function(v95) return WA_GetUnitDebuff("target",v95,"PLAYER|HARMFUL")~=nil ;end;aura_env.CalcDeathStrikeHeal=function() local v96=375 -(123 + 251) ;local v97=GetTime();local v98=0;while aura_env.DamageTaken[v96] do local v106=0 -0 ;local v107;local v108;while true do if (v106==(699 -(208 + 490))) then if (v97>(v107 + aura_env.LastSec)) then table.remove(aura_env.DamageTaken,v96);else local v123=0;while true do if (v123==0) then v98=v98 + v108 ;v96=v96 + 1 + 0 ;break;end end end break;end if (v106==(0 + 0)) then v107=aura_env.DamageTaken[v96][1];v108=aura_env.DamageTaken[v96][838 -(660 + 176) ];v106=1 + 0 ;end end end local v99=aura_env.BasePercentage;local v100=aura_env.MinHealPercentage;if IsPlayerSpell(aura_env.ids.ImprovedDeathStrike) then local v114=202 -(14 + 188) ;while true do if (v114==(675 -(534 + 141))) then v99=v99 * (1.05 + 0) ;v100=v100 * (1.05 + 0) ;break;end end end local v101=1 + 0 + ((GetCombatRatingBonus(60 -31 ) + GetVersatilityBonus(47 -17 ))/(280 -180)) ;local v102=1 + 0 + ((select(16,WA_GetUnitBuff("player",30428 + 17360 )) or (396 -(115 + 281)))/(232 -132)) ;local v103=1 + 0 + ((0.04 -0) * (select(10 -7 ,WA_GetUnitBuff("player",65711 -(550 + 317) )) or 0)) ;local v104=v98 * v99 ;local v105=v104/UnitHealthMax("player") ;v105=math.max(v100,v105);v105=v105 * v101 * v102 * v103 ;v104=v105 * UnitHealthMax("player") ;return v104;end;