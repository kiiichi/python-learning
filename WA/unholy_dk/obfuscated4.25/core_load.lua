WeakAuras.WatchGCD();aura_env.DamageTaken={};aura_env.LastSec=10 -5 ;aura_env.BasePercentage=1883.25 -(1668 + 215) ;aura_env.MinHealPercentage=0.07 + 0 ;aura_env.exclude={[854071 -610834 ]=true};aura_env.ArmyExpiration=0;aura_env.GargoyleExpiration=0 + 0 ;aura_env.ApocalypseExpiration=518 -(114 + 404) ;aura_env.AbominationExpiration=488 -(106 + 382) ;aura_env.ids={AbominationLimb=383680 -(306 + 105) ,Apocalypse=705563 -429864 ,ArmyOfTheDead=43077 -(166 + 261) ,DarkArbiter=207856 -(289 + 218) ,DarkTransformation=63560,DeathAndDecay=44609 -(1213 + 131) ,DeathCoil=10752 + 36789 ,Defile=152280,Epidemic=121690 + 85627 ,FesteringStrike=85948,Outbreak=283202 -205627 ,RaiseAbomination=455395,RaiseDead=165423 -118839 ,ScourgeStrike=55090,SoulReaper=343294,SummonGargoyle=50065 -(814 + 45) ,UnholyAssault=510752 -303463 ,VampiricStrike=23381 + 410514 ,VileContagion=137900 + 252379 ,FesteringScy=459013 -(261 + 624) ,ApocalypseTalent=489943 -214244 ,BurstingSoresTalent=208344 -(1020 + 60) ,CoilOfDevastationTalent=391693 -(630 + 793) ,CommanderOfTheDeadTalent=1322457 -932198 ,DoomedBiddingTalent=455386,EbonFeverTalent=207269,FestermightTalent=1787797 -1410207 ,FrenziedBloodthirstTalent=170955 + 263120 ,GiftOfTheSanlaynTalent=1494804 -1060652 ,HarbingerOfDoomTalent=277770 -(760 + 987) ,HungeringThirstTalent=444037,ImprovedDeathCoilTalent=377580,ImprovedDeathStrikeTalent=376190 -(1789 + 124) ,MenacingMagusTalent=455901 -(745 + 21) ,MorbidityTalent=129879 + 247713 ,PlaguebringerTalent=1073623 -683448 ,RaiseAbominationTalent=1786293 -1330898 ,RottenTouchTalent=3191 + 387084 ,SuperstrainTalent=390283,UnholyBlightTalent=460448,UnholyGroundTalent=293844 + 80421 ,VampiricStrikeTalent=433901,AFeastOfSoulsBuff=441916 -(87 + 968) ,BloodPlagueDebuff=242450 -187372 ,ChainsOfIceTrollbaneSlowDebuff=403575 + 41251 ,CommanderOfTheDeadBuff=882202 -491942 ,DarkTransformationBuff=63560,DeathAndDecayBuff=189703 -(447 + 966) ,DeathRotDebuff=1033573 -656033 ,EssenceOfTheBloodQueenBuff=435742 -(1703 + 114) ,FesteringScytheBuff=458123,FesteringWoundDebuff=195011 -(376 + 325) ,FestermightBuff=377591,FrostFeverDebuff=90289 -35194 ,GiftOfTheSanlaynBuff=1335878 -901725 ,InflictionOfSorrowBuff=460049,RottenTouchDebuff=111532 + 278744 ,RunicCorruptionBuff=113339 -61879 ,SuddenDoomBuff=81354 -(9 + 5) ,VirulentPlagueDebuff=191963 -(85 + 291) ,WinningStreakBuff=1218078 -(243 + 1022) };aura_env.OutOfRange=false;aura_env.KTrig=function(v33,...) local v34=0 -0 ;while true do if (v34==(1 + 0)) then if aura_env.FlagKTrigCD then WeakAuras.ScanEvents("K_TRIGED_CD","Clear",...);end aura_env.FlagKTrigCD=flase;break;end if (v34==0) then WeakAuras.ScanEvents("K_TRIGED",v33,...);WeakAuras.ScanEvents("K_OUT_OF_RANGE",aura_env.OutOfRange);v34=1181 -(1123 + 57) ;end end end;aura_env.KTrigCD=function(v35,...) WeakAuras.ScanEvents("K_TRIGED_CD",v35,...);WeakAuras.ScanEvents("K_OUT_OF_RANGE",aura_env.OutOfRange);aura_env.FlagKTrigCD=false;end;aura_env.OffCooldown=function(v37) local v38=0;local v39;local v40;local v41;local v42;local v43;local v44;local v45;while true do if (v38==(1 + 0)) then v41=C_Spell.GetSpellCooldown(v37).duration;v42=(v41==nil) or (v41==(254 -(163 + 91))) or (v41==WeakAuras.gcdDuration()) ;if  not v42 then return false;end v43,v44=C_SpellBook.FindSpellBookSlotForSpell(v37);v38=1932 -(1869 + 61) ;end if (v38==(0 + 0)) then if (v37==nil) then local v119=a<b ;end if  not IsPlayerSpell(v37) then return false;end v39,v40=C_Spell.IsSpellUsable(v37);if ( not v39 or v40) then return false;end v38=3 -2 ;end if (v38==(2 -0)) then v45=v43 and C_SpellBook.IsSpellBookItemInRange(v43,v44,"target") ;if (v45==false) then aura_env.OutOfRange=true;end return true;end end end;aura_env.IsCasting=function(v46) return select(2 + 7 ,UnitCastingInfo("player"))==v46 ;end;aura_env.OffCooldownNotCasting=function(v47) return aura_env.OffCooldown(v47) and  not aura_env.IsCasting(v47) ;end;aura_env.GetStacks=function(v48,v49,v50) local v51=0 -0 ;local v52;local v53;while true do if (v51==1) then return v53;end if (v51==(0 + 0)) then v52,v52,v53=WA_GetUnitAura(v48,v49,v50);if (v53==nil) then v53=1474 -(1329 + 145) ;end v51=972 -(140 + 831) ;end end end;aura_env.GetPlayerStacks=function(v54) return aura_env.GetStacks("player",v54);end;aura_env.GetTargetStacks=function(v55) return aura_env.GetStacks("target",v55,"PLAYER|HARMFUL");end;aura_env.GetRemainingAuraDuration=function(v56,v57,v58) local v59=1850 -(1409 + 441) ;local v60;local v61;while true do if (v59==(721 -(15 + 703))) then return v61-GetTime() ;end if (v59==2) then v61=select(3 + 3 ,WA_GetUnitAura(v56,v57,v58));if (v61==nil) then return 438 -(262 + 176) ;end v59=3;end if (v59==(1722 -(345 + 1376))) then v60=WA_GetUnitAura(v56,v57,v58);if (v60==nil) then return 0;end v59=690 -(198 + 490) ;end if (v59==0) then if (v57==nil) then local v121=a<b ;end if (v58==nil) then v58="PLAYER";end v59=4 -3 ;end end end;aura_env.GetRemainingDebuffDuration=function(v62,v63) return aura_env.GetRemainingAuraDuration(v62,v63,"HARMFUL|PLAYER");end;aura_env.GetSpellChargesFractional=function(v64) local v65=0;local v66;local v67;local v68;while true do if (v65==(4 -2)) then return v67 + v68 ;end if (v65==(1206 -(696 + 510))) then v66=C_Spell.GetSpellCharges(v64);v67=v66.currentCharges;v65=1;end if (1==v65) then if (v66.cooldownStartTime==0) then return v67;end v68=(GetTime() -v66.cooldownStartTime)/v66.cooldownDuration ;v65=2;end end end;aura_env.GetTimeToNextCharge=function(v69) local v70=C_Spell.GetSpellCharges(v69);local v71=v70.maxCharges-v70.currentCharges ;if (v71==0) then return 0 -0 ;end local v72=(v70.cooldownStartTime + v70.cooldownDuration) -GetTime() ;return v72;end;aura_env.GetTimeToFullCharges=function(v73) local v74=1262 -(1091 + 171) ;local v75;local v76;local v77;while true do if (v74==2) then if (v76>1) then v77=v77 + (v75.cooldownDuration * (v76-(1 + 0))) ;end return v77;end if ((0 -0)==v74) then v75=C_Spell.GetSpellCharges(v73);v76=v75.maxCharges-v75.currentCharges ;v74=3 -2 ;end if (v74==(375 -(123 + 251))) then if (v76==0) then return 0;end v77=(v75.cooldownStartTime + v75.cooldownDuration) -GetTime() ;v74=9 -7 ;end end end;aura_env.TargetTimeToXPct=function(v78,v79) local v80=698 -(208 + 490) ;while true do if ((1 + 0)==v80) then return HeroLib.Unit.Target:TimeToX(v78);end if (v80==0) then if (v79==nil) then local v122=a<b ;end if (HeroLib==nil) then return v79;end v80=1 + 0 ;end end end;aura_env.FightRemains=function(v81,v82) local v83=0;while true do if (v83==(836 -(660 + 176))) then if (v81==nil) then local v123=a<b ;end if (HeroLib==nil) then return v81;end v83=1;end if (v83==1) then return HeroLib.FightRemains(HeroLib.Unit.Player:GetEnemiesInRange(v82));end end end;aura_env.IsAuraRefreshable=function(v84,v85) local v86=0;local v87;local v88;local v89;local v90;local v91;while true do if (v86==(0 + 0)) then v87="";if (v85~="player") then v85="target";v87="HARMFUL|PLAYER";end v86=203 -(14 + 188) ;end if (v86==(676 -(534 + 141))) then v88,v88,v88,v88,v89,v90=WA_GetUnitAura(v85,v84,v87);if (v89==nil) then return true;end v86=1 + 1 ;end if (v86==(2 + 0)) then v91=v90-GetTime() ;return (v91/v89)<(0.3 + 0) ;end end end;aura_env.GetRemainingSpellCooldown=function(v92) local v93=0 -0 ;local v94;local v95;local v96;while true do if (v93==0) then if (v92==nil) then local v124=a<b ;end v94=C_Spell.GetSpellCharges(v92);v93=1 -0 ;end if (v93==(5 -3)) then v96=(v95.startTime + v95.duration) -GetTime() ;if ((v95.duration==0) or (v95.duration==WeakAuras.gcdDuration())) then v96=0 + 0 ;end v93=2 + 1 ;end if (v93==(397 -(115 + 281))) then if (v94 and (C_Spell.GetSpellCharges(v92).currentCharges>=1)) then return 0;end v95=C_Spell.GetSpellCooldown(v92);v93=4 -2 ;end if (v93==3) then return v96;end end end;aura_env.HasBloodlust=function() return WA_GetUnitBuff("player",2339 + 486 ) or WA_GetUnitBuff("player",639634 -374967 ) or WA_GetUnitBuff("player",294638 -214285 ) or WA_GetUnitBuff("player",32182) or WA_GetUnitBuff("player",391253 -(550 + 317) ) or WA_GetUnitBuff("player",558465 -171925 ) ;end;aura_env.PlayerHasBuff=function(v97) return WA_GetUnitBuff("player",v97)~=nil ;end;aura_env.PetHasBuff=function(v98) return WA_GetUnitBuff("pet",v98)~=nil ;end;aura_env.TargetHasDebuff=function(v99) return WA_GetUnitDebuff("target",v99,"PLAYER|HARMFUL")~=nil ;end;aura_env.CalcDeathStrikeHeal=function() local v100=1;local v101=GetTime();local v102=0 -0 ;while aura_env.DamageTaken[v100] do local v110=0;local v111;local v112;while true do if (v110==(2 -1)) then if (v101>(v111 + aura_env.LastSec)) then table.remove(aura_env.DamageTaken,v100);else local v125=285 -(134 + 151) ;while true do if (v125==0) then v102=v102 + v112 ;v100=v100 + (1666 -(970 + 695)) ;break;end end end break;end if ((0 -0)==v110) then v111=aura_env.DamageTaken[v100][1];v112=aura_env.DamageTaken[v100][1992 -(582 + 1408) ];v110=1;end end end local v103=aura_env.BasePercentage;local v104=aura_env.MinHealPercentage;if IsPlayerSpell(aura_env.ids.ImprovedDeathStrikeTalent) then local v113=0 -0 ;while true do if (v113==(0 -0)) then v103=v103 * (3.05 -2) ;v104=v104 * (1825.05 -(1195 + 629)) ;break;end end end local v105=(1 -0) + ((GetCombatRatingBonus(270 -(187 + 54) ) + GetVersatilityBonus(810 -(162 + 618) ))/100) ;local v106=1 + 0 + ((select(16,WA_GetUnitBuff("player",31829 + 15959 )) or (0 -0))/(168 -68)) ;local v107=1 + ((0.04 + 0) * (select(1639 -(1373 + 263) ,WA_GetUnitBuff("player",65844 -(451 + 549) )) or 0)) ;local v108=v102 * v103 ;local v109=v108/UnitHealthMax("player") ;v109=math.max(v104,v109);v109=v109 * v105 * v106 * v107 ;v108=v109 * UnitHealthMax("player") ;return v108;end;