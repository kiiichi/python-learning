WeakAuras.WatchGCD();aura_env.DamageTaken={};aura_env.LastSec=4 + 1 ;aura_env.BasePercentage=0.25 + 0 ;aura_env.MinHealPercentage=1954.07 -(508 + 1446) ;aura_env.exclude={[177050 + 66187 ]=true};aura_env.ArmyExpiration=997 -(915 + 82) ;aura_env.GargoyleExpiration=0 -0 ;aura_env.ApocalypseExpiration=0;aura_env.AbominationExpiration=0 + 0 ;aura_env.ids={Apocalypse=275699,ArmyOfTheDead=56090 -13440 ,DarkArbiter=207349,DarkTransformation=64747 -(1069 + 118) ,DeathAndDecay=98155 -54890 ,DeathCoil=47541,Defile=333108 -180828 ,Desecrate=214650 + 1020048 ,Epidemic=207317,FesteringStrike=85948,FesteringScythe=814001 -355873 ,LegionOfSouls=383269,Outbreak=77575,RaiseAbomination=451752 + 3643 ,RaiseDead=47375 -(368 + 423) ,ScourgeStrike=173130 -118040 ,SoulReaper=343312 -(10 + 8) ,SummonGargoyle=189282 -140076 ,UnholyAssault=207731 -(416 + 26) ,VampiricStrike=1385391 -951496 ,ApocalypseTalent=118317 + 157382 ,BurstingSoresTalent=207264,CoilOfDevastationTalent=690556 -300286 ,CommanderOfTheDeadTalent=390259,DesecrateTalent=1234997 -(145 + 293) ,DoomedBiddingTalent=455386,EbonFeverTalent=207699 -(44 + 386) ,FesteringScytheTalent=456883 -(998 + 488) ,FestermightTalent=119958 + 257632 ,FrenziedBloodthirstTalent=434075,GiftOfTheSanlaynTalent=434152,HarbingerOfDoomTalent=226014 + 50009 ,HungeringThirstTalent=444809 -(201 + 571) ,ImprovedDeathCoilTalent=378718 -(116 + 1022) ,ImprovedDeathStrikeTalent=1558215 -1183938 ,MenacingMagusTalent=455135,MorbidityTalent=221638 + 155954 ,PestilenceTalent=1012095 -734861 ,PlaguebringerTalent=390175,RaiseAbominationTalent=1617147 -1161752 ,RottenTouchTalent=391134 -(814 + 45) ,SuperstrainTalent=961643 -571360 ,UnholyBlightTalent=24812 + 435636 ,UnholyGroundTalent=132242 + 242023 ,VampiricStrikeTalent=434786 -(261 + 624) ,AFeastOfSoulsBuff=440861,BloodPlagueDebuff=97878 -42800 ,ChainsOfIceTrollbaneSlowDebuff=445906 -(1020 + 60) ,CommanderOfTheDeadBuff=390260,DarkTransformationBuff=63560,DeathAndDecayBuff=189713 -(630 + 793) ,DeathRotDebuff=1279357 -901817 ,EssenceOfTheBloodQueenBuff=433925,FesteringScytheBuff=458123,FesteringScytheStacksBuff=2174380 -1715142 ,FesteringWoundDebuff=76527 + 117783 ,FestermightBuff=1300062 -922471 ,FrostFeverDebuff=56842 -(760 + 987) ,GiftOfTheSanlaynBuff=434153,InflictionOfSorrowBuff=461962 -(1789 + 124) ,LegionOfSoulsBuff=384035 -(745 + 21) ,RottenTouchDebuff=134242 + 256034 ,RunicCorruptionBuff=51460,SuddenDoomBuff=223818 -142478 ,VirulentPlagueDebuff=191587,VisceralStrengthUnholyBuff=4842470 -3607938 ,WinningStreakBuff=9949 + 1206864 };aura_env.OutOfRange=false;aura_env.KTrig=function(v32,...) local v33=0;while true do if (v33==1) then if aura_env.FlagKTrigCD then WeakAuras.ScanEvents("K_TRIGED_CD","Clear",...);end aura_env.FlagKTrigCD=flase;break;end if (v33==(0 + 0)) then WeakAuras.ScanEvents("K_TRIGED",v32,...);WeakAuras.ScanEvents("K_OUT_OF_RANGE",aura_env.OutOfRange);v33=1056 -(87 + 968) ;end end end;aura_env.KTrigCD=function(v34,...) local v35=0;while true do if (v35==0) then WeakAuras.ScanEvents("K_TRIGED_CD",v34,...);WeakAuras.ScanEvents("K_OUT_OF_RANGE",aura_env.OutOfRange);v35=4 -3 ;end if (v35==1) then aura_env.FlagKTrigCD=false;break;end end end;aura_env.OffCooldown=function(v36) if (v36==nil) then local v109=a<b ;end if  not IsPlayerSpell(v36) then return false;end local v37,v38=C_Spell.IsSpellUsable(v36);if ( not v37 or v38) then return false;end local v39=C_Spell.GetSpellCooldown(v36).duration;local v40=(v39==nil) or (v39==(0 + 0)) or (v39==WeakAuras.gcdDuration()) ;if  not v40 then return false;end local v41,v42=C_SpellBook.FindSpellBookSlotForSpell(v36);local v43=v41 and C_SpellBook.IsSpellBookItemInRange(v41,v42,"target") ;if (v43==false) then aura_env.OutOfRange=true;end return true;end;aura_env.IsCasting=function(v44) return select(19 -10 ,UnitCastingInfo("player"))==v44 ;end;aura_env.OffCooldownNotCasting=function(v45) return aura_env.OffCooldown(v45) and  not aura_env.IsCasting(v45) ;end;aura_env.GetStacks=function(v46,v47,v48) local v49=1413 -(447 + 966) ;local v50;local v51;while true do if ((2 -1)==v49) then return v51;end if (v49==(1817 -(1703 + 114))) then v50,v50,v51=WA_GetUnitAura(v46,v47,v48);if (v51==nil) then v51=0;end v49=702 -(376 + 325) ;end end end;aura_env.GetPlayerStacks=function(v52) return aura_env.GetStacks("player",v52);end;aura_env.GetTargetStacks=function(v53) return aura_env.GetStacks("target",v53,"PLAYER|HARMFUL");end;aura_env.GetRemainingAuraDuration=function(v54,v55,v56) local v57=0 -0 ;local v58;local v59;while true do if (v57==(2 -1)) then v58=WA_GetUnitAura(v54,v55,v56);if (v58==nil) then return 0 + 0 ;end v57=4 -2 ;end if (v57==0) then if (v55==nil) then local v116=a<b ;end if (v56==nil) then v56="PLAYER";end v57=1;end if (v57==3) then return v59-GetTime() ;end if (v57==(16 -(9 + 5))) then v59=select(382 -(85 + 291) ,WA_GetUnitAura(v54,v55,v56));if (v59==nil) then return 0;end v57=1268 -(243 + 1022) ;end end end;aura_env.GetRemainingDebuffDuration=function(v60,v61) return aura_env.GetRemainingAuraDuration(v60,v61,"HARMFUL|PLAYER");end;aura_env.GetSpellChargesFractional=function(v62) local v63=0;local v64;local v65;local v66;while true do if (v63==(7 -5)) then return v65 + v66 ;end if (v63==1) then if (v64.cooldownStartTime==(0 + 0)) then return v65;end v66=(GetTime() -v64.cooldownStartTime)/v64.cooldownDuration ;v63=1182 -(1123 + 57) ;end if (v63==(0 + 0)) then v64=C_Spell.GetSpellCharges(v62);v65=v64.currentCharges;v63=255 -(163 + 91) ;end end end;aura_env.GetTimeToNextCharge=function(v67) local v68=1930 -(1869 + 61) ;local v69;local v70;local v71;while true do if (v68==(1 + 0)) then if (v70==(0 -0)) then return 0 -0 ;end v71=(v69.cooldownStartTime + v69.cooldownDuration) -GetTime() ;v68=1 + 1 ;end if ((0 -0)==v68) then v69=C_Spell.GetSpellCharges(v67);v70=v69.maxCharges-v69.currentCharges ;v68=1 + 0 ;end if (v68==(1476 -(1329 + 145))) then return v71;end end end;aura_env.GetTimeToFullCharges=function(v72) local v73=971 -(140 + 831) ;local v74;local v75;local v76;while true do if ((1851 -(1409 + 441))==v73) then if (v75==0) then return 0;end v76=(v74.cooldownStartTime + v74.cooldownDuration) -GetTime() ;v73=720 -(15 + 703) ;end if (v73==(1 + 1)) then if (v75>1) then v76=v76 + (v74.cooldownDuration * (v75-(439 -(262 + 176)))) ;end return v76;end if (v73==0) then v74=C_Spell.GetSpellCharges(v72);v75=v74.maxCharges-v74.currentCharges ;v73=1722 -(345 + 1376) ;end end end;aura_env.TargetTimeToXPct=function(v77,v78) local v79=688 -(198 + 490) ;while true do if (v79==(0 -0)) then if (v78==nil) then local v117=a<b ;end if (HeroLib==nil) then return v78;end v79=1;end if (v79==1) then return HeroLib.Unit.Target:TimeToX(v77);end end end;aura_env.FightRemains=function(v80,v81) if (v80==nil) then local v111=a<b ;end if (HeroLib==nil) then return v80;end return HeroLib.FightRemains(HeroLib.Unit.Player:GetEnemiesInRange(v81));end;aura_env.IsAuraRefreshable=function(v82,v83) local v84=0 -0 ;local v85;local v86;local v87;local v88;local v89;while true do if (v84==(1207 -(696 + 510))) then v86,v86,v86,v86,v87,v88=WA_GetUnitAura(v83,v82,v85);if (v87==nil) then return true;end v84=2;end if (v84==(3 -1)) then v89=v88-GetTime() ;return (v89/v87)<0.3 ;end if (v84==(1262 -(1091 + 171))) then v85="";if (v83~="player") then v83="target";v85="HARMFUL|PLAYER";end v84=1 + 0 ;end end end;aura_env.GetRemainingSpellCooldown=function(v90) local v91=0 -0 ;local v92;local v93;local v94;while true do if (v91==(0 -0)) then if (v90==nil) then local v118=a<b ;end v92=C_Spell.GetSpellCharges(v90);v91=375 -(123 + 251) ;end if (v91==(9 -7)) then v94=(v93.startTime + v93.duration) -GetTime() ;if ((v93.duration==(698 -(208 + 490))) or (v93.duration==WeakAuras.gcdDuration())) then v94=0 + 0 ;end v91=2 + 1 ;end if (v91==(837 -(660 + 176))) then if (v92 and (C_Spell.GetSpellCharges(v90).currentCharges>=(1 + 0))) then return 202 -(14 + 188) ;end v93=C_Spell.GetSpellCooldown(v90);v91=2;end if (v91==3) then return v94;end end end;aura_env.HasBloodlust=function() return WA_GetUnitBuff("player",3500 -(534 + 141) ) or WA_GetUnitBuff("player",106401 + 158266 ) or WA_GetUnitBuff("player",71076 + 9277 ) or WA_GetUnitBuff("player",30942 + 1240 ) or WA_GetUnitBuff("player",820413 -430027 ) or WA_GetUnitBuff("player",613678 -227138 ) ;end;aura_env.PlayerHasBuff=function(v95) return WA_GetUnitBuff("player",v95)~=nil ;end;aura_env.TargetHasDebuff=function(v96) return WA_GetUnitDebuff("target",v96,"PLAYER|HARMFUL")~=nil ;end;aura_env.CalcDeathStrikeHeal=function() local v97=1;local v98=GetTime();local v99=0;while aura_env.DamageTaken[v97] do local v107=aura_env.DamageTaken[v97][2 -1 ];local v108=aura_env.DamageTaken[v97][2 + 0 ];if (v98>(v107 + aura_env.LastSec)) then table.remove(aura_env.DamageTaken,v97);else v99=v99 + v108 ;v97=v97 + 1 + 0 ;end end local v100=aura_env.BasePercentage;local v101=aura_env.MinHealPercentage;if IsPlayerSpell(aura_env.ids.ImprovedDeathStrikeTalent) then local v112=396 -(115 + 281) ;while true do if (0==v112) then v100=v100 * (2.05 -1) ;v101=v101 * 1.05 ;break;end end end local v102=1 + ((GetCombatRatingBonus(25 + 4 ) + GetVersatilityBonus(30))/(241 -141)) ;local v103=(3 -2) + ((select(883 -(550 + 317) ,WA_GetUnitBuff("player",69042 -21254 )) or (0 -0))/(279 -179)) ;local v104=(286 -(134 + 151)) + ((1665.04 -(970 + 695)) * (select(5 -2 ,WA_GetUnitBuff("player",64844)) or (1990 -(582 + 1408)))) ;local v105=v99 * v100 ;local v106=v105/UnitHealthMax("player") ;v106=math.max(v101,v106);v106=v106 * v102 * v103 * v104 ;v105=v106 * UnitHealthMax("player") ;return v105;end;